(function(){
shadow$provide[32]=function(P,ta,ka,V){function J(a,b){(null==b||b>a.length)&&(b=a.length);for(var c=0,d=Array(b);c<b;c++)d[c]=a[c];return d}function N(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}function L(a,b,c){if(b){c=a.prototype;for(var d=0;d<b.length;d++){var e=b[d];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(c,F(e.key),e)}}return Object.defineProperty(a,"prototype",{writable:!1}),a}function I(a,b){var c=
"undefined"!=typeof Symbol&&a[Symbol.iterator]||a["@@iterator"];if(!c){if(Array.isArray(a)||(c=ha(a))||b){c&&(a=c);var d=0;b=function(){};return{s:b,n:function(){return d>=a.length?{done:!0}:{done:!1,value:a[d++]}},e:function(h){throw h;},f:b}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var e,f=!0,g=!1;return{s:function(){c=c.call(a)},n:function(){var h=c.next();return f=h.done,h},e:function(h){g=
!0;e=h},f:function(){try{f||null==c.return||c.return()}finally{if(g)throw e;}}}}function H(a,b,c){return(b=F(b))in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function W(a,b){var c=Array.isArray(a)?a:void 0;if(!c)a:{var d=null==a?null:"undefined"!=typeof Symbol&&a[Symbol.iterator]||a["@@iterator"];if(null!=d){var e,f,g,h=[],k=!0,l=!1;try{if(f=(d=d.call(a)).next,0===b){if(Object(d)!==d){c=void 0;break a}k=!1}else for(;!(k=(e=f.call(d)).done)&&(h.push(e.value),
h.length!==b);k=!0);}catch(n){l=!0;var m=n}finally{try{if(!k&&null!=d.return&&(g=d.return(),Object(g)!==g)){c=void 0;break a}}finally{if(l)throw m;}}c=h}else c=void 0}if(!(a=c||ha(a,b)))throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");return a}function D(a){var b=Array.isArray(a)?J(a):void 0;b||(b="undefined"!=typeof Symbol&&null!=a[Symbol.iterator]||null!=a["@@iterator"]?Array.from(a):
void 0);if(!(a=b||ha(a)))throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");return a}function F(a){a:if("object"==typeof a&&a){var b=a[Symbol.toPrimitive];if(void 0!==b){a=b.call(a,"string");if("object"!=typeof a)break a;throw new TypeError("@@toPrimitive must return a primitive value.");}a=String(a)}return"symbol"==typeof a?a:a+""}function U(a){"@babel/helpers - typeof";return U="function"==typeof Symbol&&
"symbol"==typeof Symbol.iterator?function(b){return typeof b}:function(b){return b&&"function"==typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b},U(a)}function ha(a,b){if(a){if("string"==typeof a)return J(a,b);var c={}.toString.call(a).slice(8,-1);return"Object"===c&&a.constructor&&(c=a.constructor.name),"Map"===c||"Set"===c?Array.from(a):"Arguments"===c||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c)?J(a,b):void 0}}function za(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,
"default")?a["default"]:a}function Pa(){if(zf)return Af;zf=1;return Af=function(a){var b=typeof a;return a!=null&&(b=="object"||b=="function")}}function Oa(){if(Bf)return Cf;Bf=1;Df||(Df=1,Ef=typeof Pd=="object"&&Pd&&Pd.Object===Object&&Pd);var a=Ef;var b=typeof self=="object"&&self&&self.Object===Object&&self;return Cf=a||b||Function("return this")()}function xa(){if(Ff)return Gf;Ff=1;var a=Oa();return Gf=function(){return a.Date.now()}}function Ca(){if(Hf)return If;Hf=1;var a=/\s/;return If=function(b){for(var c=
b.length;c--&&a.test(b.charAt(c)););return c}}function Ka(){if(Jf)return Kf;Jf=1;var a=Ca(),b=/^\s+/;return Kf=function(c){return c?c.slice(0,a(c)+1).replace(b,""):c}}function kb(){if(Lf)return Mf;Lf=1;return Mf=Oa().Symbol}function pb(){if(Nf)return Of;Nf=1;var a=kb(),b=Object.prototype,c=b.hasOwnProperty,d=b.toString,e=a?a.toStringTag:void 0;return Of=function(f){var g=c.call(f,e),h=f[e];try{f[e]=void 0;var k=!0}catch(m){}var l=d.call(f);k&&(g?f[e]=h:delete f[e]);return l}}function gb(){if(Pf)return Qf;
Pf=1;var a=Object.prototype.toString;return Qf=function(b){return a.call(b)}}function X(){if(Rf)return Sf;Rf=1;var a=kb(),b=pb(),c=gb(),d=a?a.toStringTag:void 0;return Sf=function(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":d&&d in Object(e)?b(e):c(e)}}function ea(){if(Tf)return Uf;Tf=1;return Uf=function(a){return a!=null&&typeof a=="object"}}function La(){if(Vf)return Wf;Vf=1;var a=X(),b=ea();return Wf=function(c){return typeof c=="symbol"||b(c)&&a(c)=="[object Symbol]"}}function Sa(){if(Xf)return Yf;
Xf=1;var a=Ka(),b=Pa(),c=La(),d=0/0,e=/^[-+]0x[0-9a-f]+$/i,f=/^0b[01]+$/i,g=/^0o[0-7]+$/i,h=parseInt;return Yf=function(k){if(typeof k=="number")return k;if(c(k))return d;b(k)&&(k=typeof k.valueOf=="function"?k.valueOf():k,k=b(k)?k+"":k);if(typeof k!="string")return k===0?k:+k;k=a(k);var l=f.test(k);return l||g.test(k)?h(k.slice(2),l?2:8):e.test(k)?d:+k}}function fb(a,b){function c(l){for(var m=[],n=0;n<l.length;n++){var p=l[n],q=l[(n+1)%l.length],t=-(q.y-p.y);p=q.x-p.x;q=Math.sqrt(t*t+p*p);m.push({x:t/
q,y:p/q})}return m}function d(l,m){var n=Infinity,p=-Infinity;l=I(l);var q;try{for(l.s();!(q=l.n()).done;){var t=q.value,u=t.x*m.x+t.y*m.y;n=Math.min(n,u);p=Math.max(p,u)}}catch(x){l.e(x)}finally{l.f()}return{min:n,max:p}}var e=[].concat(D(c(a)),D(c(b)));e=I(e);var f;try{for(e.s();!(f=e.n()).done;){var g=f.value,h=d(a,g),k=d(b,g);if(h.max<k.min||k.max<h.min)return!1}}catch(l){e.e(l)}finally{e.f()}return!0}function E(a,b,c,d,e,f){var g=zb(a)?a:Yc[a]||Yc.euclidean;return b===0&&zb(a)?g(e,f):g(b,c,d,
e,f)}function Y(){if(Zf)return $f;Zf=1;return $f=Array.isArray}function qa(){if(ag)return bg;ag=1;var a=Y(),b=La(),c=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,d=/^\w*$/;return bg=function(e,f){if(a(e))return!1;var g=typeof e;return g=="number"||g=="symbol"||g=="boolean"||e==null||b(e)?!0:d.test(e)||!c.test(e)||f!=null&&e in Object(f)}}function Aa(){if(cg)return dg;cg=1;var a=X(),b=Pa();return dg=function(c){if(!b(c))return!1;c=a(c);return c=="[object Function]"||c=="[object GeneratorFunction]"||
c=="[object AsyncFunction]"||c=="[object Proxy]"}}function va(){if(eg)return fg;eg=1;gg||(gg=1,hg=Oa()["__core-js_shared__"]);var a=hg;var b=function(){var c=/[^.]+$/.exec(a&&a.keys&&a.keys.IE_PROTO||"");return c?"Symbol(src)_1."+c:""}();return fg=function(c){return!!b&&b in c}}function Fa(){if(ig)return jg;ig=1;var a=Function.prototype.toString;return jg=function(b){if(b!=null){try{return a.call(b)}catch(c){}try{return b+""}catch(c){}}return""}}function ma(){if(kg)return lg;kg=1;var a=Aa(),b=va(),
c=Pa(),d=Fa(),e=/^\[object .+?Constructor\]$/,f=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$\x26").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");return lg=function(g){return!c(g)||b(g)?!1:(a(g)?f:e).test(d(g))}}function Ja(){if(mg)return ng;mg=1;return ng=function(a,b){return a==null?void 0:a[b]}}function Va(){if(og)return pg;og=1;var a=ma(),b=Ja();return pg=function(c,d){c=b(c,d);return a(c)?c:void 0}}
function r(){if(qg)return rg;qg=1;return rg=Va()(Object,"create")}function A(){if(sg)return tg;sg=1;var a=r();return tg=function(){this.__data__=a?a(null):{};this.size=0}}function O(){if(ug)return vg;ug=1;return vg=function(a){a=this.has(a)&&delete this.__data__[a];this.size-=a?1:0;return a}}function G(){if(wg)return xg;wg=1;var a=r(),b=Object.prototype.hasOwnProperty;return xg=function(c){var d=this.__data__;return a?(c=d[c],c==="__lodash_hash_undefined__"?void 0:c):b.call(d,c)?d[c]:void 0}}function T(){if(yg)return zg;
yg=1;var a=r(),b=Object.prototype.hasOwnProperty;return zg=function(c){var d=this.__data__;return a?d[c]!==void 0:b.call(d,c)}}function ca(){if(Ag)return Bg;Ag=1;var a=r();return Bg=function(b,c){var d=this.__data__;this.size+=this.has(b)?0:1;d[b]=a&&c===void 0?"__lodash_hash_undefined__":c;return this}}function ua(){function a(g){var h=-1,k=g==null?0:g.length;for(this.clear();++h<k;){var l=g[h];this.set(l[0],l[1])}}if(Cg)return Dg;Cg=1;var b=A(),c=O(),d=G(),e=T(),f=ca();a.prototype.clear=b;a.prototype["delete"]=
c;a.prototype.get=d;a.prototype.has=e;a.prototype.set=f;return Dg=a}function la(){if(Eg)return Fg;Eg=1;return Fg=function(){this.__data__=[];this.size=0}}function Za(){if(Gg)return Hg;Gg=1;return Hg=function(a,b){return a===b||a!==a&&b!==b}}function db(){if(Ig)return Jg;Ig=1;var a=Za();return Jg=function(b,c){for(var d=b.length;d--;)if(a(b[d][0],c))return d;return-1}}function yb(){if(Kg)return Lg;Kg=1;var a=db(),b=Array.prototype.splice;return Lg=function(c){var d=this.__data__;c=a(d,c);if(c<0)return!1;
c==d.length-1?d.pop():b.call(d,c,1);--this.size;return!0}}function hc(){if(Mg)return Ng;Mg=1;var a=db();return Ng=function(b){var c=this.__data__;b=a(c,b);return b<0?void 0:c[b][1]}}function $b(){if(Og)return Pg;Og=1;var a=db();return Pg=function(b){return a(this.__data__,b)>-1}}function Xb(){if(Qg)return Rg;Qg=1;var a=db();return Rg=function(b,c){var d=this.__data__,e=a(d,b);e<0?(++this.size,d.push([b,c])):d[e][1]=c;return this}}function dc(){function a(g){var h=-1,k=g==null?0:g.length;for(this.clear();++h<
k;){var l=g[h];this.set(l[0],l[1])}}if(Sg)return Tg;Sg=1;var b=la(),c=yb(),d=hc(),e=$b(),f=Xb();a.prototype.clear=b;a.prototype["delete"]=c;a.prototype.get=d;a.prototype.has=e;a.prototype.set=f;return Tg=a}function Pb(){if(Ug)return Vg;Ug=1;var a=Va(),b=Oa();return Vg=a(b,"Map")}function uc(){if(Wg)return Xg;Wg=1;var a=ua(),b=dc(),c=Pb();return Xg=function(){this.size=0;this.__data__={hash:new a,map:new (c||b),string:new a}}}function Qb(){if(Yg)return Zg;Yg=1;return Zg=function(a){var b=typeof a;
return b=="string"||b=="number"||b=="symbol"||b=="boolean"?a!=="__proto__":a===null}}function eb(){if($g)return ah;$g=1;var a=Qb();return ah=function(b,c){b=b.__data__;return a(c)?b[typeof c=="string"?"string":"hash"]:b.map}}function Xa(){if(bh)return ch;bh=1;var a=eb();return ch=function(b){b=a(this,b)["delete"](b);this.size-=b?1:0;return b}}function Cb(){if(dh)return eh;dh=1;var a=eb();return eh=function(b){return a(this,b).get(b)}}function Wa(){if(fh)return gh;fh=1;var a=eb();return gh=function(b){return a(this,
b).has(b)}}function Fb(){if(hh)return ih;hh=1;var a=eb();return ih=function(b,c){var d=a(this,b),e=d.size;d.set(b,c);this.size+=d.size==e?0:1;return this}}function Fk(){function a(g){var h=-1,k=g==null?0:g.length;for(this.clear();++h<k;){var l=g[h];this.set(l[0],l[1])}}if(jh)return kh;jh=1;var b=uc(),c=Xa(),d=Cb(),e=Wa(),f=Fb();a.prototype.clear=b;a.prototype["delete"]=c;a.prototype.get=d;a.prototype.has=e;a.prototype.set=f;return kh=a}function Gk(){function a(c,d){if(typeof c!="function"||d!=null&&
typeof d!="function")throw new TypeError("Expected a function");var e=function(){var f=arguments,g=d?d.apply(this,f):f[0],h=e.cache;if(h.has(g))return h.get(g);f=c.apply(this,f);e.cache=h.set(g,f)||h;return f};e.cache=new (a.Cache||b);return e}if(lh)return mh;lh=1;var b=Fk();a.Cache=b;return mh=a}function Hk(){if(nh)return oh;nh=1;var a=Gk();return oh=function(b){b=a(b,function(d){c.size===500&&c.clear();return d});var c=b.cache;return b}}function ph(){if(qh)return rh;qh=1;var a=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,
b=/\\(\\)?/g;return rh=Hk()(function(c){var d=[];c.charCodeAt(0)===46&&d.push("");c.replace(a,function(e,f,g,h){d.push(g?h.replace(b,"$1"):f||e)});return d})}function sh(){if(th)return uh;th=1;return uh=function(a,b){for(var c=-1,d=a==null?0:a.length,e=Array(d);++c<d;)e[c]=b(a[c],c,a);return e}}function Ik(){function a(g){if(typeof g=="string")return g;if(d(g))return c(g,a)+"";if(e(g))return f?f.call(g):"";var h=g+"";return h=="0"&&1/g==-Infinity?"-0":h}if(vh)return wh;vh=1;var b=kb(),c=sh(),d=Y(),
e=La(),f=(b=b?b.prototype:void 0)?b.toString:void 0;return wh=a}function xh(){if(yh)return zh;yh=1;var a=Ik();return zh=function(b){return b==null?"":a(b)}}function Ah(){if(Bh)return Ch;Bh=1;var a=Y(),b=qa(),c=ph(),d=xh();return Ch=function(e,f){return a(e)?e:b(e,f)?[e]:c(d(e))}}function Ce(){if(Dh)return Eh;Dh=1;var a=La();return Eh=function(b){if(typeof b=="string"||a(b))return b;var c=b+"";return c=="0"&&1/b==-Infinity?"-0":c}}function Jk(){if(Fh)return Gh;Fh=1;var a=Ah(),b=Ce();return Gh=function(c,
d){d=a(d,c);for(var e=0,f=d.length;c!=null&&e<f;)c=c[b(d[e++])];return e&&e==f?c:void 0}}function Kk(){if(Hh)return Ih;Hh=1;var a=Va();a:{try{var b=a(Object,"defineProperty");b({},"",{});var c=b;break a}catch(d){}c=void 0}return Ih=c}function Lk(){if(Jh)return Kh;Jh=1;var a=Kk();return Kh=function(b,c,d){c=="__proto__"&&a?a(b,c,{configurable:!0,enumerable:!0,value:d,writable:!0}):b[c]=d}}function Mk(){if(Lh)return Mh;Lh=1;var a=Lk(),b=Za(),c=Object.prototype.hasOwnProperty;return Mh=function(d,e,
f){var g=d[e];c.call(d,e)&&b(g,f)&&(f!==void 0||e in d)||a(d,e,f)}}function Nk(){if(Nh)return Oh;Nh=1;var a=/^(?:0|[1-9]\d*)$/;return Oh=function(b,c){var d=typeof b;c=c==null?9007199254740991:c;return!!c&&(d=="number"||d!="symbol"&&a.test(b))&&b>-1&&b%1==0&&b<c}}function Ok(){if(Ph)return Qh;Ph=1;var a=Mk(),b=Ah(),c=Nk(),d=Pa(),e=Ce();return Qh=function(f,g,h,k){if(!d(f))return f;g=b(g,f);for(var l=-1,m=g.length,n=m-1,p=f;p!=null&&++l<m;){var q=e(g[l]),t=h;if(q==="__proto__"||q==="constructor"||
q==="prototype")break;if(l!=n){var u=p[q];t=k?k(u,q,p):void 0;t===void 0&&(t=d(u)?u:c(g[l+1])?[]:{})}a(p,q,t);p=p[q]}return f}}function Pk(){if(Rh)return Sh;Rh=1;return Sh=function(a,b){var c=-1,d=a.length;for(b||(b=Array(d));++c<d;)b[c]=a[c];return b}}function De(a,b,c,d){for(var e=[],f=new Zc,g=a.cy().hasCompoundNodes(),h=0;h<a.length;h++){var k=a[h];c?e.push(k):g&&d(e,f,k)}for(;e.length>0;)c=e.shift(),b(c),f.add(c.id()),g&&d(e,f,c);return a}function Th(a,b,c){if(c.isParent()){c=c._private.children;
for(var d=0;d<c.length;d++){var e=c[d];b.has(e.id())||a.push(e)}}}function Uh(a,b,c){c.isChild()&&(c=c._private.parent,b.has(c.id())||a.push(c))}function Qk(a,b,c){Uh(a,b,c);Th(a,b,c)}function Ee(a){return function(b){b===void 0&&(b=!0);if(this.length!==0&&this.isNode()&&!this.removed()){for(var c=0,d=this[0],e=d._private.edges,f=0;f<e.length;f++){var g=e[f];if(b||!g.isLoop())c+=a(d,g)}return c}}}function $c(a,b){return function(c){for(var d,e=this.nodes(),f=0;f<e.length;f++){var g=e[f][a](c);g===
void 0||d!==void 0&&!b(g,d)||(d=g)}return d}}function vd(){return!1}function Qd(){return!0}function Rd(){for(var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Rk,b=arguments.length>1?arguments[1]:void 0,c=0;c<Vh.length;c++){var d=Vh[c];this[d]=a[d]||Wh[d]}this.context=b||this.context;this.listeners=[];this.emitting=0}function Xh(a,b,c){var d=c._private;d=d.styleCache=d.styleCache||[];var e;(e=d[a])==null&&(e=d[a]=b(c));return e}function Sd(a,b){a=Jc(a);return function(c){return Xh(a,b,
c)}}function Td(a,b){a=Jc(a);var c=function(d){return b.call(d)};return function(){var d=this[0];if(d)return Xh(a,c,d)}}function Fe(a,b){if(a=a._private.data.parent?a.parents():null)for(var c=0;c<a.length;c++)if(!b(a[c]))return!1;return!0}function Ge(a){var b=a.ok,c=a.edgeOkViaNode||a.ok,d=a.parentOk||a.ok;return function(){var e=this.cy();if(!e.styleEnabled())return!0;var f=this[0];e=e.hasCompoundNodes();if(f){var g=f._private;if(!b(f))return!1;if(f.isNode())return!e||Fe(f,d);f=g.source;g=g.target;
return c(f)&&(!e||Fe(f,c))&&(f===g||c(g)&&(!e||Fe(g,c)))}}}function Yh(a){return function(){var b=arguments,c=[];if(b.length===2)this.on(a.event,b[0],b[1]);else if(b.length===1&&zb(b[0]))this.on(a.event,b[0]);else if(b.length===0||b.length===1&&rb(b[0])){b=b.length===1?b[0]:null;for(var d=0;d<this.length;d++){var e=this[d],f=!a.ableField||e._private[a.ableField],g=e._private[a.field]!=a.value;if(a.overrideAble){var h=a.overrideAble(e);if(h!==void 0&&(f=h,!h))return this}f&&(e._private[a.field]=a.value,
g&&c.push(e))}c=this.spawn(c);c.updateStyle();c.emit(a.event);b&&c.emit(b)}return this}}function ad(a){vc[a.field]=function(){var b=this[0];if(b){if(a.overrideField){var c=a.overrideField(b);if(c!==void 0)return c}return b._private[a.field]}};vc[a.on]=Yh({event:a.on,field:a.field,ableField:a.ableField,overrideAble:a.overrideAble,value:!0});vc[a.off]=Yh({event:a.off,field:a.field,ableField:a.ableField,overrideAble:a.overrideAble,value:!1})}function Zh(a){return function(b){for(var c=[],d=0;d<this.length;d++){var e=
this[d]._private[a.attr];e&&c.push(e)}return this.spawn(c,!0).filter(b)}}function $h(a){return function(b){var c=[],d=this._private.cy,e=a||{};Qa(b)&&(b=d.$(b));for(d=0;d<b.length;d++)for(var f=b[d]._private.edges,g=0;g<f.length;g++){var h=f[g],k=h._private.data,l=this.hasElementWithId(k.source)&&b.hasElementWithId(k.target);k=b.hasElementWithId(k.source)&&this.hasElementWithId(k.target);if(l||k){if(e.thisIsSrc||e.thisIsTgt){if(e.thisIsSrc&&!l)continue;if(e.thisIsTgt&&!k)continue}c.push(h)}}return this.spawn(c,
!0)}}function ai(a){a=Ra({},{codirected:!1},a);return function(b){for(var c=[],d=this.edges(),e=a,f=0;f<d.length;f++){var g=d[f]._private,h=g.source,k=h._private.data.id;g=g.data.target;h=h._private.edges;for(var l=0;l<h.length;l++){var m=h[l],n=m._private.data,p=n.target,q=n.source;n=p===g&&q===k;p=k===p&&g===q;(e.codirected&&n||!e.codirected&&(n||p))&&c.push(m)}}return this.spawn(c,!0).filter(b)}}function Sk(a,b,c,d){function e(m,n,p){return(((1-3*p+3*n)*m+(3*p-6*n))*m+3*n)*m}var f=typeof Float32Array!==
"undefined";if(arguments.length!==4)return!1;for(var g=0;g<4;++g)if(typeof arguments[g]!=="number"||isNaN(arguments[g])||!isFinite(arguments[g]))return!1;a=Math.min(a,1);c=Math.min(c,1);a=Math.max(a,0);c=Math.max(c,0);var h=f?new Float32Array(11):Array(11),k=!1;f=function(m){if(!k&&(k=!0,a!==b||c!==d))for(var n=0;n<11;++n)h[n]=e(n*.1,a,c);if(a===b&&c===d)return m;if(m===0)return 0;if(m===1)return 1;var p=0;for(n=1;n!==10&&h[n]<=m;++n)p+=.1;--n;n=p+(m-h[n])/(h[n+1]-h[n])*.1;var q=3*(1-3*c+3*a)*n*n+
2*(3*c-6*a)*n+3*a;if(q>=.001){for(p=0;p<4;++p){q=3*(1-3*c+3*a)*n*n+2*(3*c-6*a)*n+3*a;if(q===0)break;var t=e(n,a,c)-m;n-=t/q}m=n}else if(q===0)m=n;else{n=p;p+=.1;var u=0;do t=n+(p-n)/2,q=e(t,a,c)-m,q>0?p=t:n=t;while(Math.abs(q)>1E-7&&++u<10);m=t}return e(m,b,d)};f.getControlPoints=function(){return[{x:a,y:b},{x:c,y:d}]};var l="generateBezier("+[a,b,c,d]+")";f.toString=function(){return l};return f}function bi(a,b,c,d,e){if(d===1||b===c)return c;b=e(b,c,d);if(a==null)return b;if(a.roundValue||a.color)b=
Math.round(b);a.min!==void 0&&(b=Math.max(b,a.min));a.max!==void 0&&(b=Math.min(b,a.max));return b}function ci(a,b){return a.pfValue!=null||a.value!=null?a.pfValue==null||b!=null&&b.type.units==="%"?a.value:a.pfValue:a}function bd(a,b,c,d,e){var f=e!=null?e.type:null;c<0?c=0:c>1&&(c=1);a=ci(a,e);b=ci(b,e);if(Ba(a)&&Ba(b))return bi(f,a,b,c,d);if(rb(a)&&rb(b)){e=[];for(var g=0;g<b.length;g++){var h=a[g],k=b[g];h!=null&&k!=null?(h=bi(f,h,k,c,d),e.push(h)):e.push(k)}return e}}function Tk(a,b,c,d){var e=
!d,f=a._private;b=b._private;var g=b.easing,h=b.startTime,k=(d?a:a.cy()).style();if(!b.easingImpl)if(g==null)b.easingImpl=Ud.linear;else{var l=Qa(g)?k.parse("transition-timing-function",g).value:g;Qa(l)?(g=l,l=[]):(g=l[1],l=l.slice(2).map(function(p){return+p}));l.length>0?(g==="spring"&&l.push(b.duration),b.easingImpl=Ud[g].apply(null,l)):b.easingImpl=Ud[g]}g=b.easingImpl;c=b.duration===0?1:(c-h)/b.duration;b.applying&&(c=b.progress);c<0?c=0:c>1&&(c=1);if(b.delay==null){h=b.startPosition;if((l=b.position)&&
e&&!a.locked()){var m={};wd(h.x,l.x)&&(m.x=bd(h.x,l.x,c,g));wd(h.y,l.y)&&(m.y=bd(h.y,l.y,c,g));a.position(m)}l=b.startPan;m=b.pan;var n=f.pan;if(h=m!=null&&d)wd(l.x,m.x)&&(n.x=bd(l.x,m.x,c,g)),wd(l.y,m.y)&&(n.y=bd(l.y,m.y,c,g)),a.emit("pan");l=b.startZoom;m=b.zoom;if(d=m!=null&&d)wd(l,m)&&(f.zoom=xd(f.minZoom,bd(l,m,c,g),f.maxZoom)),a.emit("zoom");(h||d)&&a.emit("viewport");if((f=b.style)&&f.length>0&&e){for(e=0;e<f.length;e++)h=f[e],d=h.name,l=b.startStyle[d],h=bd(l,h,c,g,k.properties[l.name]),k.overrideBypass(a,
d,h);a.emit("style")}}return b.progress=c}function wd(a,b){return a==null||b==null?!1:Ba(a)&&Ba(b)||a&&b?!0:!1}function Uk(a,b,c,d){a=b._private;a.started=!0;a.startTime=c-a.progress*a.duration}function di(a,b){function c(k,l){var m=k._private,n=m.animation.current;m=m.animation.queue;var p=!1;if(n.length===0){var q=m.shift();q&&n.push(q)}q=function(v){for(var w=v.length-1;w>=0;w--)(0,v[w])();v.splice(0,v.length)};for(var t=n.length-1;t>=0;t--){var u=n[t],x=u._private;if(x.stopped)n.splice(t,1),x.hooked=
!1,x.playing=!1,x.started=!1,q(x.frames);else if(x.playing||x.applying)x.playing&&x.applying&&(x.applying=!1),x.started||Uk(k,u,a),Tk(k,u,a,l),x.applying&&(x.applying=!1),q(x.frames),x.step!=null&&x.step(a),u.completed()&&(n.splice(t,1),x.hooked=!1,x.playing=!1,x.started=!1,q(x.completes)),p=!0}l||n.length!==0||m.length!==0||e.push(k);return p}for(var d=b._private.aniEles,e=[],f=!1,g=0;g<d.length;g++){var h=c(d[g]);f=f||h}g=c(b,!0);if(f||g)d.length>0?b.notify("draw",d):b.notify("draw");d.unmerge(e);
b.emit("step")}function ei(a){this.options=Ra({},Vk,Wk,a)}function fi(a){this.options=Ra({},Xk,a)}function gi(a){this.options=Ra({},Yk,a)}function Vd(a){this.options=Ra({},Zk,a);this.options.layout=this;var b=this.options.eles.nodes();a=this.options.eles.edges().filter(function(c){var d=c.source().data("id"),e=c.target().data("id");c=b.some(function(g){return g.data("id")===d});var f=b.some(function(g){return g.data("id")===e});return!c||!f});this.options.eles=this.options.eles.not(a)}function hi(a){this.options=
Ra({},$k,a)}function He(a){this.options=Ra({},al,a)}function ii(a){this.options=Ra({},bl,a)}function ji(a){this.options=Ra({},cl,a)}function ki(a){this.options=a;this.notifications=0}function li(a,b){b.radius===0?a.lineTo(b.cx,b.cy):a.arc(b.cx,b.cy,b.radius,b.startAngle,b.endAngle,b.counterClockwise)}function Ie(a,b,c,d){if(d===0||b.radius===0)return{cx:b.x,cy:b.y,radius:0,startX:b.x,startY:b.y,stopX:b.x,stopY:b.y,startAngle:void 0,endAngle:void 0,counterClockwise:void 0};var e=arguments.length>4&&
arguments[4]!==void 0?arguments[4]:!0;if(a!==mi)ni(b,a,ic);else{var f=ac,g=ic;g.x=f.x*-1;g.y=f.y*-1;g.nx=f.nx*-1;g.ny=f.ny*-1;g.ang=f.ang>0?-(Math.PI-f.ang):Math.PI+f.ang}ni(b,c,ac);oi=ic.nx*ac.ny-ic.ny*ac.nx;pi=ic.nx*ac.nx-ic.ny*-ac.ny;pc=Math.asin(Math.max(-1,Math.min(1,oi)));Math.abs(pc)<1E-6?(Je=b.x,Ke=b.y,Kc=yd=0):(Lc=1,Wd=!1,pi<0?pc<0?pc=Math.PI+pc:(pc=Math.PI-pc,Lc=-1,Wd=!0):pc>0&&(Lc=-1,Wd=!0),yd=b.radius!==void 0?b.radius:d,Mc=pc/2,Xd=Math.min(ic.len/2,ac.len/2),e?(jc=Math.abs(Math.cos(Mc)*
yd/Math.sin(Mc)),jc>Xd?(jc=Xd,Kc=Math.abs(jc*Math.sin(Mc)/Math.cos(Mc))):Kc=yd):(jc=Math.min(Xd,yd),Kc=Math.abs(jc*Math.sin(Mc)/Math.cos(Mc))),Le=b.x+ac.nx*jc,Me=b.y+ac.ny*jc,Je=Le-ac.ny*Kc*Lc,Ke=Me+ac.nx*Kc*Lc,qi=b.x+ic.nx*jc,ri=b.y+ic.ny*jc,mi=b);return{cx:Je,cy:Ke,radius:Kc,startX:qi,startY:ri,stopX:Le,stopY:Me,startAngle:ic.ang+Math.PI/2*Lc,endAngle:ac.ang-Math.PI/2*Lc,counterClockwise:Wd}}function si(a){var b=[];if(a!=null){for(var c=0;c<a.length;c+=2)b.push({x:a[c],y:a[c+1]});return b}}function dl(a,
b){for(var c=0;c<b.length;c++){var d=b[c];a.lineTo(d.x,d.y)}}function el(a,b,c){for(var d,e=0;e<b.length;e++){var f=b[e];e===0&&(d=f);a.lineTo(f.x,f.y)}a.quadraticCurveTo(c.x,c.y,d.x,d.y)}function ti(a,b,c){a.beginPath&&a.beginPath();for(var d=0;d<b.length;d++){var e=b[d];a.lineTo(e.x,e.y)}b=c[0];a.moveTo(b.x,b.y);for(d=1;d<c.length;d++)e=c[d],a.lineTo(e.x,e.y);a.closePath&&a.closePath()}function fl(a,b,c,d,e){a.beginPath&&a.beginPath();a.arc(c,d,e,0,Math.PI*2,!1);c=b[0];a.moveTo(c.x,c.y);for(c=0;c<
b.length;c++)d=b[c],a.lineTo(d.x,d.y);a.closePath&&a.closePath()}function gl(a,b,c,d){a.arc(b,c,d,0,Math.PI*2,!1)}function Ne(a,b,c,d,e){var f=arguments.length>5&&arguments[5]!==void 0?arguments[5]:5,g=arguments.length>6?arguments[6]:void 0;a.beginPath();a.moveTo(b+f,c);a.lineTo(b+d-f,c);a.quadraticCurveTo(b+d,c,b+d,c+f);a.lineTo(b+d,c+e-f);a.quadraticCurveTo(b+d,c+e,b+d-f,c+e);a.lineTo(b+f,c+e);a.quadraticCurveTo(b,c+e,b,c+e-f);a.lineTo(b,c+f);a.quadraticCurveTo(b,c,b+f,c);a.closePath();g?a.stroke():
a.fill()}function ui(a,b,c){b=a.createShader(b);a.shaderSource(b,c);a.compileShader(b);if(!a.getShaderParameter(b,a.COMPILE_STATUS))throw Error(a.getShaderInfoLog(b));return b}function hl(a,b,c){b=ui(a,a.VERTEX_SHADER,b);c=ui(a,a.FRAGMENT_SHADER,c);var d=a.createProgram();a.attachShader(d,b);a.attachShader(d,c);a.linkProgram(d);if(!a.getProgramParameter(d,a.LINK_STATUS))throw Error("Could not initialize shaders");return d}function il(a,b,c){c===void 0&&(c=b);var d=a.makeOffscreenCanvas(b,c),e=d.context=
d.getContext("2d");d.clear=function(){return e.clearRect(0,0,d.width,d.height)};d.clear();return d}function Oe(a){var b=a.pixelRatio,c=a.cy.zoom();a=a.cy.pan();return{zoom:c*b,pan:{x:a.x*b,y:a.y*b}}}function jl(a){return a.pstyle("background-fill").value!=="solid"||a.pstyle("background-image").strValue!=="none"?!1:a.pstyle("border-width").value===0||a.pstyle("border-opacity").value===0?!0:a.pstyle("border-style").value!=="solid"?!1:!0}function kl(a,b){if(a.length!==b.length)return!1;for(var c=0;c<
a.length;c++)if(a[c]!==b[c])return!1;return!0}function Nc(a,b,c){var d=a[1]/255,e=a[2]/255;c=c||Array(4);c[0]=a[0]/255*b;c[1]=d*b;c[2]=e*b;c[3]=b;return c}function cd(a,b){b=b||Array(4);b[0]=(a>>0&255)/255;b[1]=(a>>8&255)/255;b[2]=(a>>16&255)/255;b[3]=(a>>24&255)/255;return b}function ll(a,b){var c=a.createTexture();c.buffer=function(d){a.bindTexture(a.TEXTURE_2D,c);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE);a.texParameteri(a.TEXTURE_2D,
a.TEXTURE_MAG_FILTER,a.LINEAR);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR_MIPMAP_NEAREST);a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0);a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,d);a.generateMipmap(a.TEXTURE_2D);a.bindTexture(a.TEXTURE_2D,null)};c.deleteTexture=function(){a.deleteTexture(c)};return c}function vi(a,b){switch(b){case "float":return[1,a.FLOAT,4];case "vec2":return[2,a.FLOAT,4];case "vec3":return[3,a.FLOAT,4];case "vec4":return[4,a.FLOAT,4];case "int":return[1,
a.INT,4];case "ivec2":return[2,a.INT,4]}}function wi(a,b,c){switch(b){case a.FLOAT:return new Float32Array(c);case a.INT:return new Int32Array(c)}}function ml(a,b,c,d,e,f){switch(b){case a.FLOAT:return new Float32Array(c.buffer,f*d,e);case a.INT:return new Int32Array(c.buffer,f*d,e)}}function kc(a,b,c,d){c=vi(a,c);var e=W(c,3),f=e[0];c=e[1];e=e[2];var g=wi(a,c,b*f);e*=f;var h=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,h);a.bufferData(a.ARRAY_BUFFER,b*e,a.DYNAMIC_DRAW);a.enableVertexAttribArray(d);
c===a.FLOAT?a.vertexAttribPointer(d,f,c,!1,e,0):c===a.INT&&a.vertexAttribIPointer(d,f,c,e,0);a.vertexAttribDivisor(d,1);a.bindBuffer(a.ARRAY_BUFFER,null);var k=Array(b);for(d=0;d<b;d++)k[d]=ml(a,c,g,e,f,d);h.dataArray=g;h.stride=e;h.size=f;h.getView=function(l){return k[l]};h.setPoint=function(l,m,n){l=k[l];l[0]=m;l[1]=n};h.bufferSubData=function(l){a.bindBuffer(a.ARRAY_BUFFER,h);l?a.bufferSubData(a.ARRAY_BUFFER,0,g,0,l*f):a.bufferSubData(a.ARRAY_BUFFER,0,g)};return h}function nl(a,b,c){for(var d=
new Float32Array(b*9),e=Array(b),f=0;f<b;f++)e[f]=new Float32Array(d.buffer,f*9*4,9);var g=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,g);a.bufferData(a.ARRAY_BUFFER,d.byteLength,a.DYNAMIC_DRAW);for(b=0;b<3;b++)f=c+b,a.enableVertexAttribArray(f),a.vertexAttribPointer(f,3,a.FLOAT,!1,36,b*12),a.vertexAttribDivisor(f,1);a.bindBuffer(a.ARRAY_BUFFER,null);g.getMatrixView=function(h){return e[h]};g.setData=function(h,k){e[k].set(h,0)};g.bufferSubData=function(){a.bindBuffer(a.ARRAY_BUFFER,g);a.bufferSubData(a.ARRAY_BUFFER,
0,d)};return g}function ol(a){var b=a.createFramebuffer();a.bindFramebuffer(a.FRAMEBUFFER,b);var c=a.createTexture();a.bindTexture(a.TEXTURE_2D,c);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE);a.framebufferTexture2D(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,c,0);a.bindFramebuffer(a.FRAMEBUFFER,null);b.setFramebufferAttachmentSizes=function(d,e){a.bindTexture(a.TEXTURE_2D,
c);a.texImage2D(a.TEXTURE_2D,0,a.RGBA,d,e,0,a.RGBA,a.UNSIGNED_BYTE,null)};return b}function Pe(){var a=new xi(9);xi!=Float32Array&&(a[1]=0,a[2]=0,a[3]=0,a[5]=0,a[6]=0,a[7]=0);a[0]=1;a[4]=1;a[8]=1;return a}function yi(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=1;a[5]=0;a[6]=0;a[7]=0;a[8]=1;return a}function Yd(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],k=b[5],l=b[6],m=b[7];b=b[8];var n=c[0];c=c[1];a[0]=d;a[1]=e;a[2]=f;a[3]=g;a[4]=h;a[5]=k;a[6]=n*d+c*g+l;a[7]=n*e+c*h+m;a[8]=n*f+c*k+b;return a}function zi(a,
b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],k=b[5],l=b[6],m=b[7];b=b[8];var n=Math.sin(c);c=Math.cos(c);a[0]=c*d+n*g;a[1]=c*e+n*h;a[2]=c*f+n*k;a[3]=c*g-n*d;a[4]=c*h-n*e;a[5]=c*k-n*f;a[6]=l;a[7]=m;a[8]=b;return a}function Qe(a,b,c){var d=c[0];c=c[1];a[0]=d*b[0];a[1]=d*b[1];a[2]=d*b[2];a[3]=c*b[3];a[4]=c*b[4];a[5]=c*b[5];a[6]=b[6];a[7]=b[7];a[8]=b[8];return a}function pl(a,b){return a.intersection?a.intersection(b):new Set(D(a).filter(function(c){return b.has(c)}))}function ql(a){a=a.cy.container();
return Ai(a&&a.style&&a.style.backgroundColor||"white")}function rl(a){var b=a.render;a.render=function(f){f=f||{};var g=a.cy;a.webgl&&(g.zoom()>7.99?(g=a.data.contexts[a.WEBGL],g.clear(g.COLOR_BUFFER_BIT|g.DEPTH_BUFFER_BIT),b.call(a,f)):(sl(a),Bi(a,f,zd.SCREEN)))};var c=a.matchCanvasSize;a.matchCanvasSize=function(f){c.call(a,f);a.pickingFrameBuffer.setFramebufferAttachmentSizes(a.canvasWidth,a.canvasHeight);a.pickingFrameBuffer.needsDraw=!0};a.findNearestElements=function(f,g,h,k){k=Oe(a);h=k.pan;
k=k.zoom;f=f*k+h.x;g=g*k+h.y;g=Math.round(a.canvasHeight-g);f=W([f,g],2);g=f[1];f=f[0]-3;h=g-3;k=a.data.contexts[a.WEBGL];k.bindFramebuffer(k.FRAMEBUFFER,a.pickingFrameBuffer);a.pickingFrameBuffer.needsDraw&&(k.viewport(0,0,k.canvas.width,k.canvas.height),Bi(a,null,zd.PICKING),a.pickingFrameBuffer.needsDraw=!1);g=new Uint8Array(144);k.readPixels(f,h,6,6,k.RGBA,k.UNSIGNED_BYTE,g);k.bindFramebuffer(k.FRAMEBUFFER,null);f=new Set;for(h=0;h<36;h++)k=g.slice(h*4,h*4+4),k=k[0]+(k[1]<<8)+(k[2]<<16)+(k[3]<<
24)-1,k>=0&&f.add(k);g=a.getCachedZSortedEles();var l,m;f=I(f);var n;try{for(f.s();!(n=f.n()).done;){var p=g[n.value];!l&&p.isNode()&&(l=p);!m&&p.isEdge()&&(m=p);if(l&&m)break}}catch(q){f.e(q)}finally{f.f()}return[l,m].filter(Boolean)};var d=a.invalidateCachedZSortedEles;a.invalidateCachedZSortedEles=function(){d.call(a);a.pickingFrameBuffer.needsDraw=!0};var e=a.notify;a.notify=function(f,g){e.call(a,f,g);f==="viewport"||f==="bounds"?a.pickingFrameBuffer.needsDraw=!0:f==="background"&&a.drawing.invalidate(g,
{type:"node-body"})}}function sl(a){var b=function(c){c.save();c.setTransform(1,0,0,1,0,0);c.clearRect(0,0,a.canvasWidth,a.canvasHeight);c.restore()};b(a.data.contexts[a.NODE]);b(a.data.contexts[a.DRAG])}function Ci(a,b){var c=a.canvasWidth,d=a.canvasHeight,e=Oe(a);a=e.pan;e=e.zoom;b.setTransform(1,0,0,1,0,0);b.clearRect(0,0,c,d);b.translate(a.x,a.y);b.scale(e,e)}function tl(a,b){a.drawSelectionRectangle(b,function(c){return Ci(a,c)})}function ul(a){var b=function(d,e,f){e=d.atlasManager.getAtlasCollection(e);
d=a.data.contexts[a.NODE];e=e.atlases;for(var g=0;g<e.length;g++){var h=e[g].canvas;if(h){var k=h.width,l=h.height,m=k*g,n=h.height*f;d.save();d.scale(.4,.4);d.drawImage(h,m,n);d.strokeStyle="black";d.rect(m,n,k,l);d.stroke();d.restore()}}},c=0;b(a.drawing,"node",c++);b(a.drawing,"label",c++)}function Re(a,b,c){a=a.drawing;b+=1;c.isNode()?(a.drawNode(c,b,"node-underlay"),a.drawNode(c,b,"node-body"),a.drawTexture(c,b,"label"),a.drawNode(c,b,"node-overlay")):(a.drawEdgeLine(c,b),a.drawEdgeArrow(c,b,
"source"),a.drawEdgeArrow(c,b,"target"),a.drawTexture(c,b,"label"),a.drawTexture(c,b,"edge-source-label"),a.drawTexture(c,b,"edge-target-label"))}function Bi(a,b,c){var d;a.webglDebug&&(d=performance.now());var e=a.drawing,f=0;c.screen&&a.data.canvasNeedsRedraw[a.SELECT_BOX]&&tl(a,b);if(a.data.canvasNeedsRedraw[a.NODE]||c.picking){f=a.data.contexts[a.WEBGL];c.screen?(f.clearColor(0,0,0,0),f.enable(f.BLEND),f.blendFunc(f.ONE,f.ONE_MINUS_SRC_ALPHA)):f.disable(f.BLEND);f.clear(f.COLOR_BUFFER_BIT|f.DEPTH_BUFFER_BIT);
f.viewport(0,0,f.canvas.width,f.canvas.height);b=a.canvasWidth;var g=a.canvasHeight;f=Oe(a);var h=f.pan,k=f.zoom;f=Pe();Yd(f,f,[h.x,h.y]);Qe(f,f,[k,k]);var l=Pe();l[0]=2/b;l[1]=0;l[2]=0;l[3]=0;l[4]=-2/g;l[5]=0;l[6]=-1;l[7]=1;l[8]=1;b=Pe();g=l[0];h=l[1];k=l[2];var m=l[3],n=l[4],p=l[5],q=l[6],t=l[7];l=l[8];var u=f[0],x=f[1],v=f[2],w=f[3],C=f[4],y=f[5],B=f[6],M=f[7];f=f[8];b[0]=u*g+x*m+v*q;b[1]=u*h+x*n+v*t;b[2]=u*k+x*p+v*l;b[3]=w*g+C*m+y*q;b[4]=w*h+C*n+y*t;b[5]=w*k+C*p+y*l;b[6]=B*g+M*m+f*q;b[7]=B*h+
M*n+f*t;b[8]=B*k+M*p+f*l;g=a.getCachedZSortedEles();f=g.length;e.startFrame(b,c);if(c.screen){for(b=0;b<g.nondrag.length;b++)Re(a,b,g.nondrag[b]);for(b=0;b<g.drag.length;b++)Re(a,b,g.drag[b])}else if(c.picking)for(b=0;b<g.length;b++)Re(a,b,g[b]);e.endFrame();c.screen&&a.webglDebugShowAtlases&&(b=a.data.contexts[a.NODE],b.save(),Ci(a,b),b.strokeStyle="rgba(0, 0, 0, 0.3)",b.beginPath(),b.moveTo(-1E3,0),b.lineTo(1E3,0),b.stroke(),b.beginPath(),b.moveTo(0,-1E3),b.lineTo(0,1E3),b.stroke(),b.restore(),
ul(a));a.data.canvasNeedsRedraw[a.NODE]=!1;a.data.canvasNeedsRedraw[a.DRAG]=!1}if(a.webglDebug){b=performance.now();d=Math.ceil(b-d);b=e.getDebugInfo();f=["".concat(f," elements"),"".concat(b.totalInstances," instances"),"".concat(b.batchCount," batches"),"".concat(b.totalAtlases," atlases"),"".concat(b.wrappedCount," wrapped textures"),"".concat(b.simpleCount," simple shapes")].join(", ");console.log("WebGL (".concat(c.name,") - frame time ").concat(d,"ms"));console.log("Totals:");console.log("  ".concat(f));
console.log("Texture Atlases Used:");c=I(b.atlasInfo);var Q;try{for(c.s();!(Q=c.n()).done;){var ja=Q.value;console.log("  ".concat(ja.type,": ").concat(ja.keyCount," keys, ").concat(ja.atlasCount," atlases"))}}catch(da){c.e(da)}finally{c.f()}console.log("")}a.data.gc&&(console.log("Garbage Collect!"),a.data.gc=!1,e.gc())}function vl(a,b){a=atob(a);for(var c=new ArrayBuffer(a.length),d=new Uint8Array(c),e=0;e<a.length;e++)d[e]=a.charCodeAt(e);return new Blob([c],{type:b})}function Di(a){var b=a.indexOf(",");
return a.substr(b+1)}function Ei(a,b,c){switch(a.output){case "blob-promise":return new dd(function(d,e){try{b.toBlob(function(f){f!=null?d(f):e(Error("`canvas.toBlob()` sent a null value in its callback"))},c,a.quality)}catch(f){e(f)}});case "blob":return vl(Di(b.toDataURL(c,a.quality)),c);case "base64":return Di(b.toDataURL(c,a.quality));default:return b.toDataURL(c,a.quality)}}function Fi(a){var b=this,c=b.cy.window().document;a.webgl&&(ab.CANVAS_LAYERS=b.CANVAS_LAYERS=4,console.log("webgl rendering enabled"));
b.data={canvases:Array(ab.CANVAS_LAYERS),contexts:Array(ab.CANVAS_LAYERS),canvasNeedsRedraw:Array(ab.CANVAS_LAYERS),bufferCanvases:Array(ab.BUFFER_COUNT),bufferContexts:Array(ab.CANVAS_LAYERS)};b.data.canvasContainer=c.createElement("div");var d=b.data.canvasContainer.style;b.data.canvasContainer.style["-webkit-tap-highlight-color"]="rgba(0,0,0,0)";d.position="relative";d.zIndex="0";d.overflow="hidden";d=a.cy.container();d.appendChild(b.data.canvasContainer);d.style["-webkit-tap-highlight-color"]=
"rgba(0,0,0,0)";var e={"-webkit-user-select":"none","-moz-user-select":"-moz-none","user-select":"none","-webkit-tap-highlight-color":"rgba(0,0,0,0)","outline-style":"none"};Gi&&Gi.userAgent.match(/msie|trident|edge/i)&&(e["-ms-touch-action"]="none",e["touch-action"]="none");for(d=0;d<ab.CANVAS_LAYERS;d++){var f=b.data.canvases[d]=c.createElement("canvas"),g=ab.CANVAS_TYPES[d];b.data.contexts[d]=f.getContext(g);b.data.contexts[d]||Ab("Could not create canvas of type "+g);Object.keys(e).forEach(function(aa){f.style[aa]=
e[aa]});f.style.position="absolute";f.setAttribute("data-id","layer"+d);f.style.zIndex=String(ab.CANVAS_LAYERS-d);b.data.canvasContainer.appendChild(f);b.data.canvasNeedsRedraw[d]=!1}b.data.topCanvas=b.data.canvases[0];b.data.canvases[ab.NODE].setAttribute("data-id","layer"+ab.NODE+"-node");b.data.canvases[ab.SELECT_BOX].setAttribute("data-id","layer"+ab.SELECT_BOX+"-selectbox");b.data.canvases[ab.DRAG].setAttribute("data-id","layer"+ab.DRAG+"-drag");b.data.canvases[ab.WEBGL]&&b.data.canvases[ab.WEBGL].setAttribute("data-id",
"layer"+ab.WEBGL+"-webgl");for(d=0;d<ab.BUFFER_COUNT;d++)b.data.bufferCanvases[d]=c.createElement("canvas"),b.data.bufferContexts[d]=b.data.bufferCanvases[d].getContext("2d"),b.data.bufferCanvases[d].style.position="absolute",b.data.bufferCanvases[d].setAttribute("data-id","buffer"+d),b.data.bufferCanvases[d].style.zIndex=String(-d-1),b.data.bufferCanvases[d].style.visibility="hidden";b.pathsEnabled=!0;var h=Vb(),k=function(aa){return{x:-aa.w/2,y:-aa.h/2}};c=function(aa){return aa[0]._private.nodeKey};
d=function(aa){return aa[0]._private.labelStyleKey};g=function(aa){return aa[0]._private.sourceLabelStyleKey};var l=function(aa){return aa[0]._private.targetLabelStyleKey},m=function(aa,na,Ga,Ha,Ma){return b.drawElement(aa,na,Ga,!1,!1,Ma)},n=function(aa,na,Ga,Ha,Ma){return b.drawElementText(aa,na,Ga,Ha,"main",Ma)},p=function(aa,na,Ga,Ha,Ma){return b.drawElementText(aa,na,Ga,Ha,"source",Ma)},q=function(aa,na,Ga,Ha,Ma){return b.drawElementText(aa,na,Ga,Ha,"target",Ma)},t=function(aa){aa.boundingBox();
return aa[0]._private.bodyBounds},u=function(aa){aa.boundingBox();return aa[0]._private.labelBounds.main||h},x=function(aa){aa.boundingBox();return aa[0]._private.labelBounds.source||h},v=function(aa){aa.boundingBox();return aa[0]._private.labelBounds.target||h},w=function(aa,na){return na},C=function(aa){aa=t(aa);return{x:(aa.x1+aa.x2)/2,y:(aa.y1+aa.y2)/2}},y=function(aa,na,Ga){aa=aa?aa+"-":"";return{x:na.x+Ga.pstyle(aa+"text-margin-x").pfValue,y:na.y+Ga.pstyle(aa+"text-margin-y").pfValue}},B=function(aa,
na,Ga){aa=aa[0]._private.rscratch;return{x:aa[na],y:aa[Ga]}},M=function(aa){return y("",B(aa,"labelX","labelY"),aa)},Q=function(aa){return y("source",B(aa,"sourceLabelX","sourceLabelY"),aa)},ja=function(aa){return y("target",B(aa,"targetLabelX","targetLabelY"),aa)},da=function(aa){return k(t(aa))},Da=function(aa){return k(x(aa))},pa=function(aa){return k(v(aa))},ra=function(aa){var na=u(aa),Ga=k(u(aa));if(aa.isNode()){switch(aa.pstyle("text-halign").value){case "left":Ga.x=-na.w-(na.leftPad||0);break;
case "right":Ga.x=-(na.rightPad||0)}switch(aa.pstyle("text-valign").value){case "top":Ga.y=-na.h-(na.topPad||0);break;case "bottom":Ga.y=-(na.botPad||0)}}return Ga},Z=b.data.eleTxrCache=new Ad(b,{getKey:c,doesEleInvalidateKey:function(aa){aa=aa[0]._private;return aa.oldBackgroundTimestamp!==aa.backgroundTimestamp},drawElement:m,getBoundingBox:t,getRotationPoint:C,getRotationOffset:da,allowEdgeTxrCaching:!1,allowParentTxrCaching:!1}),fa=b.data.lblTxrCache=new Ad(b,{getKey:d,drawElement:n,getBoundingBox:u,
getRotationPoint:M,getRotationOffset:ra,isVisible:w}),sa=b.data.slbTxrCache=new Ad(b,{getKey:g,drawElement:p,getBoundingBox:x,getRotationPoint:Q,getRotationOffset:Da,isVisible:w}),Ea=b.data.tlbTxrCache=new Ad(b,{getKey:l,drawElement:q,getBoundingBox:v,getRotationPoint:ja,getRotationOffset:pa,isVisible:w}),ya=b.data.lyrTxrCache=new Hi(b);b.onUpdateEleCalcs(function(aa,na){Z.invalidateElements(na);fa.invalidateElements(na);sa.invalidateElements(na);Ea.invalidateElements(na);ya.invalidateElements(na);
for(aa=0;aa<na.length;aa++){var Ga=na[aa]._private;Ga.oldBackgroundTimestamp=Ga.backgroundTimestamp}});w=function(aa){for(var na=0;na<aa.length;na++)ya.enqueueElementRefinement(aa[na].ele)};Z.onDequeue(w);fa.onDequeue(w);sa.onDequeue(w);Ea.onDequeue(w);a.webgl&&b.initWebgl(a,{getStyleKey:c,getLabelKey:d,getSourceLabelKey:g,getTargetLabelKey:l,drawElement:m,drawLabel:n,drawSourceLabel:p,drawTargetLabel:q,getElementBox:t,getLabelBox:u,getSourceLabelBox:x,getTargetLabelBox:v,getElementRotationPoint:C,
getElementRotationOffset:da,getLabelRotationPoint:M,getSourceLabelRotationPoint:Q,getTargetLabelRotationPoint:ja,getLabelRotationOffset:ra,getSourceLabelRotationOffset:Da,getTargetLabelRotationOffset:pa})}function Ii(a,b,c){var d=c,e=function(t){mb("Can not register `"+b+"` for `"+a+"` since `"+t+"` already exists in the prototype and can not be overridden")};if(a==="core"){if(Bd.prototype[b])return e(b);Bd.prototype[b]=c}else if(a==="collection"){if(Lb.prototype[b])return e(b);Lb.prototype[b]=c}else if(a===
"layout"){e=function(t){this.options=t;c.call(this,t);hb(this._private)||(this._private={});this._private.cy=t.cy;this._private.listeners=[];this.createEmitter()};var f=e.prototype=Object.create(c.prototype),g=[];for(d=0;d<g.length;d++){var h=g[d];f[h]=f[h]||function(){return this}}f.start&&!f.run?f.run=function(){this.start();return this}:!f.start&&f.run&&(f.start=function(){this.run();return this});var k=c.prototype.stop;f.stop=function(){var t=this.options;if(t&&t.animate&&(t=this.animations))for(var u=
0;u<t.length;u++)t[u].stop();k?k.call(this):this.emit("layoutstop");return this};f.destroy||(f.destroy=function(){return this});f.cy=function(){return this._private.cy};var l={addEventFields:function(t,u){u.layout=t;u.cy=t._private.cy;u.target=t},bubble:function(){return!0},parent:function(t){return t._private.cy}};Ra(f,{createEmitter:function(){this._private.emitter=new Rd(l,this);return this},emitter:function(){return this._private.emitter},on:function(t,u){this.emitter().on(t,u);return this},one:function(t,
u){this.emitter().one(t,u);return this},once:function(t,u){this.emitter().one(t,u);return this},removeListener:function(t,u){this.emitter().removeListener(t,u);return this},removeAllListeners:function(){this.emitter().removeAllListeners();return this},emit:function(t,u){this.emitter().emit(t,u);return this}});nb.eventAliasesOn(f);d=e}else if(a==="renderer"&&b!=="null"&&b!=="base"){var m=Ji("renderer","base");d=m.prototype;h=c.prototype;var n=function(){m.apply(this,arguments);c.apply(this,arguments)},
p=n.prototype;for(f in d){var q=d[f];if(h[f]!=null)return e(f);p[f]=q}for(g in h)p[g]=h[g];d.clientFunctions.forEach(function(t){p[t]=p[t]||function(){Ab("Renderer does not implement `renderer."+t+"()` on its prototype")}});d=n}else if(a==="__proto__"||a==="constructor"||a==="prototype")return Ab(a+" is an illegal type to be registered, possibly lead to prototype pollutions");return Ki({map:Li,keys:[a,b],value:d})}function Ji(a,b){return Mi({map:Li,keys:[a,b]})}function wl(a,b,c,d,e){return Ki({map:Ni,
keys:[a,b,c,d],value:e})}function xl(a,b,c,d){return Mi({map:Ni,keys:[a,b,c,d]})}var Gb=typeof window==="undefined"?null:window,Gi=Gb?Gb.navigator:null;Gb?Gb.document:null;var yl=U(""),Oi=U({}),zl=U(function(){}),Al=typeof HTMLElement==="undefined"?"undefined":U(HTMLElement),wc=function(a){return a&&a.instanceString&&zb(a.instanceString)?a.instanceString():null},Qa=function(a){return a!=null&&U(a)==yl},zb=function(a){return a!=null&&U(a)===zl},rb=function(a){return!Yb(a)&&(Array.isArray?Array.isArray(a):
a!=null&&a instanceof Array)},hb=function(a){return a!=null&&U(a)===Oi&&!rb(a)&&a.constructor===Object},Ba=function(a){return a!=null&&U(a)===U(1)&&!isNaN(a)},Bl=function(a){return Ba(a)&&Math.floor(a)===a},Zd=function(a){if("undefined"!==Al)return null!=a&&a instanceof HTMLElement},Yb=function(a){return Cd(a)||Pi(a)},Cd=function(a){return wc(a)==="collection"&&a._private.single},Pi=function(a){return wc(a)==="collection"&&!a._private.single},xc=function(a){return a===void 0||a===null||a===""||a.match(/^\s+$/)?
!0:!1},Cl=function(a){return a!=null&&U(a)===Oi&&zb(a.then)},ed=function(a,b){b||(b=function(){if(arguments.length===1)return arguments[0];if(arguments.length===0)return"undefined";for(var d=[],e=0;e<arguments.length;e++)d.push(arguments[e]);return d.join("$")});var c=function(){var d=arguments,e,f=b.apply(this,d),g=c.cache;(e=g[f])||(e=g[f]=a.apply(this,d));return e};c.cache={};return c},Se=ed(function(a){return a.replace(/([A-Z])/g,function(b){return"-"+b.toLowerCase()})}),$d=ed(function(a){return a.replace(/(-\w)/g,
function(b){return b[1].toUpperCase()})}),Qi=ed(function(a,b){return a+b[0].toUpperCase()+b.substring(1)},function(a,b){return a+"$"+b}),Ri=function(a){return xc(a)?a:a.charAt(0).toUpperCase()+a.substring(1)},Ra=Object.assign!=null?Object.assign.bind(Object):function(a){for(var b=arguments,c=1;c<b.length;c++){var d=b[c];if(d!=null)for(var e=Object.keys(d),f=0;f<e.length;f++){var g=e[f];a[g]=d[g]}}return a},Dl=function(a){function b(h,k,l){l<0&&(l+=1);l>1&&--l;return l<1/6?h+(k-h)*6*l:l<.5?k:l<2/3?
h+(k-h)*(2/3-l)*6:h}if(a=RegExp("^hsl[a]?\\(((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?)))\\s*,\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%])\\s*,\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%])(?:\\s*,\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))))?\\)$").exec(a)){var c=parseInt(a[1]);c<0?c=(360- -1*c%360)%360:c>360&&(c%=360);c/=360;var d=parseFloat(a[2]);if(d<0||d>100)return;d/=100;var e=parseFloat(a[3]);if(e<0||e>100)return;e/=100;a=a[4];if(a!==void 0&&
(a=parseFloat(a),a<0||a>1))return;if(d===0)e=d=c=Math.round(e*255);else{var f=e<.5?e*(1+d):e+d-e*d,g=2*e-f;e=Math.round(255*b(g,f,c+1/3));d=Math.round(255*b(g,f,c));c=Math.round(255*b(g,f,c-1/3))}c=[e,d,c,a]}return c},El=function(a){if(a=RegExp("^rgb[a]?\\(((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%]?)\\s*,\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%]?)\\s*,\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%]?)(?:\\s*,\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))))?\\)$").exec(a)){var b=
[];for(var c=[],d=1;d<=3;d++){var e=a[d];e[e.length-1]==="%"&&(c[d]=!0);e=parseFloat(e);c[d]&&(e=e/100*255);if(e<0||e>255)return;b.push(Math.floor(e))}d=c[1]&&c[2]&&c[3];if((c[1]||c[2]||c[3])&&!d)return;a=a[4];if(a!==void 0){a=parseFloat(a);if(a<0||a>1)return;b.push(a)}}return b},Ai=function(a){var b;if(!(b=(rb(a)?a:null)||Fl[a.toLowerCase()]))if(a.length!==4&&a.length!==7||a[0]!=="#")b=void 0;else{if(a.length===4){b=parseInt(a[1]+a[1],16);var c=parseInt(a[2]+a[2],16);var d=parseInt(a[3]+a[3],16)}else b=
parseInt(a[1]+a[2],16),c=parseInt(a[3]+a[4],16),d=parseInt(a[5]+a[6],16);b=[b,c,d]}return b||El(a)||Dl(a)},Fl={transparent:[0,0,0,0],aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,
149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,
0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,
140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],
lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],
olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,
139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},Ki=function(a){for(var b=a.map,c=a.keys,d=
c.length,e=0;e<d;e++){var f=c[e];if(hb(f))throw Error("Tried to set map with object key");e<c.length-1?(b[f]==null&&(b[f]={}),b=b[f]):b[f]=a.value}},Mi=function(a){var b=a.map;a=a.keys;for(var c=a.length,d=0;d<c;d++){var e=a[d];if(hb(e))throw Error("Tried to get map with object key");b=b[e];if(b==null)break}return b},Pd=typeof globalThis!=="undefined"?globalThis:typeof window!=="undefined"?window:typeof V!=="undefined"?V:typeof self!=="undefined"?self:{},Af,zf,Ef,Df,Cf,Bf,Gf,Ff,If,Hf,Kf,Jf,Mf,Lf,
Of,Nf,Qf,Pf,Sf,Rf,Uf,Tf,Wf,Vf,Yf,Xf,Si,Ti,Gl=function(){if(Ti)return Si;Ti=1;var a=Pa(),b=xa(),c=Sa(),d=Math.max,e=Math.min;return Si=function(f,g,h){function k(Q){var ja=q,da=t;q=t=void 0;w=Q;return u=f.apply(da,ja)}function l(Q){var ja=Q-v;Q-=w;return v===void 0||ja>=g||ja<0||y&&Q>=M}function m(){var Q=b();if(l(Q))return n(Q);var ja=setTimeout;var da=Q-w;Q=g-(Q-v);da=y?e(Q,M-da):Q;x=ja(m,da)}function n(Q){x=void 0;if(B&&q)return k(Q);q=t=void 0;return u}function p(){var Q=b(),ja=l(Q);q=arguments;
t=this;v=Q;if(ja){if(x===void 0)return w=Q=v,x=setTimeout(m,g),C?k(Q):u;if(y)return clearTimeout(x),x=setTimeout(m,g),k(v)}x===void 0&&(x=setTimeout(m,g));return u}var q,t,u,x,v,w=0,C=!1,y=!1,B=!0;if(typeof f!="function")throw new TypeError("Expected a function");g=c(g)||0;if(a(h)){C=!!h.leading;var M=(y="maxWait"in h)?d(c(h.maxWait)||0,g):M;B="trailing"in h?!!h.trailing:B}p.cancel=function(){x!==void 0&&clearTimeout(x);w=0;q=v=t=x=void 0};p.flush=function(){return x===void 0?u:n(b())};return p}}(),
Dd=za(Gl),Te=Gb?Gb.performance:null,lc=Te&&Te.now?function(){return Te.now()}:function(){return Date.now()},ae=function(){if(Gb){if(Gb.requestAnimationFrame)return function(a){Gb.requestAnimationFrame(a)};if(Gb.mozRequestAnimationFrame)return function(a){Gb.mozRequestAnimationFrame(a)};if(Gb.webkitRequestAnimationFrame)return function(a){Gb.webkitRequestAnimationFrame(a)};if(Gb.msRequestAnimationFrame)return function(a){Gb.msRequestAnimationFrame(a)}}return function(a){a&&setTimeout(function(){a(lc())},
1E3/60)}}(),Ui=function(a){for(var b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:9261,c;;){c=a.next();if(c.done)break;b=b*65599+c.value|0}return b},fd=function(a){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:9261)*65599+a|0},gd=function(a){var b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:5381;return(b<<5)+b+a|0},yc=function(a){return a[0]*2097152+a[1]},be=function(a,b){return[fd(a[0],b[0]),gd(a[1],b[1])]},Vi=function(a,b){var c={value:0,done:!1},d=0,e=a.length;
return Ui({next:function(){d<e?c.value=a[d++]:c.done=!0;return c}},b)},Jc=function(a,b){var c={value:0,done:!1},d=0,e=a.length;return Ui({next:function(){d<e?c.value=a.charCodeAt(d++):c.done=!0;return c}},b)},Wi=function(){for(var a=arguments,b,c=0;c<a.length;c++){var d=a[c];b=c===0?Jc(d):Jc(d,b)}return b},Xi=!0,Hl=console.warn!=null,Il=console.trace!=null,Ue=Number.MAX_SAFE_INTEGER||9007199254740991,Yi=function(){return!0},ce=function(){return!1},Zi=function(){return 0},Ve=function(){},Ab=function(a){throw Error(a);
},$i=function(a){if(a!==void 0)Xi=!!a;else return Xi},mb=function(a){$i()&&(Hl?console.warn(a):(console.log(a),Il&&console.trace()))},mc=function(a){return a==null?a:rb(a)?a.slice():hb(a)?Ra({},a):a},aj=function(a,b){for(b=a="";a++<36;b+=a*51&52?(a^15?8^Math.random()*(a^20?16:4):4).toString(16):"-");return b},bj={},Mb=function(a){var b=Object.keys(a);return function(c){for(var d={},e=0;e<b.length;e++){var f=b[e],g=c==null?void 0:c[f];d[f]=g===void 0?a[f]:g}return d}},zc=function(a,b,c){for(c=a.length-
1;c>=0;c--)a[c]===b&&a.splice(c,1)},We=function(a){a.splice(0,a.length)},Jl=function(a,b){for(var c=0;c<b.length;c++)a.push(b[c])},Bb=function(a,b,c){c&&(b=Qi(c,b));return a[b]},qc=function(a,b,c,d){c&&(b=Qi(c,b));a[b]=d},Kl=function(){function a(){N(this,a);this._obj={}}return L(a,[{key:"set",value:function(b,c){this._obj[b]=c;return this}},{key:"delete",value:function(b){this._obj[b]=void 0;return this}},{key:"clear",value:function(){this._obj={}}},{key:"has",value:function(b){return this._obj[b]!==
void 0}},{key:"get",value:function(b){return this._obj[b]}}])}(),rc=typeof Map!=="undefined"?Map:Kl,Ll=function(){function a(b){N(this,a);this._obj=Object.create(null);this.size=0;if(b!=null){b=b.instanceString!=null&&b.instanceString()===this.instanceString()?b.toArray():b;for(var c=0;c<b.length;c++)this.add(b[c])}}return L(a,[{key:"instanceString",value:function(){return"set"}},{key:"add",value:function(b){var c=this._obj;c[b]!==1&&(c[b]=1,this.size++)}},{key:"delete",value:function(b){var c=this._obj;
c[b]===1&&(c[b]=0,this.size--)}},{key:"clear",value:function(){this._obj=Object.create(null)}},{key:"has",value:function(b){return this._obj[b]===1}},{key:"toArray",value:function(){var b=this;return Object.keys(this._obj).filter(function(c){return b.has(c)})}},{key:"forEach",value:function(b,c){return this.toArray().forEach(b,c)}}])}(),Zc=(typeof Set==="undefined"?"undefined":U(Set))!=="undefined"?Set:Ll,de=function(a,b){var c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(a===void 0||
b===void 0||wc(a)!=="core")Ab("An element must have a core reference and parameters set");else{var d=b.group;d==null&&(d=b.data&&b.data.source!=null&&b.data.target!=null?"edges":"nodes");if(d!=="nodes"&&d!=="edges")Ab("An element must be of type `nodes` or `edges`; you specified `"+d+"`");else{this.length=1;this[0]=this;d=this._private={cy:a,single:!0,data:b.data||{},position:b.position||{x:0,y:0},autoWidth:void 0,autoHeight:void 0,autoPadding:void 0,compoundBoundsClean:!1,listeners:[],group:d,style:{},
rstyle:{},styleCxts:[],styleKeys:{},removed:!0,selected:b.selected?!0:!1,selectable:b.selectable===void 0?!0:b.selectable?!0:!1,locked:b.locked?!0:!1,grabbed:!1,grabbable:b.grabbable===void 0?!0:b.grabbable?!0:!1,pannable:b.pannable===void 0?d==="edges"?!0:!1:b.pannable?!0:!1,active:!1,classes:new Zc,animation:{current:[],queue:[]},rscratch:{},scratch:b.scratch||{},edges:[],children:[],parent:b.parent&&b.parent.isNode()?b.parent:null,traversalCache:{},backgrounding:!1,bbCache:null,bbCacheShift:{x:0,
y:0},bodyBounds:null,overlayBounds:null,labelBounds:{all:null,source:null,target:null,main:null},arrowBounds:{source:null,target:null,"mid-source":null,"mid-target":null}};d.position.x==null&&(d.position.x=0);d.position.y==null&&(d.position.y=0);if(b.renderedPosition){var e=b.renderedPosition,f=a.pan(),g=a.zoom();d.position={x:(e.x-f.x)/g,y:(e.y-f.y)/g}}e=[];rb(b.classes)?e=b.classes:Qa(b.classes)&&(e=b.classes.split(/\s+/));f=0;for(g=e.length;f<g;f++){var h=e[f];h&&h!==""&&d.classes.add(h)}this.createEmitter();
(c===void 0||c)&&this.restore();if(c=b.style||b.css)mb("Setting a `style` bypass at element creation should be done only when absolutely necessary.  Try to use the stylesheet instead."),this.style(c)}}},cj=function(a){a={bfs:a.bfs||!a.dfs,dfs:a.dfs||!a.bfs};return function(b,c,d){if(hb(b)&&!Yb(b)){var e=b;b=e.roots||e.root;c=e.visit;d=e.directed}d=arguments.length!==2||zb(c)?d:c;c=zb(c)?c:function(){};e=this._private.cy;var f=b=Qa(b)?this.filter(b):b,g=[],h=[],k={},l={},m={},n=0,p,q=this.byGroup(),
t=q.nodes,u=q.edges;for(q=0;q<f.length;q++){var x=f[q],v=x.id();x.isNode()&&(g.unshift(x),a.bfs&&(m[v]=!0,h.push(x)),l[v]=0)}for(f=function(){var w=a.bfs?g.shift():g.pop(),C=w.id();if(a.dfs){if(m[C])return 0;m[C]=!0;h.push(w)}var y=l[C],B=k[C],M=B!=null?B.source():null,Q=B!=null?B.target():null;M=B==null?void 0:w.same(M)?Q[0]:M[0];y=c(w,B,M,n++,y);if(y===!0)return p=w,1;if(y===!1)return 1;y=w.connectedEdges().filter(function(da){return(!d||da.source().same(w))&&u.has(da)});for(B=0;B<y.length;B++){M=
y[B];Q=M.connectedNodes().filter(function(da){return!da.same(w)&&t.has(da)});var ja=Q.id();Q.length===0||m[ja]||(Q=Q[0],g.push(Q),a.bfs&&(m[ja]=!0,h.push(Q)),k[ja]=M,l[ja]=l[C]+1)}};g.length!==0&&(q=f(),q===0||q!==1););f=e.collection();for(q=0;q<h.length;q++)x=h[q],v=k[x.id()],v!=null&&f.push(v),f.push(x);return{path:e.collection(f),found:e.collection(p)}}},Ed={breadthFirstSearch:cj({bfs:!0}),depthFirstSearch:cj({dfs:!0})};Ed.bfs=Ed.breadthFirstSearch;Ed.dfs=Ed.depthFirstSearch;var ee={exports:{}},
Ml=ee.exports,dj;if(!Nl){var Nl=1;var Ol=function(){if(dj)return ee.exports;dj=1;(function(a,b){(function(){var c=Math.floor;var d=Math.min;var e=function(v,w){return v<w?-1:v>w?1:0};var f=function(v,w,C,y,B){C==null&&(C=0);B==null&&(B=e);if(C<0)throw Error("lo must be non-negative");y==null&&(y=v.length);for(;C<y;){var M=c((C+y)/2);B(w,v[M])<0?y=M:C=M+1}return[].splice.apply(v,[C,C-C].concat(w)),w};var g=function(v,w,C){C==null&&(C=e);v.push(w);return t(v,0,v.length-1,C)};var h=function(v,w){w==
null&&(w=e);var C=v.pop();if(v.length){var y=v[0];v[0]=C;u(v,0,w)}else y=C;return y};var k=function(v,w,C){C==null&&(C=e);var y=v[0];v[0]=w;u(v,0,C);return y};var l=function(v,w,C){C==null&&(C=e);if(v.length&&C(v[0],w)<0){var y=[v[0],w];w=y[0];v[0]=y[1];u(v,0,C)}return w};var m=function(v,w){var C,y;w==null&&(w=e);var B=function(){y=[];for(var da=0,Da=c(v.length/2);0<=Da?da<Da:da>Da;0<=Da?da++:da--)y.push(da);return y}.apply(this).reverse();var M=[];var Q=0;for(C=B.length;Q<C;Q++){var ja=B[Q];M.push(u(v,
ja,w))}return M};var n=function(v,w,C){C==null&&(C=e);w=v.indexOf(w);if(w!==-1)return t(v,0,w,C),u(v,w,C)};var p=function(v,w,C){var y;C==null&&(C=e);var B=v.slice(0,w);if(!B.length)return B;m(B,C);var M=v.slice(w);w=0;for(y=M.length;w<y;w++)v=M[w],l(B,v,C);return B.sort(C).reverse()};var q=function(v,w,C){var y;C==null&&(C=e);if(w*10<=v.length){var B=v.slice(0,w).sort(C);if(!B.length)return B;var M=B[B.length-1];var Q=v.slice(w);w=0;for(y=Q.length;w<y;w++)v=Q[w],C(v,M)<0&&(f(B,v,0,null,C),B.pop(),
M=B[B.length-1]);return B}m(v,C);B=[];M=0;for(w=d(w,v.length);0<=w?M<w:M>w;0<=w?++M:--M)B.push(h(v,C));return B};var t=function(v,w,C,y){var B;y==null&&(y=e);for(B=v[C];C>w;){var M=C-1>>1;var Q=v[M];if(y(B,Q)<0)v[C]=Q,C=M;else break}return v[C]=B};var u=function(v,w,C){var y;C==null&&(C=e);var B=v.length;var M=w;var Q=v[w];for(y=2*w+1;y<B;){var ja=y+1;ja<B&&!(C(v[y],v[ja])<0)&&(y=ja);v[w]=v[y];w=y;y=2*w+1}v[w]=Q;return t(v,M,w,C)};var x=function(){function v(w){this.cmp=w!=null?w:e;this.nodes=[]}
v.push=g;v.pop=h;v.replace=k;v.pushpop=l;v.heapify=m;v.updateItem=n;v.nlargest=p;v.nsmallest=q;v.prototype.push=function(w){return g(this.nodes,w,this.cmp)};v.prototype.pop=function(){return h(this.nodes,this.cmp)};v.prototype.peek=function(){return this.nodes[0]};v.prototype.contains=function(w){return this.nodes.indexOf(w)!==-1};v.prototype.replace=function(w){return k(this.nodes,w,this.cmp)};v.prototype.pushpop=function(w){return l(this.nodes,w,this.cmp)};v.prototype.heapify=function(){return m(this.nodes,
this.cmp)};v.prototype.updateItem=function(w){return n(this.nodes,w,this.cmp)};v.prototype.clear=function(){return this.nodes=[]};v.prototype.empty=function(){return this.nodes.length===0};v.prototype.size=function(){return this.nodes.length};v.prototype.clone=function(){var w=new v;w.nodes=this.nodes.slice(0);return w};v.prototype.toArray=function(){return this.nodes.slice(0)};v.prototype.insert=v.prototype.push;v.prototype.top=v.prototype.peek;v.prototype.front=v.prototype.peek;v.prototype.has=
v.prototype.contains;v.prototype.copy=v.prototype.clone;return v}();(function(v,w){return a.exports=w()})(this,function(){return x})}).call(Ml)})(ee);return ee.exports}()}var Pl=Ol;var Fd=za(Pl),Ql=Mb({root:null,weight:function(a){return 1},directed:!1}),Rl=Mb({root:null,goal:null,weight:function(a){return 1},heuristic:function(a){return 0},directed:!1}),Sl=Mb({weight:function(a){return 1},directed:!1}),Tl=Mb({weight:function(a){return 1},directed:!1,root:null}),Ul=Math.sqrt(2),Xe=function(a,b,c,
d){for(;c>d;){var e=Math.floor(Math.random()*b.length),f=a,g=b;g.length===0&&Ab("Karger-Stein must be run on a connected (sub)graph");b=g[e];e=f[b[1]];b=f[b[2]];for(var h=g.length-1;h>=0;h--){var k=g[h],l=k[1];k=k[2];(f[l]===e&&f[k]===b||f[l]===b&&f[k]===e)&&g.splice(h,1)}for(h=0;h<g.length;h++)l=g[h],l[1]===b?(g[h]=l.slice(),g[h][1]=e):l[2]===b&&(g[h]=l.slice(),g[h][2]=e);for(h=0;h<f.length;h++)f[h]===b&&(f[h]=e);b=g;c--}return b},fe=function(a,b,c){return{x:a.x*b+c.x,y:a.y*b+c.y}},hd=function(a){return{x:a[0],
y:a[1]}},Vl=function(a){for(var b=arguments.length>2&&arguments[2]!==void 0?arguments[2]:a.length,c=Infinity,d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;d<b;d++){var e=a[d];isFinite(e)&&(c=Math.min(e,c))}return c},Wl=function(a){for(var b=arguments.length>2&&arguments[2]!==void 0?arguments[2]:a.length,c=-Infinity,d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;d<b;d++){var e=a[d];isFinite(e)&&(c=Math.max(e,c))}return c},Xl=function(a){for(var b=arguments.length>2&&arguments[2]!==
void 0?arguments[2]:a.length,c=0,d=0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;e<b;e++){var f=a[e];isFinite(f)&&(c+=f,d++)}return c/d},Yl=function(a){var b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:a.length,d=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,e=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0;(arguments.length>3&&arguments[3]!==void 0?arguments[3]:1)?a=a.slice(b,c):(c<a.length&&
a.splice(c,a.length-c),b>0&&a.splice(0,b));b=0;for(c=a.length-1;c>=0;c--){var f=a[c];e?isFinite(f)||(a[c]=-Infinity,b++):a.splice(c,1)}d&&a.sort(function(g,h){return g-h});d=a.length;e=Math.floor(d/2);return d%2!==0?a[e+1+b]:(a[e-1+b]+a[e+b])/2},Ye=Math.log2||function(a){return Math.log(a)/Math.log(2)},Pc=function(a,b){return Math.sqrt(Oc(a,b))},Oc=function(a,b){var c=b.x-a.x;a=b.y-a.y;return c*c+a*a},Zl=function(a){for(var b=a.length,c=0,d=0;d<b;d++)c+=a[d];for(d=0;d<b;d++)a[d]/=c;return a},Hb=function(a,
b,c,d){return(1-d)*(1-d)*a+2*(1-d)*d*b+d*d*c},id=function(a,b,c,d){return{x:Hb(a.x,b.x,c.x,d),y:Hb(a.y,b.y,c.y,d)}},xd=function(a,b,c){return Math.max(a,Math.min(c,b))},Vb=function(a){if(a==null)return{x1:Infinity,y1:Infinity,x2:-Infinity,y2:-Infinity,w:0,h:0};if(a.x1!=null&&a.y1!=null){if(a.x2!=null&&a.y2!=null&&a.x2>=a.x1&&a.y2>=a.y1)return{x1:a.x1,y1:a.y1,x2:a.x2,y2:a.y2,w:a.x2-a.x1,h:a.y2-a.y1};if(a.w!=null&&a.h!=null&&a.w>=0&&a.h>=0)return{x1:a.x1,y1:a.y1,x2:a.x1+a.w,y2:a.y1+a.h,w:a.w,h:a.h}}},
$l=function(a){return{x1:a.x1,x2:a.x2,w:a.w,y1:a.y1,y2:a.y2,h:a.h}},am=function(a){a.x1=Infinity;a.y1=Infinity;a.x2=-Infinity;a.y2=-Infinity;a.w=0;a.h=0},ej=function(a,b){a.x1=Math.min(a.x1,b.x1);a.x2=Math.max(a.x2,b.x2);a.w=a.x2-a.x1;a.y1=Math.min(a.y1,b.y1);a.y2=Math.max(a.y2,b.y2);a.h=a.y2-a.y1},ge=function(a){var b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;a.x1-=b;a.x2+=b;a.y1-=b;a.y2+=b;a.w=a.x2-a.x1;a.h=a.y2-a.y1;return a},he=function(a){var b=arguments.length>1&&arguments[1]!==
void 0?arguments[1]:[0],c,d,e;if(b.length===1)var f=c=d=e=b[0];else b.length===2?(f=d=b[0],e=c=b[1]):b.length===4&&(b=W(b,4),f=b[0],c=b[1],d=b[2],e=b[3]);a.x1-=e;a.x2+=c;a.y1-=f;a.y2+=d;a.w=a.x2-a.x1;a.h=a.y2-a.y1;return a},fj=function(a,b){a.x1=b.x1;a.y1=b.y1;a.x2=b.x2;a.y2=b.y2;a.w=a.x2-a.x1;a.h=a.y2-a.y1},Ze=function(a,b){return a.x1>b.x2||b.x1>a.x2||a.x2<b.x1||b.x2<a.x1||a.y2<b.y1||b.y2<a.y1||a.y1>b.y2||b.y1>a.y2?!1:!0},jd=function(a,b,c){return a.x1<=b&&b<=a.x2&&a.y1<=c&&c<=a.y2},bm=function(a,
b){return jd(a,b.x,b.y)},cm=function(a,b){return jd(a,b.x1,b.y1)&&jd(a,b.x2,b.y2)},gj=function(a,b,c,d,e,f,g){var h=arguments.length>7&&arguments[7]!==void 0?arguments[7]:"auto";h=h==="auto"?Ac(e,f):h;var k=e/2,l=f/2;h=Math.min(h,k,l);var m=h!==k,n=h!==l;if(m){var p=d-l-g;p=Bc(a,b,c,d,c-k+h-g,p,c+k-h+g,p,!1);if(p.length>0)return p}if(n&&(p=c+k+g,p=Bc(a,b,c,d,p,d-l+h-g,p,d+l-h+g,!1),p.length>0)||m&&(m=d+l+g,p=Bc(a,b,c,d,c-k+h-g,m,c+k-h+g,m,!1),p.length>0)||n&&(n=c-k-g,p=Bc(a,b,c,d,n,d-l+h-g,n,d+l-
h+g,!1),p.length>0))return p;m=c-k+h;p=d-l+h;n=Gd(a,b,c,d,m,p,h+g);if(n.length>0&&n[0]<=m&&n[1]<=p)return[n[0],n[1]];m=c+k-h;p=d-l+h;n=Gd(a,b,c,d,m,p,h+g);if(n.length>0&&n[0]>=m&&n[1]<=p)return[n[0],n[1]];m=c+k-h;p=d+l-h;n=Gd(a,b,c,d,m,p,h+g);if(n.length>0&&n[0]>=m&&n[1]>=p)return[n[0],n[1]];k=c-k+h;l=d+l-h;n=Gd(a,b,c,d,k,l,h+g);return n.length>0&&n[0]<=k&&n[1]>=l?[n[0],n[1]]:[]},dm=function(a,b,c,d){c=b*b-4*a*(c-d);if(c<0)return[];c=Math.sqrt(c);a*=2;return[(-b+c)/a,(-b-c)/a]},Wb=function(a,b,c){for(var d,
e,f,g,h=0,k=0;k<c.length/2;k++)if(d=c[k*2],e=c[k*2+1],k+1<c.length/2?(f=c[(k+1)*2],g=c[(k+1)*2+1]):(f=c[(k+1-c.length/2)*2],g=c[(k+1-c.length/2)*2+1]),d!=a||f!=a)if(d>=a&&a>=f||d<=a&&a<=f)d=(a-d)/(f-d)*(g-e)+e,d>b&&h++;return h%2===0?!1:!0},sc=function(a,b,c,d,e,f,g,h,k){var l=Array(c.length);if(h[0]!=null){var m=Math.atan(h[1]/h[0]);m=h[0]<0?m+Math.PI/2:-m-Math.PI/2}else m=h;h=Math.cos(-m);m=Math.sin(-m);for(var n=0;n<l.length/2;n++)l[n*2]=f/2*(c[n*2]*h-c[n*2+1]*m),l[n*2+1]=g/2*(c[n*2+1]*h+c[n*2]*
m),l[n*2]+=d,l[n*2+1]+=e;k>0?(c=ie(l,-k),c=je(c)):c=l;return Wb(a,b,c)},je=function(a){for(var b=Array(a.length/2),c,d,e,f,g,h,k,l,m=0;m<a.length/4;m++)c=a[m*4],d=a[m*4+1],e=a[m*4+2],f=a[m*4+3],m<a.length/4-1?(g=a[(m+1)*4],h=a[(m+1)*4+1],k=a[(m+1)*4+2],l=a[(m+1)*4+3]):(g=a[0],h=a[1],k=a[2],l=a[3]),c=Bc(c,d,e,f,g,h,k,l,!0),b[m*2]=c[0],b[m*2+1]=c[1];return b},ie=function(a,b){for(var c=Array(a.length*2),d,e,f,g,h=0;h<a.length/2;h++){d=a[h*2];e=a[h*2+1];h<a.length/2-1?(f=a[(h+1)*2],g=a[(h+1)*2+1]):(f=
a[0],g=a[1]);var k=g-e,l=-(f-d),m=Math.sqrt(k*k+l*l);k/=m;l/=m;c[h*4]=d+k*b;c[h*4+1]=e+l*b;c[h*4+2]=f+k*b;c[h*4+3]=g+l*b}return c},Qc=function(a,b,c,d,e,f,g){a=(a-e)/(c/2+g);b=(b-f)/(d/2+g);return a*a+b*b<=1},Gd=function(a,b,c,d,e,f,g){c=[c-a,d-b];d=[a-e,b-f];e=c[0]*c[0]+c[1]*c[1];f=2*(d[0]*c[0]+d[1]*c[1]);d=f*f-4*e*(d[0]*d[0]+d[1]*d[1]-g*g);if(d<0)return[];g=(-f+Math.sqrt(d))/(2*e);f=(-f-Math.sqrt(d))/(2*e);e=Math.min(g,f);f=Math.max(g,f);g=[];e>=0&&e<=1&&g.push(e);f>=0&&f<=1&&g.push(f);if(g.length===
0)return[];e=g[0]*c[0]+a;f=g[0]*c[1]+b;return g.length>1?g[0]==g[1]?[e,f]:[e,f,g[1]*c[0]+a,g[1]*c[1]+b]:[e,f]},$e=function(a,b,c){return b<=a&&a<=c||c<=a&&a<=b?a:a<=b&&b<=c||c<=b&&b<=a?b:c},Bc=function(a,b,c,d,e,f,g,h,k){var l=a-e,m=c-a,n=g-e,p=b-f,q=d-b,t=h-f,u=n*p-t*l;l=m*p-q*l;n=t*m-n*q;return n!==0?(c=u/n,d=l/n,-.001<=c&&c<=1.001&&-.001<=d&&d<=1.001?[a+c*m,b+c*q]:k?[a+c*m,b+c*q]:[]):u===0||l===0?$e(a,c,g)===g?[g,h]:$e(a,c,e)===e?[e,f]:$e(e,g,c)===c?[c,d]:[]:[]},Hd=function(a,b,c,d,e,f,g,h){var k=
[],l=Array(c.length),m=!0;f==null&&(m=!1);if(m){for(m=0;m<l.length/2;m++)l[m*2]=c[m*2]*f+d,l[m*2+1]=c[m*2+1]*g+e;h>0?(c=ie(l,-h),c=je(c)):c=l}for(f=0;f<c.length/2;f++)g=c[f*2],h=c[f*2+1],f<c.length/2-1?(l=c[(f+1)*2],m=c[(f+1)*2+1]):(l=c[0],m=c[1]),g=Bc(a,b,d,e,g,h,l,m),g.length!==0&&k.push(g[0],g[1]);return k},em=function(a,b,c,d,e,f,g,h,k){var l=[],m=Array(c.length*2);k.forEach(function(p,q){q===0?(m[m.length-2]=p.startX,m[m.length-1]=p.startY):(m[q*4-2]=p.startX,m[q*4-1]=p.startY);m[q*4]=p.stopX;
m[q*4+1]=p.stopY;n=Gd(a,b,d,e,p.cx,p.cy,p.radius);n.length!==0&&l.push(n[0],n[1])});for(c=0;c<m.length/4;c++){var n=Bc(a,b,d,e,m[c*4],m[c*4+1],m[c*4+2],m[c*4+3],!1);n.length!==0&&l.push(n[0],n[1])}if(l.length>2){c=[l[0],l[1]];f=Math.pow(c[0]-a,2)+Math.pow(c[1]-b,2);for(g=1;g<l.length/2;g++)h=Math.pow(l[g*2]-a,2)+Math.pow(l[g*2+1]-b,2),h<=f&&(c[0]=l[g*2],c[1]=l[g*2+1],f=h);return c}return l},ke=function(a,b,c){a=[a[0]-b[0],a[1]-b[1]];var d=Math.sqrt(a[0]*a[0]+a[1]*a[1]);c=(d-c)/d;c<0&&(c=1E-5);return[b[0]+
c*a[0],b[1]+c*a[1]]},Tb=function(a,b){a=af(a,b);return a=hj(a)},hj=function(a){for(var b,c,d=a.length/2,e=Infinity,f=Infinity,g=-Infinity,h=-Infinity,k=0;k<d;k++)b=a[2*k],c=a[2*k+1],e=Math.min(e,b),g=Math.max(g,b),f=Math.min(f,c),h=Math.max(h,c);k=2/(g-e);for(var l=2/(h-f),m=0;m<d;m++)b=a[2*m]*=k,c=a[2*m+1]*=l,e=Math.min(e,b),g=Math.max(g,b),f=Math.min(f,c),h=Math.max(h,c);if(f<-1)for(b=0;b<d;b++)a[2*b+1]+=-1-f;return a},af=function(a,b){var c=1/a*2*Math.PI,d=a%2===0?Math.PI/2+c/2:Math.PI/2;d+=b;
b=Array(a*2);for(var e,f=0;f<a;f++)e=f*c+d,b[2*f]=Math.cos(e),b[2*f+1]=Math.sin(-e);return b},Ac=function(a,b){return Math.min(a/4,b/4,8)},bf=function(a,b){return{heightOffset:Math.min(15,.05*b),widthOffset:Math.min(100,.25*a),ctrlPtOffsetPct:.05}},fm=Mb({dampingFactor:.8,precision:1E-6,iterations:200,weight:function(a){return 1}}),ij=Mb({root:null,weight:function(a){return 1},directed:!1,alpha:0}),kd={degreeCentralityNormalized:function(a){a=ij(a);var b=this.cy(),c=this.nodes(),d=c.length;if(a.directed){for(var e=
{},f={},g=0,h=0,k=0;k<d;k++){var l=c[k],m=l.id();a.root=l;l=this.degreeCentrality(a);g<l.indegree&&(g=l.indegree);h<l.outdegree&&(h=l.outdegree);e[m]=l.indegree;f[m]=l.outdegree}return{indegree:function(q){if(g==0)return 0;Qa(q)&&(q=b.filter(q));return e[q.id()]/g},outdegree:function(q){if(h===0)return 0;Qa(q)&&(q=b.filter(q));return f[q.id()]/h}}}var n={},p=0;for(k=0;k<d;k++)m=c[k],a.root=m,l=this.degreeCentrality(a),p<l.degree&&(p=l.degree),n[m.id()]=l.degree;return{degree:function(q){if(p===0)return 0;
Qa(q)&&(q=b.filter(q));return n[q.id()]/p}}},degreeCentrality:function(a){a=ij(a);var b=this.cy(),c=this,d=a,e=d.root;a=d.weight;var f=d.directed;d=d.alpha;e=b.collection(e)[0];if(f){f=e.connectedEdges();b=f.filter(function(n){return n.target().same(e)&&c.has(n)});f=f.filter(function(n){return n.source().same(e)&&c.has(n)});for(var g=b.length,h=f.length,k=0,l=0,m=0;m<b.length;m++)k+=a(b[m]);for(b=0;b<f.length;b++)l+=a(f[b]);return{indegree:Math.pow(g,1-d)*Math.pow(k,d),outdegree:Math.pow(h,1-d)*Math.pow(l,
d)}}b=e.connectedEdges().intersection(c);f=b.length;for(h=g=0;h<b.length;h++)g+=a(b[h]);return{degree:Math.pow(f,1-d)*Math.pow(g,d)}}};kd.dc=kd.degreeCentrality;kd.dcn=kd.degreeCentralityNormalised=kd.degreeCentralityNormalized;var jj=Mb({harmonic:!0,weight:function(){return 1},directed:!1,root:null}),ld={closenessCentralityNormalized:function(a){var b=jj(a);a=b.harmonic;var c=b.weight,d=b.directed,e=this.cy(),f={},g=0;b=this.nodes();c=this.floydWarshall({weight:c,directed:d});for(d=0;d<b.length;d++){for(var h=
0,k=b[d],l=0;l<b.length;l++)if(d!==l){var m=c.distance(k,b[l]);h=a?h+1/m:h+m}a||(h=1/h);g<h&&(g=h);f[k.id()]=h}return{closeness:function(n){if(g==0)return 0;n=Qa(n)?e.filter(n)[0].id():n.id();return f[n]/g}}},closenessCentrality:function(a){var b=jj(a);a=b.root;var c=b.weight,d=b.directed;b=b.harmonic;a=this.filter(a)[0];c=this.dijkstra({root:a,weight:c,directed:d});d=0;for(var e=this.nodes(),f=0;f<e.length;f++){var g=e[f];g.same(a)||(g=c.distanceTo(g),d=b?d+1/g:d+g)}return b?d:1/d}};ld.cc=ld.closenessCentrality;
ld.ccn=ld.closenessCentralityNormalised=ld.closenessCentralityNormalized;var gm=Mb({weight:null,directed:!1}),cf={betweennessCentrality:function(a){var b=gm(a);a=b.directed;var c=b.weight,d=c!=null,e=this.cy(),f=this.nodes(),g={},h={},k=0,l={set:function(q,t){h[q]=t;t>k&&(k=t)},get:function(q){return h[q]}};for(b=0;b<f.length;b++){var m=f[b],n=m.id();g[n]=a?m.outgoers().nodes():m.openNeighborhood().nodes();l.set(n,0)}a=function(){for(var q=f[p].id(),t=[],u={},x={},v={},w=new Fd(function(Q,ja){return v[Q]-
v[ja]}),C=0;C<f.length;C++){var y=f[C].id();u[y]=[];x[y]=0;v[y]=Infinity}x[q]=1;v[q]=0;for(w.push(q);!w.empty();)if(q=w.pop(),t.push(q),d)for(C=0;C<g[q].length;C++){y=g[q][C];var B=e.getElementById(q),M=void 0;M=B.edgesTo(y).length>0?B.edgesTo(y)[0]:y.edgesTo(B)[0];B=c(M);y=y.id();v[y]>v[q]+B&&(v[y]=v[q]+B,w.nodes.indexOf(y)<0?w.push(y):w.updateItem(y),x[y]=0,u[y]=[]);v[y]==v[q]+B&&(x[y]+=x[q],u[y].push(q))}else for(C=0;C<g[q].length;C++)y=g[q][C].id(),v[y]==Infinity&&(w.push(y),v[y]=v[q]+1),v[y]==
v[q]+1&&(x[y]+=x[q],u[y].push(q));w={};for(q=0;q<f.length;q++)w[f[q].id()]=0;for(;t.length>0;){q=t.pop();for(C=0;C<u[q].length;C++)y=u[q][C],w[y]+=x[y]/x[q]*(1+w[q]);q!=f[p].id()&&l.set(q,l.get(q)+w[q])}};for(var p=0;p<f.length;p++)a();a={betweenness:function(q){q=e.collection(q).id();return l.get(q)},betweennessNormalized:function(q){if(k==0)return 0;q=e.collection(q).id();return l.get(q)/k}};a.betweennessNormalised=a.betweennessNormalized;return a}};cf.bc=cf.betweennessCentrality;var hm=Mb({expandFactor:2,
inflateFactor:2,multFactor:1,maxIterations:20,attributes:[function(a){return 1}]}),kj=function(a,b){for(var c,d=0;d<b;d++){for(var e=c=0;e<b;e++)c+=a[e*b+d];for(e=0;e<b;e++)a[e*b+d]/=c}},lj=function(a){var b=this.nodes(),c=this.edges(),d=this.cy(),e=hm(a),f={};for(a=0;a<b.length;a++)f[b[a].id()]=a;a=b.length;var g=a*a,h=Array(g),k;for(k=0;k<g;k++)h[k]=0;for(k=0;k<c.length;k++){for(var l=c[k],m=f[l.source().id()],n=f[l.target().id()],p=e.attributes,q=0,t=0;t<p.length;t++)q+=p[t](l);l=q;h[m*a+n]+=l;
h[n*a+m]+=l}c=h;f=e.multFactor;for(k=0;k<a;k++)c[k*a+k]=f;kj(h,a);c=!0;for(f=0;c&&f<e.maxIterations;){c=!1;l=h;h=a;k=e.expandFactor;m=l.slice(0);for(n=1;n<k;n++){p=m;q=h;t=Array(q*q);for(var u=0;u<q;u++){for(var x=0;x<q;x++)t[u*q+x]=0;for(x=0;x<q;x++)for(var v=0;v<q;v++)t[u*q+v]+=l[u*q+x]*p[x*q+v]}l=t}h=k=l;m=a;n=e.inflateFactor;l=Array(m*m);for(p=0;p<m*m;p++)l[p]=Math.pow(h[p],n);kj(l,m);h=l;a:{for(m=0;m<g;m++)if(Math.round(h[m]*1E4)/1E4!==Math.round(k[m]*1E4)/1E4){k=!1;break a}k=!0}k||(c=!0);f++}e=
h;g=[];for(c=0;c<a;c++){f=[];for(h=0;h<a;h++)Math.round(e[c*a+h]*1E3)/1E3>0&&f.push(b[h]);f.length!==0&&g.push(d.collection(f))}b=g;for(d=0;d<b.length;d++)for(a=0;a<b.length;a++){if(e=d!=a)a:{e=b[d];g=b[a];for(c=0;c<e.length;c++)if(!g[c]||e[c].id()!==g[c].id()){e=!1;break a}e=!0}e&&b.splice(a,1)}return b},im={markovClustering:lj,mcl:lj},jm=function(a){return a},mj=function(a,b,c){return a+Math.abs(c-b)},nj=function(a,b,c){return a+Math.pow(c-b,2)},km=function(a){return Math.sqrt(a)},lm=function(a,
b,c){return Math.max(a,Math.abs(c-b))},Id=function(a,b,c,d,e){for(var f=arguments.length>5&&arguments[5]!==void 0?arguments[5]:jm,g=d,h,k,l=0;l<a;l++)h=b(l),k=c(l),g=e(g,h,k);return f(g)},Yc={euclidean:function(a,b,c){return a>=2?Id(a,b,c,0,nj,km):Id(a,b,c,0,mj)},squaredEuclidean:function(a,b,c){return Id(a,b,c,0,nj)},manhattan:function(a,b,c){return Id(a,b,c,0,mj)},max:function(a,b,c){return Id(a,b,c,-Infinity,lm)}};Yc["squared-euclidean"]=Yc.squaredEuclidean;Yc.squaredeuclidean=Yc.squaredEuclidean;
var df=Mb({k:2,m:2,sensitivityThreshold:1E-4,distance:"euclidean",maxIterations:10,attributes:[],testMode:!1,testCentroids:null}),le=function(a,b,c,d,e){return E(a,d.length,e!=="kMedoids"?function(f){return c[f]}:function(f){return d[f](c)},function(f){return d[f](b)},c,b)},ef=function(a,b,c){for(var d=c.length,e=Array(d),f=Array(d),g=Array(b),h=0;h<d;h++)e[h]=a.min(c[h]).value,f[h]=a.max(c[h]).value;for(c=0;c<b;c++){a=[];for(h=0;h<d;h++)a[h]=Math.random()*(f[h]-e[h])+e[h];g[c]=a}return g},oj=function(a,
b,c,d,e){for(var f=Infinity,g=0,h=0;h<b.length;h++){var k=le(c,a,b[h],d,e);k<f&&(f=k,g=h)}return g},pj=function(a,b,c){for(var d=[],e,f=0;f<b.length;f++)e=b[f],c[e.id()]===a&&d.push(e);return d},mm=function(a,b,c){for(var d=0;d<c;d++)if(a===b[d])return!0;return!1},qj=function(a,b){var c=Array(b);if(a.length<50)for(var d=0;d<b;d++){for(var e=a[Math.floor(Math.random()*a.length)];mm(e,c,d);)e=a[Math.floor(Math.random()*a.length)];c[d]=e}else for(d=0;d<b;d++)c[d]=a[Math.floor(Math.random()*a.length)];
return c},rj=function(a,b,c){for(var d=0,e=0;e<b.length;e++)d+=le("manhattan",b[e],a,c,"kMedoids");return d},sj=function(a){var b=this.cy(),c=this.nodes(),d=df(a),e,f;var g=Array(c.length);for(a=0;a<c.length;a++)g[a]=Array(d.k);a=Array(c.length);for(e=0;e<c.length;e++)a[e]=Array(d.k);for(e=0;e<c.length;e++){for(var h=f=0;h<d.k;h++)a[e][h]=Math.random(),f+=a[e][h];for(h=0;h<d.k;h++)a[e][h]/=f}e=Array(d.k);for(f=0;f<d.k;f++)e[f]=Array(d.attributes.length);f=Array(c.length);for(h=0;h<c.length;h++)f[h]=
Array(d.k);h=!0;for(var k=0;h&&k<d.maxIterations;){h=!1;var l,m=e,n=c;var p=a;var q=f,t=d;for(l=0;l<n.length;l++)for(var u=0;u<m.length;u++)q[l][u]=Math.pow(p[l][u],t.m);for(u=0;u<m.length;u++)for(var x=0;x<t.attributes.length;x++){for(var v=p=l=0;v<n.length;v++)l+=q[v][u]*t.attributes[x](n[v]),p+=q[v][u];m[u][x]=l/p}m=a;p=g;n=e;q=c;t=d;for(l=0;l<m.length;l++)p[l]=m[l].slice();x=2/(t.m-1);for(v=0;v<n.length;v++)for(var w=0;w<q.length;w++){for(var C=u=0;C<n.length;C++)l=le(t.distance,q[w],n[v],t.attributes,
"cmeans"),p=le(t.distance,q[w],n[C],t.attributes,"cmeans"),u+=Math.pow(l/p,x);m[w][v]=1/u}a:{for(m=0;m<a.length;m++)for(n=0;n<a[m].length;n++)if(Math.abs(a[m][n]-g[m][n])>d.sensitivityThreshold){m=!1;break a}m=!0}m||(h=!0);k++}d=Array(d.k);for(g=0;g<d.length;g++)d[g]=[];for(f=0;f<a.length;f++){g=-Infinity;e=-1;for(h=0;h<a[0].length;h++)a[f][h]>g&&(g=a[f][h],e=h);d[e].push(c[f])}for(c=0;c<d.length;c++)d[c]=b.collection(d[c]);return{clusters:d,degreeOfMembership:a}},nm={kMeans:function(a){var b=this.cy(),
c=this.nodes(),d=df(a),e=Array(d.k),f={};if(d.testMode)if(typeof d.testCentroids==="number"){d.testCentroids;var g=ef(c,d.k,d.attributes)}else g=U(d.testCentroids)==="object"?d.testCentroids:ef(c,d.k,d.attributes);else g=ef(c,d.k,d.attributes);for(var h=!0,k=0;h&&k<d.maxIterations;){for(h=0;h<c.length;h++)a=c[h],f[a.id()]=oj(a,g,d.distance,d.attributes,"kMeans");h=!1;for(var l=0;l<d.k;l++){var m=pj(l,c,f);if(m.length!==0){for(var n=d.attributes.length,p=g[l],q=Array(n),t=Array(n),u=0;u<n;u++){for(var x=
t[u]=0;x<m.length;x++)a=m[x],t[u]+=d.attributes[u](a);q[u]=t[u]/m.length;Math.abs(p[u]-q[u])<=d.sensitivityThreshold||(h=!0)}g[l]=q;e[l]=b.collection(m)}}k++}return e},kMedoids:function(a){var b=this.cy(),c=this.nodes();a=df(a);var d=Array(a.k),e,f={},g=Array(a.k);a.testMode?typeof a.testCentroids!=="number"&&(e=U(a.testCentroids)==="object"?a.testCentroids:qj(c,a.k)):e=qj(c,a.k);for(var h=!0,k=0;h&&k<a.maxIterations;){for(h=0;h<c.length;h++){var l=c[h];f[l.id()]=oj(l,e,a.distance,a.attributes,"kMedoids")}h=
!1;for(var m=0;m<e.length;m++){var n=pj(m,c,f);if(n.length!==0){g[m]=rj(e[m],n,a.attributes);for(var p=0;p<n.length;p++)l=rj(n[p],n,a.attributes),l<g[m]&&(g[m]=l,e[m]=n[p],h=!0);d[m]=b.collection(n)}}k++}return d},fuzzyCMeans:sj,fcm:sj},om=Mb({distance:"euclidean",linkage:"min",mode:"threshold",threshold:Infinity,addDendrogram:!1,dendrogramDepth:0,attributes:[]}),pm={single:"min",complete:"max"},qm=function(a){a=om(a);var b=pm[a.linkage];b!=null&&(a.linkage=b);return a},tj=function(a,b,c,d,e){for(var f=
0,g=Infinity,h=e.attributes,k=function(p,q){return E(e.distance,h.length,function(t){return h[t](p)},function(t){return h[t](q)},p,q)},l=0;l<a.length;l++){var m=a[l].key,n=c[m][d[m]];n<g&&(f=m,g=n)}if(e.mode==="threshold"&&g>=e.threshold||e.mode==="dendrogram"&&a.length===1)return!1;g=b[f];f=b[d[f]];l=e.mode==="dendrogram"?{left:g,right:f,key:g.key}:{value:g.value.concat(f.value),key:g.key};a[g.index]=l;a.splice(f.index,1);b[g.key]=l;for(l=0;l<a.length;l++)m=a[l],g.key===m.key?b=Infinity:e.linkage===
"min"?(b=c[g.key][m.key],c[g.key][m.key]>c[f.key][m.key]&&(b=c[f.key][m.key])):e.linkage==="max"?(b=c[g.key][m.key],c[g.key][m.key]<c[f.key][m.key]&&(b=c[f.key][m.key])):b=e.linkage==="mean"?(c[g.key][m.key]*g.size+c[f.key][m.key]*f.size)/(g.size+f.size):e.mode==="dendrogram"?k(m.value,g.value):k(m.value[0],g.value[0]),c[g.key][m.key]=c[m.key][g.key]=b;for(k=0;k<a.length;k++){b=a[k].key;if(d[b]===g.key||d[b]===f.key){l=b;for(m=0;m<a.length;m++)n=a[m].key,c[b][n]<c[b][l]&&(l=n);d[b]=l}a[k].index=k}g.key=
f.key=g.index=f.index=null;return!0},md=function(a,b,c){a&&(a.value?b.push(a.value):(a.left&&md(a.left,b),a.right&&md(a.right,b)))},ff=function(a,b){if(!a)return"";if(a.left&&a.right){var c=ff(a.left,b);a=ff(a.right,b);var d=b.add({group:"nodes",data:{id:c+","+a}});b.add({group:"edges",data:{source:c,target:d.id()}});b.add({group:"edges",data:{source:a,target:d.id()}});return d.id()}if(a.value)return a.value.id()},gf=function(a,b,c){if(!a)return[];var d=[],e=[];if(b===0)return a.left&&md(a.left,d),
a.right&&md(a.right,e),a=d.concat(e),[c.collection(a)];if(b===1){if(a.value)return[c.collection(a.value)];a.left&&md(a.left,d);a.right&&md(a.right,e);return[c.collection(d),c.collection(e)]}if(a.value)return[c.collection(a.value)];a.left&&(d=gf(a.left,b-1,c));a.right&&(e=gf(a.right,b-1,c));return d.concat(e)},uj=function(a){var b=this.cy(),c=this.nodes(),d=qm(a),e=d.attributes,f=function(p,q){return E(d.distance,e.length,function(t){return e[t](p)},function(t){return e[t](q)},p,q)};a=[];for(var g=
[],h=[],k=[],l=0;l<c.length;l++){var m={value:d.mode==="dendrogram"?c[l]:[c[l]],key:l,index:l};a[l]=m;k[l]=m;g[l]=[];h[l]=0}for(c=0;c<a.length;c++)for(l=0;l<=c;l++)m=void 0,m=d.mode==="dendrogram"?c===l?Infinity:f(a[c].value,a[l].value):c===l?Infinity:f(a[c].value[0],a[l].value[0]),g[c][l]=m,g[l][c]=m,m<g[c][h[c]]&&(h[c]=l);for(f=tj(a,k,g,h,d);f;)f=tj(a,k,g,h,d);if(d.mode==="dendrogram"){var n=gf(a[0],d.dendrogramDepth,b);d.addDendrogram&&ff(a[0],b)}else n=Array(a.length),a.forEach(function(p,q){p.key=
p.index=null;n[q]=b.collection(p.value)});return n},rm={hierarchicalClustering:uj,hca:uj},sm=Mb({distance:"euclidean",preference:"median",damping:.8,maxIterations:1E3,minIterations:100,attributes:[]}),tm=function(a){var b=a.damping,c=a.preference;.5<=b&&b<1||Ab("Damping must range on [0.5, 1).  Got: ".concat(b));b=["median","mean","min","max"];b.some(function(d){return d===c})||Ba(c)||Ab("Preference must be one of [".concat(b.map(function(d){return"'".concat(d,"'")}).join(", "),"] or a number.  Got: ").concat(c));
return sm(a)},um=function(a,b,c,d){return-E(a,d.length,function(e){return d[e](b)},function(e){return d[e](c)},b,c)},vj=function(a,b,c){for(var d=[],e=0;e<a;e++){for(var f=-1,g=-Infinity,h=0;h<c.length;h++){var k=c[h];b[e*a+k]>g&&(f=k,g=b[e*a+k])}f>0&&d.push(f)}for(a=0;a<c.length;a++)d[c[a]]=c[a];return d},wj=function(a){var b=this.cy(),c=this.nodes(),d=tm(a);a={};for(var e=0;e<c.length;e++)a[c[e].id()]=e;var f,g;e=c.length;var h=e*e;var k=Array(h);for(f=0;f<h;f++)k[f]=-Infinity;for(f=0;f<e;f++)for(g=
0;g<e;g++)f!==g&&(k[f*e+g]=um(d.distance,c[f],c[g],d.attributes));f=d.preference;f=f==="median"?Yl(k):f==="mean"?Xl(k):f==="min"?Vl(k):f==="max"?Wl(k):f;for(g=0;g<e;g++)k[g*e+g]=f;f=Array(h);for(g=0;g<h;g++)f[g]=0;g=Array(h);for(var l=0;l<h;l++)g[l]=0;h=Array(e);l=Array(e);for(var m=Array(e),n=0;n<e;n++)h[n]=0,l[n]=0,m[n]=0;n=Array(e*d.minIterations);for(var p=0;p<n.length;p++)n[p]=0;for(p=0;p<d.maxIterations;p++){for(var q=0;q<e;q++){for(var t=-Infinity,u=-Infinity,x=-1,v,w=0;w<e;w++)h[w]=f[q*e+
w],v=g[q*e+w]+k[q*e+w],v>=t?(u=t,t=v,x=w):v>u&&(u=v);for(v=0;v<e;v++)f[q*e+v]=(1-d.damping)*(k[q*e+v]-t)+d.damping*h[v];f[q*e+x]=(1-d.damping)*(k[q*e+x]-u)+d.damping*h[x]}for(q=0;q<e;q++){for(u=t=0;u<e;u++)h[u]=g[u*e+q],l[u]=Math.max(0,f[u*e+q]),t+=l[u];t-=l[q];l[q]=f[q*e+q];t+=l[q];for(u=0;u<e;u++)g[u*e+q]=(1-d.damping)*Math.min(0,t-l[u])+d.damping*h[u];g[q*e+q]=(1-d.damping)*(t-l[q])+d.damping*h[q]}for(t=q=0;t<e;t++)u=g[t*e+t]+f[t*e+t]>0?1:0,n[p%d.minIterations*e+t]=u,q+=u;if(q>0&&(p>=d.minIterations-
1||p==d.maxIterations-1)){for(t=q=0;t<e;t++){for(u=m[t]=0;u<d.minIterations;u++)m[t]+=n[u*e+t];m[t]!==0&&m[t]!==d.minIterations||q++}if(q===e)break}}d=[];for(h=0;h<e;h++)f[h*e+h]+g[h*e+h]>0&&d.push(h);f=vj(e,k,d);for(g=0;g<d.length;g++){h=[];for(l=0;l<f.length;l++)f[l]===d[g]&&h.push(l);l=-1;m=-Infinity;for(n=0;n<h.length;n++){for(q=p=0;q<h.length;q++)p+=k[h[q]*e+h[n]];p>m&&(l=n,m=p)}d[g]=h[l]}k=f=vj(e,k,d);e={};for(f=0;f<d.length;f++)e[d[f]]=[];for(f=0;f<c.length;f++)g=a[c[f].id()],g=k[g],g!=null&&
e[g].push(c[f]);c=Array(d.length);for(a=0;a<d.length;a++)c[a]=b.collection(e[d[a]]);return c},vm={affinityPropagation:wj,ap:wj},wm=Mb({root:void 0,directed:!1}),me=function(){var a=this,b={},c=0,d=0,e=[],f=[],g={},h=function(m,n){for(var p=f.length-1,q=[],t=a.spawn();f[p].x!=m||f[p].y!=n;)q.push(f.pop().edge),p--;q.push(f.pop().edge);q.forEach(function(u){var x=u.connectedNodes().intersection(a);t.merge(u);x.forEach(function(v){var w=v.id(),C=v.connectedEdges().intersection(a);t.merge(v);b[w].cutVertex?
t.merge(C.filter(function(y){return y.isLoop()})):t.merge(C)})});e.push(t)},k=function(m,n,p){m===p&&(d+=1);b[n]={id:c,low:c++,cutVertex:!1};var q=a.getElementById(n).connectedEdges().intersection(a);if(q.size()===0)e.push(a.spawn(a.getElementById(n)));else{var t,u,x,v;q.forEach(function(w){t=w.source().id();u=w.target().id();x=t===n?u:t;x!==p&&(v=w.id(),g[v]||(g[v]=!0,f.push({x:n,y:x,edge:w})),x in b?b[n].low=Math.min(b[n].low,b[x].id):(k(m,x,n),b[n].low=Math.min(b[n].low,b[x].low),b[n].id<=b[x].low&&
(b[n].cutVertex=!0,h(n,x))))})}};a.forEach(function(m){m.isNode()&&(m=m.id(),m in b||(d=0,k(m,m),b[m].cutVertex=d>1))});var l=Object.keys(b).filter(function(m){return b[m].cutVertex}).map(function(m){return a.getElementById(m)});return{cut:a.spawn(l),components:e}},ne=function(){var a=this,b={},c=0,d=[],e=[],f=a.spawn(a),g=function(h){e.push(h);b[h]={index:c,low:c++,explored:!1};a.getElementById(h).connectedEdges().intersection(a).forEach(function(m){m=m.target().id();m!==h&&(m in b||g(m),b[m].explored||
(b[h].low=Math.min(b[h].low,b[m].low)))});if(b[h].index===b[h].low){for(var k=a.spawn();;){var l=e.pop();k.merge(a.getElementById(l));b[l].low=b[h].index;b[l].explored=!0;if(l===h)break}l=k.edgesWith(k);k=k.merge(l);d.push(k);f=f.difference(k)}};a.forEach(function(h){h.isNode()&&(h=h.id(),h in b||g(h))});return{cut:f,components:d}},xj={};[Ed,{dijkstra:function(a){if(!hb(a)){var b=arguments;a={root:b[0],weight:b[1],directed:b[2]}}b=Ql(a);var c=b.root,d=b.directed,e=this,f=b.weight;c=Qa(c)?this.filter(c)[0]:
c[0];var g={},h={},k={};b=this.byGroup();var l=b.nodes,m=b.edges;m.unmergeBy(function(y){return y.isLoop()});b=function(y,B){g[y.id()]=B;n.updateItem(y)};for(var n=new Fd(function(y,B){return g[y.id()]-g[B.id()]}),p=0;p<l.length;p++){var q=l[p];g[q.id()]=q.same(c)?0:Infinity;n.push(q)}for(c=function(y,B){y=(d?y.edgesTo(B):y.edgesWith(B)).intersect(m);B=Infinity;for(var M,Q=0;Q<y.length;Q++){var ja=y[Q],da=f(ja);if(da<B||!M)B=da,M=ja}return{edge:M,dist:B}};n.size()>0;){p=n.pop();q=g[p.id()];var t=
p.id();k[t]=q;if(q!==Infinity){t=p.neighborhood().intersect(l);for(var u=0;u<t.length;u++){var x=t[u],v=x.id(),w=c(p,x),C=q+w.dist;C<g[x.id()]&&(b(x,C),h[v]={node:p,edge:w.edge})}}}return{distanceTo:function(y){y=Qa(y)?l.filter(y)[0]:y[0];return k[y.id()]},pathTo:function(y){var B=Qa(y)?l.filter(y)[0]:y[0];y=[];var M=B.id();if(B.length>0)for(y.unshift(B);h[M];)B=h[M],y.unshift(B.edge),y.unshift(B.node),B=B.node,M=B.id();return e.spawn(y)}}}},{kruskal:function(a){a=a||function(n){return 1};var b=this.byGroup(),
c=b.nodes,d=b.edges,e=c.length,f=Array(e);b=function(n){for(var p=0;p<f.length;p++)if(f[p].has(n))return p};for(var g=0;g<e;g++)f[g]=this.spawn(c[g]);d=d.sort(function(n,p){return a(n)-a(p)});for(e=0;e<d.length;e++){g=d[e];var h=g.source()[0],k=g.target()[0];h=b(h);k=b(k);var l=f[h],m=f[k];h!==k&&(c.merge(g),l.merge(m),f.splice(k,1))}return c}},{aStar:function(a){var b=this.cy();a=Rl(a);var c=a.root,d=a.goal,e=a.heuristic,f=a.directed,g=a.weight;c=b.collection(c)[0];d=b.collection(d)[0];var h=c.id(),
k=d.id();b={};var l={},m={},n=new Fd(function(M,Q){return l[M.id()]-l[Q.id()]}),p=new Zc;a={};var q={},t=function(M,Q){n.push(M);p.add(Q)};t(c,h);b[h]=0;l[h]=e(c);for(h=0;n.size()>0;){var u=n.pop();c=u.id();p["delete"](c);h++;if(c===k){e=[];f=k;for(k=q[f];;){e.unshift(d);k!=null&&e.unshift(k);d=a[f];if(d==null)break;f=d.id();k=q[f]}return{found:!0,distance:b[c],path:this.spawn(e),steps:h}}m[c]=!0;for(var x=u._private.edges,v=0;v<x.length;v++){var w=x[v];if(this.hasElementWithId(w.id())&&(!f||w.data("source")===
c)){var C=w.source(),y=w.target();C=C.id()!==c?C:y;y=C.id();if(this.hasElementWithId(y)&&!m[y]){var B=b[c]+g(w);p.has(y)?B<b[y]&&(b[y]=B,l[y]=B+e(C),a[y]=u,q[y]=w):(b[y]=B,l[y]=B+e(C),t(C,y),a[y]=u,q[y]=w)}}}}return{found:!1,distance:void 0,path:void 0,steps:h}}},{floydWarshall:function(a){var b=this.cy(),c=Sl(a);a=c.directed;c=c.weight;var d=this.byGroup(),e=d.nodes;d=d.edges;for(var f=e.length,g=f*f,h=function(v){return e.indexOf(v)},k=Array(g),l=0;l<g;l++){var m=l%f;k[l]=(l-m)/f===m?0:Infinity}var n=
Array(g),p=Array(g);for(g=0;g<d.length;g++){l=d[g];m=l.source()[0];var q=l.target()[0];if(m!==q){m=h(m);var t=h(q),u=m*f+t;q=c(l);k[u]>q&&(k[u]=q,n[u]=t,p[u]=l);a||(t=t*f+m,!a&&k[t]>q&&(k[t]=q,n[t]=m,p[t]=l))}}for(a=0;a<f;a++)for(c=0;c<f;c++)for(d=c*f+a,g=0;g<f;g++)l=c*f+g,m=a*f+g,k[d]+k[m]<k[l]&&(k[l]=k[d]+k[m],n[l]=n[d]);var x=function(v){return(Qa(v)?b.filter(v):v)[0]};return{distance:function(v,w){v=h(x(v));w=h(x(w));return k[v*f+w]},path:function(v,w){v=h(x(v));w=h(x(w));var C=e[v];if(v===w)return C.collection();
if(n[v*f+w]==null)return b.collection();var y=b.collection();for(y.merge(C);v!==w;)C=v,v=n[v*f+w],C=p[C*f+v],y.merge(C),y.merge(e[v]);return y}}}},{bellmanFord:function(a){var b=this,c=Tl(a),d=c.directed,e=c.root;c=c.weight;var f=this,g=this.cy(),h=this.byGroup(),k=h.edges,l=h.nodes,m=l.length,n=new rc;h=!1;var p=[];e=g.collection(e)[0];k.unmergeBy(function(da){return da.isLoop()});for(var q=k.length,t=function(da){var Da=n.get(da.id());Da||(Da={},n.set(da.id(),Da));return Da},u=function(da){return(Qa(da)?
g.$(da):da)[0]},x=0;x<m;x++){var v=l[x],w=t(v);v.same(e)?w.dist=0:w.dist=Infinity;w.pred=null;w.edge=null}var C=!1;l=function(da,Da,pa,ra,Z,fa){Da=ra.dist+fa;Da<Z.dist&&!pa.same(ra.edge)&&(Z.dist=Da,Z.pred=da,Z.edge=pa,C=!0)};for(x=1;x<m;x++){C=!1;for(v=0;v<q;v++){w=k[v];var y=w.source(),B=w.target(),M=c(w),Q=t(y),ja=t(B);l(y,B,w,Q,ja,M);d||l(B,y,w,ja,Q,M)}if(!C)break}if(C)for(m=[],l=0;l<q;l++)if(x=k[l],v=x.source(),w=x.target(),y=c(x),B=t(v).dist,M=t(w).dist,B+y<M||!d&&M+y<B)if(h||(mb("Graph contains a negative weight cycle for Bellman-Ford"),
h=!0),a.findNegativeWeightCycles!==!1)for(x=[],B+y<M&&x.push(v),!d&&M+y<B&&x.push(w),v=x.length,w=0;w<v;w++){B=x[w];y=[B];y.push(t(B).edge);for(B=t(B).pred;y.indexOf(B)===-1;)y.push(B),y.push(t(B).edge),B=t(B).pred;y=y.slice(y.indexOf(B));B=y[0].id();M=0;for(Q=2;Q<y.length;Q+=2)y[Q].id()<B&&(B=y[Q].id(),M=Q);y=y.slice(M).concat(y.slice(0,M));y.push(y[0]);B=y.map(function(da){return da.id()}).join(",");m.indexOf(B)===-1&&(p.push(f.spawn(y)),m.push(B))}else break;return{distanceTo:function(da){return t(u(da)).dist},
pathTo:function(da){for(var Da=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e,pa=[],ra=u(da);;){if(ra==null)return b.spawn();var Z=t(ra),fa=Z.edge;Z=Z.pred;pa.unshift(ra[0]);if(ra.same(Da)&&pa.length>0)break;fa!=null&&pa.unshift(fa);ra=Z}return f.spawn(pa)},hasNegativeWeightCycle:h,negativeWeightCycles:p}}},{kargerStein:function(){var a=this,b=this.byGroup(),c=b.nodes,d=b.edges;d.unmergeBy(function(v){return v.isLoop()});var e=c.length;b=d.length;var f=Math.ceil(Math.pow(Math.log(e)/Math.LN2,
2)),g=Math.floor(e/Ul);if(e<2)Ab("At least 2 nodes are required for Karger-Stein algorithm");else{for(var h=[],k=0;k<b;k++){var l=d[k];h.push([k,c.indexOf(l.source()),c.indexOf(l.target())])}k=Infinity;l=[];b=Array(e);for(var m=Array(e),n=Array(e),p=function(v,w){for(var C=0;C<e;C++)w[C]=v[C]},q=0;q<=f;q++){for(var t=0;t<e;t++)m[t]=t;var u=Xe(m,h.slice(),e,g);t=u.slice();p(m,n);u=Xe(m,u,g,2);t=Xe(n,t,g,2);u.length<=t.length&&u.length<k?(k=u.length,l=u,p(m,b)):t.length<=u.length&&t.length<k&&(k=t.length,
l=t,p(n,b))}var x=this.spawn(l.map(function(v){return d[v[0]]}));f=this.spawn();g=this.spawn();h=b[0];for(k=0;k<b.length;k++)l=c[k],b[k]===h?f.merge(l):g.merge(l);c=function(v){var w=a.spawn();v.forEach(function(C){w.merge(C);C.connectedEdges().forEach(function(y){a.contains(y)&&!x.contains(y)&&w.merge(y)})});return w};c=[c(f),c(g)];return{cut:x,components:c,partition1:f,partition2:g}}}},{pageRank:function(a){var b=fm(a),c=b.dampingFactor;a=b.precision;var d=b.iterations,e=b.weight,f=this._private.cy;
b=this.byGroup();var g=b.nodes,h=b.edges;b=g.length;var k=h.length,l=Array(b*b),m=Array(b);c=(1-c)/b;for(var n=0;n<b;n++){for(var p=0;p<b;p++)l[n*b+p]=0;m[n]=0}for(n=0;n<k;n++){p=h[n];var q=p.data("source"),t=p.data("target");q!==t&&(q=g.indexOfId(q),t=g.indexOfId(t),p=e(p),l[t*b+q]+=p,m[q]+=p)}e=1/b+c;for(h=0;h<b;h++)if(m[h]===0)for(k=0;k<b;k++)l[k*b+h]=e;else for(k=0;k<b;k++)n=k*b+h,l[n]=l[n]/m[h]+c;var u=Array(b);m=Array(b);for(c=0;c<b;c++)u[c]=1;for(c=0;c<d;c++){for(e=0;e<b;e++)m[e]=0;for(e=0;e<
b;e++)for(h=0;h<b;h++)m[e]+=l[e*b+h]*u[h];Zl(m);e=u;u=m;m=e;for(k=h=0;k<b;k++)n=e[k]-u[k],h+=n*n;if(h<a)break}return{rank:function(x){x=f.collection(x)[0];return u[g.indexOf(x)]}}}},kd,ld,cf,im,nm,rm,vm,{hierholzer:function(a){if(!hb(a)){var b=arguments;a={root:b[0],directed:b[1]}}b=wm(a);var c=b.root,d=b.directed,e=!1,f,g,h;c&&(h=Qa(c)?this.filter(c)[0].id():c[0].id());var k={},l={};d?this.forEach(function(q){var t=q.id();if(q.isNode()){var u=q.indegree(!0),x=q.outdegree(!0),v=u-x;u=x-u;if(v==1)f?
e=!0:f=t;else if(u==1)g?e=!0:g=t;else if(u>1||v>1)e=!0;k[t]=[];q.outgoers().forEach(function(w){w.isEdge()&&k[t].push(w.id())})}else l[t]=[void 0,q.target().id()]}):this.forEach(function(q){var t=q.id();q.isNode()?(q.degree(!0)%2&&(f?g?e=!0:g=t:f=t),k[t]=[],q.connectedEdges().forEach(function(u){return k[t].push(u.id())})):l[t]=[q.source().id(),q.target().id()]});b={found:!1,trail:void 0};if(e)return b;if(g&&f)if(d){if(h&&g!=h)return b;h=g}else{if(h&&g!=h&&f!=h)return b;h||(h=g)}else h||(h=this[0].id());
c=function(q){var t=q;q=[q];for(var u,x,v;k[t].length;)u=k[t].shift(),x=l[u][0],v=l[u][1],t!=v?(k[v]=k[v].filter(function(w){return w!=u}),t=v):d||t==x||(k[x]=k[x].filter(function(w){return w!=u}),t=x),q.unshift(u),q.unshift(t);return q};var m=[],n=[];for(n=c(h);n.length!=1;)k[n[0]].length==0?(m.unshift(this.getElementById(n.shift())),m.unshift(this.getElementById(n.shift()))):n=c(n.shift()).concat(n);m.unshift(this.getElementById(n.shift()));for(var p in k)if(k[p].length)return b;b.found=!0;b.trail=
this.spawn(m,!0);return b}},{hopcroftTarjanBiconnected:me,htbc:me,htb:me,hopcroftTarjanBiconnectedComponents:me},{tarjanStronglyConnected:ne,tsc:ne,tscc:ne,tarjanStronglyConnectedComponents:ne}].forEach(function(a){Ra(xj,a)});var ec=function(a){if(!(this instanceof ec))return new ec(a);this.id="Thenable/1.0.7";this.state=0;this.rejectReason=this.fulfillValue=void 0;this.onFulfilled=[];this.onRejected=[];this.proxy={then:this.then.bind(this)};typeof a==="function"&&a.call(this,this.fulfill.bind(this),
this.reject.bind(this))};ec.prototype={fulfill:function(a){return yj(this,1,"fulfillValue",a)},reject:function(a){return yj(this,2,"rejectReason",a)},then:function(a,b){var c=new ec;this.onFulfilled.push(zj(a,c,"fulfill"));this.onRejected.push(zj(b,c,"reject"));Aj(this);return c.proxy}};var yj=function(a,b,c,d){a.state===0&&(a.state=b,a[c]=d,Aj(a));return a},Aj=function(a){a.state===1?Bj(a,"onFulfilled",a.fulfillValue):a.state===2&&Bj(a,"onRejected",a.rejectReason)},Bj=function(a,b,c){if(a[b].length!==
0){var d=a[b];a[b]=[];a=function(){for(var e=0;e<d.length;e++)d[e](c)};typeof setImmediate==="function"?setImmediate(a):setTimeout(a,0)}},zj=function(a,b,c){return function(d){if(typeof a!=="function")b[c].call(b,d);else{try{var e=a(d)}catch(f){b.reject(f);return}Cj(b,e)}}},Cj=function(a,b){if(a===b||a.proxy===b)a.reject(new TypeError("cannot resolve promise with itself"));else{if(U(b)==="object"&&b!==null||typeof b==="function")try{var c=b.then}catch(e){a.reject(e);return}if(typeof c==="function"){var d=
!1;try{c.call(b,function(e){d||(d=!0,e===b?a.reject(new TypeError("circular thenable chain")):Cj(a,e))},function(e){d||(d=!0,a.reject(e))})}catch(e){d||a.reject(e)}}else a.fulfill(b)}};ec.all=function(a){return new ec(function(b,c){for(var d=Array(a.length),e=0,f=0;f<a.length;f++)(function(g){var h=a[g];h!=null&&h.then!=null?h.then(function(k){d[g]=k;e++;e===a.length&&b(d)},function(k){c(k)}):(d[g]=h,e++,e===a.length&&b(d))})(f)})};ec.resolve=function(a){return new ec(function(b,c){b(a)})};ec.reject=
function(a){return new ec(function(b,c){c(a)})};var dd=typeof Promise!=="undefined"?Promise:ec,hf=function(a,b,c){var d=wc(a)==="core",e=!d;b=this._private=Ra({duration:1E3},b,c);b.target=a;b.style=b.style||b.css;b.started=!1;b.playing=!1;b.hooked=!1;b.applying=!1;b.progress=0;b.completes=[];b.frames=[];b.complete&&zb(b.complete)&&b.completes.push(b.complete);e&&(e=a.position(),b.startPosition=b.startPosition||{x:e.x,y:e.y},b.startStyle=b.startStyle||a.cy().style().getAnimationStartStyle(a,b.style));
d&&(d=a.pan(),b.startPan={x:d.x,y:d.y},b.startZoom=a.zoom());this.length=1;this[0]=this},Rc=hf.prototype;Ra(Rc,{instanceString:function(){return"animation"},hook:function(){var a=this._private;if(!a.hooked){var b=a.target._private.animation;(a.queue?b.queue:b.current).push(this);Yb(a.target)&&a.target.cy().addToAnimationPool(a.target);a.hooked=!0}return this},play:function(){var a=this._private;a.progress===1&&(a.progress=0);a.playing=!0;a.started=!1;a.stopped=!1;this.hook();return this},playing:function(){return this._private.playing},
apply:function(){var a=this._private;a.applying=!0;a.started=!1;a.stopped=!1;this.hook();return this},applying:function(){return this._private.applying},pause:function(){var a=this._private;a.playing=!1;a.started=!1;return this},stop:function(){var a=this._private;a.playing=!1;a.started=!1;a.stopped=!0;return this},rewind:function(){return this.progress(0)},fastforward:function(){return this.progress(1)},time:function(a){var b=this._private;return a===void 0?b.progress*b.duration:this.progress(a/
b.duration)},progress:function(a){var b=this._private,c=b.playing;if(a===void 0)return b.progress;c&&this.pause();b.progress=a;b.started=!1;c&&this.play();return this},completed:function(){return this._private.progress===1},reverse:function(){var a=this._private,b=a.playing;b&&this.pause();a.progress=1-a.progress;a.started=!1;var c=function(g,h){var k=a[g];k!=null&&(a[g]=a[h],a[h]=k)};c("zoom","startZoom");c("pan","startPan");c("position","startPosition");if(a.style)for(c=0;c<a.style.length;c++){var d=
a.style[c],e=d.name,f=a.startStyle[e];a.startStyle[e]=d;a.style[c]=f}b&&this.play();return this},promise:function(a){var b=this._private;switch(a){case "frame":var c=b.frames;break;default:case "complete":case "completed":c=b.completes}return new dd(function(d,e){c.push(function(){d()})})}});Rc.complete=Rc.completed;Rc.run=Rc.play;Rc.running=Rc.playing;var $f,Zf,bg,ag,dg,cg,hg,gg,fg,eg,jg,ig,lg,kg,ng,mg,pg,og,rg,qg,tg,sg,vg,ug,xg,wg,zg,yg,Bg,Ag,Dg,Cg,Fg,Eg,Hg,Gg,Jg,Ig,Lg,Kg,Ng,Mg,Pg,Og,Rg,Qg,Tg,Sg,
Vg,Ug,Xg,Wg,Zg,Yg,ah,$g,ch,bh,eh,dh,gh,fh,ih,hh,kh,jh,mh,lh,oh,nh,rh,qh,uh,th,wh,vh,zh,yh,Ch,Bh,Eh,Dh,Gh,Fh,Dj,Ej,xm=function(){if(Ej)return Dj;Ej=1;var a=Jk();return Dj=function(b,c,d){b=b==null?void 0:a(b,c);return b===void 0?d:b}}(),ym=za(xm),Ih,Hh,Kh,Jh,Mh,Lh,Oh,Nh,Qh,Ph,Fj,Gj,zm=function(){if(Gj)return Fj;Gj=1;var a=Ok();return Fj=function(b,c,d){return b==null?b:a(b,c,d)}}(),Am=za(zm),Sh,Rh,Hj,Ij,Bm=function(){if(Ij)return Hj;Ij=1;var a=sh(),b=Pk(),c=Y(),d=La(),e=ph(),f=Ce(),g=xh();return Hj=
function(h){return c(h)?a(h,f):d(h)?[h]:b(e(g(h)))}}(),Cm=za(Bm),nb={};[{animated:function(){return function(){var a=this.length!==void 0?this:[this];if(!(this._private.cy||this).styleEnabled())return!1;if(a=a[0])return a._private.animation.current.length>0}},clearQueue:function(){return function(){var a=this.length!==void 0?this:[this];if(!(this._private.cy||this).styleEnabled())return this;for(var b=0;b<a.length;b++)a[b]._private.animation.queue=[];return this}},delay:function(){return function(a,
b){return(this._private.cy||this).styleEnabled()?this.animate({delay:a,duration:a,complete:b}):this}},delayAnimation:function(){return function(a,b){return(this._private.cy||this).styleEnabled()?this.animation({delay:a,duration:a,complete:b}):this}},animation:function(){return function(a,b){var c=this.length!==void 0,d=c?this:[this],e=this._private.cy||this;c=!c;var f=!c;if(!e.styleEnabled())return this;var g=e.style();a=Ra({},a,b);if(Object.keys(a).length===0)return new hf(d[0],a);a.duration===void 0&&
(a.duration=400);switch(a.duration){case "slow":a.duration=600;break;case "fast":a.duration=200}f&&(a.style=g.getPropsList(a.style||a.css),a.css=void 0);f&&a.renderedPosition!=null&&(b=a.renderedPosition,f=e.pan(),g=e.zoom(),a.position={x:(b.x-f.x)/g,y:(b.y-f.y)/g});c&&a.panBy!=null&&(b=a.panBy,f=e.pan(),a.pan={x:f.x+b.x,y:f.y+b.y});b=a.center||a.centre;c&&b!=null&&(b=e.getCenterPan(b.eles,a.zoom),b!=null&&(a.pan=b));c&&a.fit!=null&&(b=a.fit,b=e.getFitViewport(b.eles||b.boundingBox,b.padding),b!=
null&&(a.pan=b.pan,a.zoom=b.zoom));c&&hb(a.zoom)&&(e=e.getZoomedViewport(a.zoom),e!=null?(e.zoomed&&(a.zoom=e.zoom),e.panned&&(a.pan=e.pan)):a.zoom=null);return new hf(d[0],a)}},animate:function(){return function(a,b){var c=this.length!==void 0?this:[this];if(!(this._private.cy||this).styleEnabled())return this;b&&(a=Ra({},a,b));for(b=0;b<c.length;b++){var d=c[b],e=d.animated()&&(a.queue===void 0||a.queue);d.animation(a,e?{queue:!0}:void 0).play()}return this}},stop:function(){return function(a,b){var c=
this.length!==void 0?this:[this],d=this._private.cy||this;if(!d.styleEnabled())return this;for(var e=0;e<c.length;e++){for(var f=c[e]._private,g=f.animation.current,h=0;h<g.length;h++){var k=g[h]._private;b&&(k.duration=0)}a&&(f.animation.queue=[]);b||(f.animation.current=[])}d.notify("draw");return this}}},{data:function(a){a=Ra({},{field:"data",bindingEvent:"data",allowBinding:!1,allowSetting:!1,allowGetting:!1,settingEvent:"data",settingTriggersEvent:!1,triggerFnName:"trigger",immutableKeys:{},
updateStyle:!1,beforeGet:function(b){},beforeSet:function(b,c){},onSet:function(b){},canSet:function(b){return!0}},a);return function(b,c){var d=a,e=this.length!==void 0,f=e?this:[this];e=e?this[0]:this;if(Qa(b)){var g=b.indexOf(".")!==-1&&Cm(b);if(d.allowGetting&&c===void 0){if(e){d.beforeGet(e);var h=g&&e._private[d.field][b]===void 0?ym(e._private[d.field],g):e._private[d.field][b]}return h}if(d.allowSetting&&c!==void 0&&!d.immutableKeys[b]){h=H({},b,c);d.beforeSet(this,h);h=0;for(var k=f.length;h<
k;h++){var l=f[h];d.canSet(l)&&(g&&e._private[d.field][b]===void 0?Am(l._private[d.field],g,c):l._private[d.field][b]=c)}d.updateStyle&&this.updateStyle();d.onSet(this);if(d.settingTriggersEvent)this[d.triggerFnName](d.settingEvent)}}else if(d.allowSetting&&hb(b)){g=Object.keys(b);d.beforeSet(this,b);for(h=0;h<g.length;h++)if(c=g[h],e=b[c],!d.immutableKeys[c])for(k=0;k<f.length;k++)l=f[k],d.canSet(l)&&(l._private[d.field][c]=e);d.updateStyle&&this.updateStyle();d.onSet(this);if(d.settingTriggersEvent)this[d.triggerFnName](d.settingEvent)}else if(d.allowBinding&&
zb(b))this.on(d.bindingEvent,b);else if(d.allowGetting&&b===void 0)return e&&(d.beforeGet(e),g=e._private[d.field]),g;return this}},removeData:function(a){a=Ra({},{field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!1,immutableKeys:{}},a);return function(b){var c=a,d=this.length!==void 0?this:[this];if(Qa(b)){b=b.split(/\s+/);for(var e=b.length,f=0;f<e;f++){var g=b[f];if(!xc(g)&&!c.immutableKeys[g])for(var h=0,k=d.length;h<k;h++)d[h]._private[c.field][g]=void 0}if(c.triggerEvent)this[c.triggerFnName](c.event)}else if(b===
void 0){b=0;for(e=d.length;b<e;b++)for(f=d[b]._private[c.field],g=Object.keys(f),h=0;h<g.length;h++)k=g[h],c.immutableKeys[k]||(f[k]=void 0);if(c.triggerEvent)this[c.triggerFnName](c.event)}return this}}},{eventAliasesOn:function(a){a.addListener=a.listen=a.bind=a.on;a.unlisten=a.unbind=a.off=a.removeListener;a.trigger=a.emit;a.pon=a.promiseOn=function(b,c){var d=this,e=Array.prototype.slice.call(arguments,0);return new dd(function(f,g){g=e.concat([function(k){d.off.apply(d,h);f(k)}]);var h=g.concat([]);
d.on.apply(d,g)})}}}].forEach(function(a){Ra(nb,a)});var Dm={animate:nb.animate(),animation:nb.animation(),animated:nb.animated(),clearQueue:nb.clearQueue(),delay:nb.delay(),delayAnimation:nb.delayAnimation(),stop:nb.stop()},oe={classes:function(a){if(a===void 0){var b=[];this[0]._private.classes.forEach(function(m){return b.push(m)});return b}rb(a)||(a=(a||"").match(/\S+/g)||[]);for(var c=[],d=new Zc(a),e=0;e<this.length;e++){for(var f=this[e],g=f._private,h=g.classes,k=!1,l=0;l<a.length;l++)if(!h.has(a[l])){k=
!0;break}k||(k=h.size!==a.length);k&&(g.classes=d,c.push(f))}c.length>0&&this.spawn(c).updateStyle().emit("class");return this},addClass:function(a){return this.toggleClass(a,!0)},hasClass:function(a){var b=this[0];return b!=null&&b._private.classes.has(a)},toggleClass:function(a,b){rb(a)||(a=a.match(/\S+/g)||[]);for(var c=b===void 0,d=[],e=0,f=this.length;e<f;e++)for(var g=this[e],h=g._private.classes,k=!1,l=0;l<a.length;l++){var m=a[l],n=h.has(m),p=!1;if(b||c&&!n)h.add(m),p=!0;else if(!b||c&&n)h["delete"](m),
p=!0;!k&&p&&(d.push(g),k=!0)}d.length>0&&this.spawn(d).updateStyle().emit("class");return this},removeClass:function(a){return this.toggleClass(a,!1)},flashClass:function(a,b){var c=this;if(b==null)b=250;else if(b===0)return c;c.addClass(a);setTimeout(function(){c.removeClass(a)},b);return c}};oe.className=oe.classNames=oe.classes;var nd="\x3d|\\!\x3d|\x3e|\x3e\x3d|\x3c|\x3c\x3d|\\$\x3d|\\^\x3d|\\*\x3d";(function(){var a;var b=nd.split("|");for(a=0;a<b.length;a++){var c=b[a];nd+="|@"+c}b=nd.split("|");
for(a=0;a<b.length;a++)c=b[a],c.indexOf("!")>=0||c!=="\x3d"&&(nd+="|\\!"+c)})();var qb=function(){return{checks:[]}},jf=[{selector:":selected",matches:function(a){return a.selected()}},{selector:":unselected",matches:function(a){return!a.selected()}},{selector:":selectable",matches:function(a){return a.selectable()}},{selector:":unselectable",matches:function(a){return!a.selectable()}},{selector:":locked",matches:function(a){return a.locked()}},{selector:":unlocked",matches:function(a){return!a.locked()}},
{selector:":visible",matches:function(a){return a.visible()}},{selector:":hidden",matches:function(a){return!a.visible()}},{selector:":transparent",matches:function(a){return a.transparent()}},{selector:":grabbed",matches:function(a){return a.grabbed()}},{selector:":free",matches:function(a){return!a.grabbed()}},{selector:":removed",matches:function(a){return a.removed()}},{selector:":inside",matches:function(a){return!a.removed()}},{selector:":grabbable",matches:function(a){return a.grabbable()}},
{selector:":ungrabbable",matches:function(a){return!a.grabbable()}},{selector:":animated",matches:function(a){return a.animated()}},{selector:":unanimated",matches:function(a){return!a.animated()}},{selector:":parent",matches:function(a){return a.isParent()}},{selector:":childless",matches:function(a){return a.isChildless()}},{selector:":child",matches:function(a){return a.isChild()}},{selector:":orphan",matches:function(a){return a.isOrphan()}},{selector:":nonorphan",matches:function(a){return a.isChild()}},
{selector:":compound",matches:function(a){return a.isNode()?a.isParent():a.source().isParent()||a.target().isParent()}},{selector:":loop",matches:function(a){return a.isLoop()}},{selector:":simple",matches:function(a){return a.isSimple()}},{selector:":active",matches:function(a){return a.active()}},{selector:":inactive",matches:function(a){return!a.active()}},{selector:":backgrounding",matches:function(a){return a.backgrounding()}},{selector:":nonbackgrounding",matches:function(a){return!a.backgrounding()}}].sort(function(a,
b){a=a.selector;b=b.selector;return-1*(a<b?-1:a>b?1:0)}),Em=function(){for(var a={},b,c=0;c<jf.length;c++)b=jf[c],a[b.selector]=b.matches;return a}(),od=function(a){return a.replace(RegExp("\\\\([\\!\\\"\\#\\$\\%\\\x26\\'\\(\\)\\*\\+\\,\\.\\/\\:\\;\\\x3c\\\x3d\\\x3e\\?\\@\\[\\]\\^\\`\\{\\|\\}\\~])","g"),function(b,c){return c})},kf=[{name:"group",query:!0,regex:"(node|edge|\\*)",populate:function(a,b,c){a=W(c,1)[0];b.checks.push({type:0,value:a==="*"?a:a+"s"})}},{name:"state",query:!0,regex:"("+jf.map(function(a){return a.selector}).join("|")+
")",populate:function(a,b,c){a=W(c,1)[0];b.checks.push({type:7,value:a})}},{name:"id",query:!0,regex:"\\#((?:[\\w-.]|(?:\\\\[\\!\\\"\\#\\$\\%\\\x26\\'\\(\\)\\*\\+\\,\\.\\/\\:\\;\\\x3c\\\x3d\\\x3e\\?\\@\\[\\]\\^\\`\\{\\|\\}\\~]))+)",populate:function(a,b,c){a=W(c,1)[0];b.checks.push({type:8,value:od(a)})}},{name:"className",query:!0,regex:"\\.((?:[\\w-]|(?:\\\\[\\!\\\"\\#\\$\\%\\\x26\\'\\(\\)\\*\\+\\,\\.\\/\\:\\;\\\x3c\\\x3d\\\x3e\\?\\@\\[\\]\\^\\`\\{\\|\\}\\~]))+)",populate:function(a,b,c){a=W(c,
1)[0];b.checks.push({type:9,value:od(a)})}},{name:"dataExists",query:!0,regex:"\\[\\s*((?:[\\w-.]|(?:\\\\[\\!\\\"\\#\\$\\%\\\x26\\'\\(\\)\\*\\+\\,\\.\\/\\:\\;\\\x3c\\\x3d\\\x3e\\?\\@\\[\\]\\^\\`\\{\\|\\}\\~]))+)\\s*\\]",populate:function(a,b,c){a=W(c,1)[0];b.checks.push({type:4,field:od(a)})}},{name:"dataCompare",query:!0,regex:"\\[\\s*((?:[\\w-.]|(?:\\\\[\\!\\\"\\#\\$\\%\\\x26\\'\\(\\)\\*\\+\\,\\.\\/\\:\\;\\\x3c\\\x3d\\\x3e\\?\\@\\[\\]\\^\\`\\{\\|\\}\\~]))+)\\s*("+nd+")\\s*(\"(?:\\\\\"|[^\"])*\"|'(?:\\\\'|[^'])*'|(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?)))\\s*\\]",
populate:function(a,b,c){var d=W(c,3);a=d[0];c=d[1];d=d[2];d=RegExp("^\"(?:\\\\\"|[^\"])*\"|'(?:\\\\'|[^'])*'$").exec(d)!=null?d.substring(1,d.length-1):parseFloat(d);b.checks.push({type:3,field:od(a),operator:c,value:d})}},{name:"dataBool",query:!0,regex:"\\[\\s*(\\?|\\!|\\^)\\s*((?:[\\w-.]|(?:\\\\[\\!\\\"\\#\\$\\%\\\x26\\'\\(\\)\\*\\+\\,\\.\\/\\:\\;\\\x3c\\\x3d\\\x3e\\?\\@\\[\\]\\^\\`\\{\\|\\}\\~]))+)\\s*\\]",populate:function(a,b,c){a=W(c,2);c=a[0];b.checks.push({type:5,field:od(a[1]),operator:c})}},
{name:"metaCompare",query:!0,regex:"\\[\\[\\s*(degree|indegree|outdegree)\\s*("+nd+")\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?)))\\s*\\]\\]",populate:function(a,b,c){a=W(c,3);c=a[1];var d=a[2];b.checks.push({type:6,field:od(a[0]),operator:c,value:parseFloat(d)})}},{name:"nextQuery",separator:!0,regex:"\\s*,\\s*",populate:function(a,b){b=a.currentSubject;var c=a.edgeCount,d=a.compoundCount,e=a[a.length-1];b!=null&&(e.subject=b,a.currentSubject=null);e.edgeCount=c;e.compoundCount=d;a.edgeCount=
0;a.compoundCount=0;return a[a.length++]=qb()}},{name:"directedEdge",separator:!0,regex:"\\s+-\x3e\\s+",populate:function(a,b){if(a.currentSubject==null){var c=qb(),d=qb();c.checks.push({type:11,source:b,target:d});a[a.length-1]=c;a.edgeCount++;return d}c=qb();d=qb();c.checks.push({type:12,source:b,target:d});a[a.length-1]=c;a.edgeCount++;return d}},{name:"undirectedEdge",separator:!0,regex:"\\s+\x3c-\x3e\\s+",populate:function(a,b){if(a.currentSubject==null){var c=qb(),d=qb();c.checks.push({type:10,
nodes:[b,d]});a[a.length-1]=c;a.edgeCount++;return d}c=qb();d=qb();c.checks.push({type:14,node:b,neighbor:d});a[a.length-1]=c;return d}},{name:"child",separator:!0,regex:"\\s+\x3e\\s+",populate:function(a,b){if(a.currentSubject==null){b=qb();var c=qb();b.checks.push({type:15,parent:a[a.length-1],child:c});a[a.length-1]=b;a.compoundCount++;return c}if(a.currentSubject===b){c=qb();var d=a[a.length-1],e=qb(),f=qb(),g=qb(),h=qb();c.checks.push({type:19,left:d,right:e,subject:f});f.checks=b.checks;b.checks=
[{type:20}];h.checks.push({type:20});e.checks.push({type:17,parent:h,child:g});a[a.length-1]=c;a.currentSubject=f;a.compoundCount++;return g}c=qb();d=qb();e=[{type:17,parent:c,child:d}];c.checks=b.checks;b.checks=e;a.compoundCount++;return d}},{name:"descendant",separator:!0,regex:"\\s+",populate:function(a,b){if(a.currentSubject==null){b=qb();var c=qb();b.checks.push({type:16,ancestor:a[a.length-1],descendant:c});a[a.length-1]=b;a.compoundCount++;return c}if(a.currentSubject===b){c=qb();var d=a[a.length-
1],e=qb(),f=qb(),g=qb(),h=qb();c.checks.push({type:19,left:d,right:e,subject:f});f.checks=b.checks;b.checks=[{type:20}];h.checks.push({type:20});e.checks.push({type:18,ancestor:h,descendant:g});a[a.length-1]=c;a.currentSubject=f;a.compoundCount++;return g}c=qb();d=qb();e=[{type:18,ancestor:c,descendant:d}];c.checks=b.checks;b.checks=e;a.compoundCount++;return d}},{name:"subject",modifier:!0,regex:"\\$",populate:function(a,b){if(a.currentSubject!=null&&a.currentSubject!==b)return mb("Redefinition of subject in selector `"+
a.toString()+"`"),!1;a.currentSubject=b;a=a[a.length-1].checks[0];b=a==null?null:a.type;b===11?a.type=13:b===10&&(a.type=14,a.node=a.nodes[1],a.neighbor=a.nodes[0],a.nodes=null)}}];kf.forEach(function(a){return a.regexObj=new RegExp("^"+a.regex)});var Jj=function(a,b,c){var d=Qa(a),e=Ba(a),f=Qa(c),g=!1,h=!1,k=!1;b.indexOf("!")>=0&&(b=b.replace("!",""),h=!0);b.indexOf("@")>=0&&(b=b.replace("@",""),g=!0);if(d||f||g){var l=d||e?""+a:"";var m=""+c}g&&(a=l=l.toLowerCase(),c=m=m.toLowerCase());switch(b){case "*\x3d":b=
l.indexOf(m)>=0;break;case "$\x3d":b=l.indexOf(m,l.length-m.length)>=0;break;case "^\x3d":b=l.indexOf(m)===0;break;case "\x3d":b=a===c;break;case "\x3e":k=!0;b=a>c;break;case "\x3e\x3d":k=!0;b=a>=c;break;case "\x3c":k=!0;b=a<c;break;case "\x3c\x3d":k=!0;b=a<=c;break;default:b=!1}!h||a==null&&k||(b=!b);return b},Db=[],xb=function(a,b){return a.checks.every(function(c){return Db[c.type](c,b)})};Db[0]=function(a,b){a=a.value;return a==="*"||a===b.group()};Db[7]=function(a,b){return Em[a.value](b)};Db[8]=
function(a,b){a=a.value;return b.id()===a};Db[9]=function(a,b){return b.hasClass(a.value)};Db[6]=function(a,b){var c=a.operator,d=a.value;return Jj(b[a.field](),c,d)};Db[3]=function(a,b){var c=a.operator,d=a.value;return Jj(b.data(a.field),c,d)};Db[5]=function(a,b){var c=a.operator;a:{a=b.data(a.field);switch(c){case "?":c=a?!0:!1;break a;case "!":c=a?!1:!0;break a;case "^":c=a===void 0;break a}c=void 0}return c};Db[4]=function(a,b){var c=a.field;a.operator;return b.data(c)!==void 0};Db[10]=function(a,
b){var c=a.nodes[0];a=a.nodes[1];var d=b.source();b=b.target();return xb(c,d)&&xb(a,b)||xb(a,d)&&xb(c,b)};Db[14]=function(a,b){return xb(a.node,b)&&b.neighborhood().some(function(c){return c.isNode()&&xb(a.neighbor,c)})};Db[11]=function(a,b){return xb(a.source,b.source())&&xb(a.target,b.target())};Db[12]=function(a,b){return xb(a.source,b)&&b.outgoers().some(function(c){return c.isNode()&&xb(a.target,c)})};Db[13]=function(a,b){return xb(a.target,b)&&b.incomers().some(function(c){return c.isNode()&&
xb(a.source,c)})};Db[15]=function(a,b){return xb(a.child,b)&&xb(a.parent,b.parent())};Db[17]=function(a,b){return xb(a.parent,b)&&b.children().some(function(c){return xb(a.child,c)})};Db[16]=function(a,b){return xb(a.descendant,b)&&b.ancestors().some(function(c){return xb(a.ancestor,c)})};Db[18]=function(a,b){return xb(a.ancestor,b)&&b.descendants().some(function(c){return xb(a.descendant,c)})};Db[19]=function(a,b){return xb(a.subject,b)&&xb(a.left,b)&&xb(a.right,b)};Db[20]=function(){return!0};Db[1]=
function(a,b){return a.value.has(b)};Db[2]=function(a,b){a=a.value;return a(b)};var Cc=function(a){this.inputText=a;this.currentSubject=null;this.length=this.edgeCount=this.compoundCount=0;a==null||Qa(a)&&a.match(/^\s*$/)||(Yb(a)?this.addQuery({checks:[{type:1,value:a.collection()}]}):zb(a)?this.addQuery({checks:[{type:2,value:a}]}):Qa(a)?this.parse(a)||(this.invalid=!0):Ab("A selector must be created from a string; found "))},Dc=Cc.prototype;[{parse:function(a){var b,c=this.inputText=a,d=this[0]=
qb();this.length=1;var e=c;(c=e.match(/^\s+/))&&(e=e.substring(c[0].length));for(c=e;;){var f=e=void 0;for(b=0;b<kf.length;b++){var g=kf[b],h=c.match(g.regexObj);if(h!=null){e=h;f=g;c=c.substring(h[0].length);break}}b=e;e=c;if(f==null)return mb("The selector `"+a+"`is invalid"),!1;c=b.slice(1);c=f.populate(this,d,c);if(c===!1)return!1;c!=null&&(d=c);c=e;if(c.match(/^\s*$/))break}d=this[this.length-1];this.currentSubject!=null&&(d.subject=this.currentSubject);d.edgeCount=this.edgeCount;d.compoundCount=
this.compoundCount;for(d=0;d<this.length;d++){e=this[d];if(e.compoundCount>0&&e.edgeCount>0)return mb("The selector `"+a+"` is invalid because it uses both a compound selector and an edge selector"),!1;if(e.edgeCount>1)return mb("The selector `"+a+"` is invalid because it uses multiple edge selectors"),!1;e.edgeCount===1&&mb("The selector `"+a+"` is deprecated.  Edge selectors do not take effect on changes to source and target nodes after an edge is added, for performance reasons.  Use a class or data selector on edges instead, updating the class or data of an edge when your app detects a change in source or target nodes.")}return!0},
toString:function(){if(this.toStringCache!=null)return this.toStringCache;for(var a=function(k){return k==null?"":k},b=function(k){return Qa(k)?'"'+k+'"':a(k)},c=function(k){return" "+k+" "},d=function(k,l){var m=k.value;switch(k.type){case 0:return k=a(m),k.substring(0,k.length-1);case 3:return"["+k.field+c(a(k.operator))+b(m)+"]";case 5:return l=k.field,"["+a(k.operator)+l+"]";case 4:return"["+k.field+"]";case 6:return"[["+k.field+c(a(k.operator))+b(m)+"]]";case 7:return m;case 8:return"#"+m;case 9:return"."+
m;case 17:case 15:return e(k.parent,l)+c("\x3e")+e(k.child,l);case 18:case 16:return e(k.ancestor,l)+" "+e(k.descendant,l);case 19:m=e(k.left,l);var n=e(k.subject,l);k=e(k.right,l);return m+(m.length>0?" ":"")+n+k;case 20:return""}},e=function(k,l){return k.checks.reduce(function(m,n,p){return m+(l===k&&p===0?"$":"")+d(n,l)},"")},f="",g=0;g<this.length;g++){var h=this[g];f+=e(h,h.subject);this.length>1&&g<this.length-1&&(f+=", ")}return this.toStringCache=f}},{matches:function(a){for(var b=0;b<this.length;b++)if(xb(this[b],
a))return!0;return!1},filter:function(a){var b=this;if(b.length===1&&b[0].checks.length===1&&b[0].checks[0].type===8)return a.getElementById(b[0].checks[0].value).collection();var c=function(d){for(var e=0;e<b.length;e++)if(xb(b[e],d))return!0;return!1};b.text()==null&&(c=function(){return!0});return a.filter(c)}}].forEach(function(a){return Ra(Dc,a)});Dc.text=function(){return this.inputText};Dc.size=function(){return this.length};Dc.eq=function(a){return this[a]};Dc.sameText=function(a){return!this.invalid&&
!a.invalid&&this.text()===a.text()};Dc.addQuery=function(a){this[this.length++]=a};Dc.selector=Dc.toString;var Ec={allAre:function(a){var b=new Cc(a);return this.every(function(c){return b.matches(c)})},is:function(a){var b=new Cc(a);return this.some(function(c){return b.matches(c)})},some:function(a,b){for(var c=0;c<this.length;c++)if(b?a.apply(b,[this[c],c,this]):a(this[c],c,this))return!0;return!1},every:function(a,b){for(var c=0;c<this.length;c++)if(b?!a.apply(b,[this[c],c,this]):!a(this[c],c,
this))return!1;return!0},same:function(a){if(this===a)return!0;a=this.cy().collection(a);var b=this.length;return b!==a.length?!1:b===1?this[0]===a[0]:this.every(function(c){return a.hasElementWithId(c.id())})},anySame:function(a){a=this.cy().collection(a);return this.some(function(b){return a.hasElementWithId(b.id())})},allAreNeighbors:function(a){a=this.cy().collection(a);var b=this.neighborhood();return a.every(function(c){return b.hasElementWithId(c.id())})},contains:function(a){a=this.cy().collection(a);
var b=this;return a.every(function(c){return b.hasElementWithId(c.id())})}};Ec.allAreNeighbours=Ec.allAreNeighbors;Ec.has=Ec.contains;Ec.equal=Ec.equals=Ec.same;var bc=function(a,b){return function(c,d,e,f){var g;c==null?g="":Yb(c)&&c.length===1&&(g=c.id());if(this.length===1&&g){var h=this[0]._private;h=h.traversalCache=h.traversalCache||{};h=h[b]=h[b]||[];g=Jc(g);var k=h[g];return k?k:h[g]=a.call(this,c,d,e,f)}return a.call(this,c,d,e,f)}},lf={parent:function(a){var b=[];if(this.length===1){var c=
this[0]._private.parent;if(c)return c}for(c=0;c<this.length;c++){var d=this[c]._private.parent;d&&b.push(d)}return this.spawn(b,!0).filter(a)},parents:function(a){for(var b=[],c=this.parent();c.nonempty();){for(var d=0;d<c.length;d++)b.push(c[d]);c=c.parent()}return this.spawn(b,!0).filter(a)},commonAncestors:function(a){for(var b,c=0;c<this.length;c++){var d=this[c].parents();b=b||d;b=b.intersect(d)}return b.filter(a)},orphans:function(a){return this.stdFilter(function(b){return b.isOrphan()}).filter(a)},
nonorphans:function(a){return this.stdFilter(function(b){return b.isChild()}).filter(a)},children:bc(function(a){for(var b=[],c=0;c<this.length;c++)for(var d=this[c]._private.children,e=0;e<d.length;e++)b.push(d[e]);return this.spawn(b,!0).filter(a)},"children"),siblings:function(a){return this.parent().children().not(this).filter(a)},isParent:function(){var a=this[0];if(a)return a.isNode()&&a._private.children.length!==0},isChildless:function(){var a=this[0];if(a)return a.isNode()&&a._private.children.length===
0},isChild:function(){var a=this[0];if(a)return a.isNode()&&a._private.parent!=null},isOrphan:function(){var a=this[0];if(a)return a.isNode()&&a._private.parent==null},descendants:function(a){function b(d){for(var e=0;e<d.length;e++){var f=d[e];c.push(f);f.children().nonempty()&&b(f.children())}}var c=[];b(this.children());return this.spawn(c,!0).filter(a)},forEachDown:function(a){return De(this,a,arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,Th)},forEachUp:function(a){return De(this,
a,arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,Uh)},forEachUpAndDown:function(a){return De(this,a,arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,Qk)}};lf.ancestors=lf.parents;var Kj;var pe=Kj={data:nb.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),removeData:nb.removeData({field:"data",event:"data",
triggerFnName:"trigger",triggerEvent:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),scratch:nb.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:nb.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),rscratch:nb.data({field:"rscratch",allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,
allowGetting:!0}),removeRscratch:nb.removeData({field:"rscratch",triggerEvent:!1}),id:function(){var a=this[0];if(a)return a._private.data.id}};pe.attr=pe.data;pe.removeAttr=pe.removeData;var qe={};Ra(qe,{degree:Ee(function(a,b){return b.source().same(b.target())?2:1}),indegree:Ee(function(a,b){return b.target().same(a)?1:0}),outdegree:Ee(function(a,b){return b.source().same(a)?1:0})});Ra(qe,{minDegree:$c("degree",function(a,b){return a<b}),maxDegree:$c("degree",function(a,b){return a>b}),minIndegree:$c("indegree",
function(a,b){return a<b}),maxIndegree:$c("indegree",function(a,b){return a>b}),minOutdegree:$c("outdegree",function(a,b){return a<b}),maxOutdegree:$c("outdegree",function(a,b){return a>b})});Ra(qe,{totalDegree:function(a){for(var b=0,c=this.nodes(),d=0;d<c.length;d++)b+=c[d].degree(a);return b}});var Lj,Mj=function(a,b,c){for(var d=0;d<a.length;d++){var e=a[d];if(!e.locked()){var f=e._private.position;f={x:b.x!=null?b.x-f.x:0,y:b.y!=null?b.y-f.y:0};!e.isParent()||f.x===0&&f.y===0||e.children().shift(f,
c);e.dirtyBoundingBoxCache()}}},Nj={field:"position",bindingEvent:"position",allowBinding:!0,allowSetting:!0,settingEvent:"position",settingTriggersEvent:!0,triggerFnName:"emitAndNotify",allowGetting:!0,validKeys:["x","y"],beforeGet:function(a){a.updateCompoundBounds()},beforeSet:function(a,b){Mj(a,b,!1)},onSet:function(a){a.dirtyCompoundBoundsCache()},canSet:function(a){return!a.locked()}};var nc=Lj={position:nb.data(Nj),silentPosition:nb.data(Ra({},Nj,{allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,
allowGetting:!1,beforeSet:function(a,b){Mj(a,b,!0)},onSet:function(a){a.dirtyCompoundBoundsCache()}})),positions:function(a,b){if(hb(a))b?this.silentPosition(a):this.position(a);else if(zb(a)){var c=this.cy();c.startBatch();for(var d=0;d<this.length;d++){var e=this[d],f;if(f=a(e,d))b?e.silentPosition(f):e.position(f)}c.endBatch()}return this},silentPositions:function(a){return this.positions(a,!0)},shift:function(a,b,c){if(hb(a)){var d={x:Ba(a.x)?a.x:0,y:Ba(a.y)?a.y:0};c=b}else Qa(a)&&Ba(b)&&(d={x:0,
y:0},d[a]=b);if(d!=null){a=this.cy();a.startBatch();for(b=0;b<this.length;b++){var e=this[b];if(!(a.hasCompoundNodes()&&e.isChild()&&e.ancestors().anySame(this))){var f=e.position();f={x:f.x+d.x,y:f.y+d.y};c?e.silentPosition(f):e.position(f)}}a.endBatch()}return this},silentShift:function(a,b){hb(a)?this.shift(a,!0):Qa(a)&&Ba(b)&&this.shift(a,b,!0);return this},renderedPosition:function(a,b){var c=this[0],d=this.cy(),e=d.zoom();d=d.pan();var f=hb(a)?a:void 0,g=f!==void 0||b!==void 0&&Qa(a);if(c&&
c.isNode())if(g)for(c=0;c<this.length;c++)g=this[c],b!==void 0?g.position(a,(b-d[a])/e):f!==void 0&&g.position({x:(f.x-d.x)/e,y:(f.y-d.y)/e});else return b=c.position(),f=fe(b,e,d),a===void 0?f:f[a];else if(!g)return;return this},relativePosition:function(a,b){var c=this[0],d=this.cy(),e=hb(a)?a:void 0,f=e!==void 0||b!==void 0&&Qa(a);d=d.hasCompoundNodes();if(c&&c.isNode())if(f)for(c=0;c<this.length;c++){f=this[c];var g=d?f.parent():null,h=g&&g.length>0,k=h;h&&(g=g[0]);g=k?g.position():{x:0,y:0};
b!==void 0?f.position(a,b+g[a]):e!==void 0&&f.position({x:e.x+g.x,y:e.y+g.y})}else return b=c.position(),(d=(e=d?c.parent():null)&&e.length>0)&&(e=e[0]),e=d?e.position():{x:0,y:0},e={x:b.x-e.x,y:b.y-e.y},a===void 0?e:e[a];else if(!f)return;return this}};nc.modelPosition=nc.point=nc.position;nc.modelPositions=nc.points=nc.positions;nc.renderedPoint=nc.renderedPosition;nc.relativePoint=nc.relativePosition;var Fc;var Jd=Fc={};Fc.renderedBoundingBox=function(a){a=this.boundingBox(a);var b=this.cy(),c=
b.zoom(),d=b.pan();b=a.x1*c+d.x;var e=a.x2*c+d.x,f=a.y1*c+d.y;a=a.y2*c+d.y;return{x1:b,x2:e,y1:f,y2:a,w:e-b,h:a-f}};Fc.dirtyCompoundBoundsCache=function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,b=this.cy();if(!b.styleEnabled()||!b.hasCompoundNodes())return this;this.forEachUp(function(c){if(c.isParent()){var d=c._private;d.compoundBoundsClean=!1;d.bbCache=null;a||c.emitAndNotify("bounds")}});return this};Fc.updateCompoundBounds=function(){function a(g){function h(w,C,y){var B=
0,M=0,Q=C+y;w>0&&Q>0&&(B=C/Q*w,M=y/Q*w);return{biasDiff:B,biasComplementDiff:M}}if(g.isParent()){var k=g._private,l=g.children(),m=g.pstyle("compound-sizing-wrt-labels").value==="include",n=g.pstyle("min-width").pfValue,p=g.pstyle("min-width-bias-left"),q=g.pstyle("min-width-bias-right"),t=g.pstyle("min-height").pfValue,u=g.pstyle("min-height-bias-top"),x=g.pstyle("min-height-bias-bottom");l=l.boundingBox({includeLabels:m,includeOverlays:!1,useCache:!1});m=k.position;if(l.w===0||l.h===0)l={w:g.pstyle("width").pfValue,
h:g.pstyle("height").pfValue},l.x1=m.x-l.w/2,l.x2=m.x+l.w/2,l.y1=m.y-l.h/2,l.y2=m.y+l.h/2;var v=p.value;p.units==="px"&&n>0&&(v=v*100/n);p=q.value;q.units==="px"&&n>0&&(p=p*100/n);q=u.value;u.units==="px"&&t>0&&(q=q*100/t);u=x.value;x.units==="px"&&t>0&&(u=u*100/t);v=h(n-l.w,v,p);x=v.biasDiff;v=v.biasComplementDiff;q=h(t-l.h,q,u);u=q.biasDiff;q=q.biasComplementDiff;k.autoPadding=function(w,C,y,B){if(y.units==="%")switch(B){case "width":return w>0?y.pfValue*w:0;case "height":return C>0?y.pfValue*C:
0;case "average":return w>0&&C>0?y.pfValue*(w+C)/2:0;case "min":return w>0&&C>0?w>C?y.pfValue*C:y.pfValue*w:0;case "max":return w>0&&C>0?w>C?y.pfValue*w:y.pfValue*C:0;default:return 0}else return y.units==="px"?y.pfValue:0}(l.w,l.h,g.pstyle("padding"),g.pstyle("padding-relative-to").value);k.autoWidth=Math.max(l.w,n);m.x=(-x+l.x1+l.x2+v)/2;k.autoHeight=Math.max(l.h,t);m.y=(-u+l.y1+l.y2+q)/2}}var b=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,c=this.cy();if(!c.styleEnabled()||!c.hasCompoundNodes()||
!b&&c.batching())return this;for(var d=0;d<this.length;d++){var e=this[d],f=e._private;if(!f.compoundBoundsClean||b)a(e),c.batching()||(f.compoundBoundsClean=!0)}return this};var cc=function(a){return a===Infinity||a===-Infinity?0:a},fc=function(a,b,c,d,e){d-b!==0&&e-c!==0&&b!=null&&c!=null&&d!=null&&e!=null&&(a.x1=b<a.x1?b:a.x1,a.x2=d>a.x2?d:a.x2,a.y1=c<a.y1?c:a.y1,a.y2=e>a.y2?e:a.y2,a.w=a.x2-a.x1,a.h=a.y2-a.y1)},Sc=function(a,b){return b==null?a:fc(a,b.x1,b.y1,b.x2,b.y2)},re=function(a,b,c){if(!b.cy().headless()){var d=
b._private,e=d.rstyle,f=e.arrowWidth/2;b.pstyle(c+"-arrow-shape").value!=="none"&&(c==="source"?(b=e.srcX,e=e.srcY):c==="target"?(b=e.tgtX,e=e.tgtY):(b=e.midX,e=e.midY),d=d.arrowBounds=d.arrowBounds||{},c=d[c]=d[c]||{},c.x1=b-f,c.y1=e-f,c.x2=b+f,c.y2=e+f,c.w=c.x2-c.x1,c.h=c.y2-c.y1,ge(c,1),fc(a,c.x1,c.y1,c.x2,c.y2))}},mf=function(a,b,c){if(!b.cy().headless()){var d=c?c+"-":"";var e=b._private,f=e.rstyle;if(b.pstyle(d+"label").strValue){var g=b.pstyle("text-halign"),h=b.pstyle("text-valign"),k=Bb(f,
"labelWidth",c),l=Bb(f,"labelHeight",c),m=Bb(f,"labelX",c),n=Bb(f,"labelY",c),p=b.pstyle(d+"text-margin-x").pfValue,q=b.pstyle(d+"text-margin-y").pfValue;f=b.isEdge();d=b.pstyle(d+"text-rotation");var t=b.pstyle("text-outline-width").pfValue,u=b.pstyle("text-border-width").pfValue/2;b=b.pstyle("text-background-padding").pfValue;var x=k/2,v=l/2;if(f){var w=m-x;var C=m+x;var y=n-v;var B=n+v}else{switch(g.value){case "left":w=m-k;C=m;break;case "center":w=m-x;C=m+x;break;case "right":w=m,C=m+k}switch(h.value){case "top":y=
n-l;B=n;break;case "center":y=n-v;B=n+v;break;case "bottom":y=n,B=n+l}}k=p-Math.max(t,u)-b-2;l=p+Math.max(t,u)+b+2;m=q-Math.max(t,u)-b-2;u=q+Math.max(t,u)+b+2;w+=k;C+=l;y+=m;B+=u;t=c||"main";q=e.labelBounds;p=q[t]=q[t]||{};p.x1=w;p.y1=y;p.x2=C;p.y2=B;p.w=C-w;p.h=B-y;p.leftPad=k;p.rightPad=l;p.topPad=m;p.botPad=u;u=f&&d.strValue==="autorotate";k=d.pfValue!=null&&d.pfValue!==0;if(u||k){c=u?Bb(e.rstyle,"labelAngle",c):d.pfValue;var M=Math.cos(c),Q=Math.sin(c),ja=(w+C)/2,da=(y+B)/2;if(!f){switch(g.value){case "left":ja=
C;break;case "right":ja=w}switch(h.value){case "top":da=B;break;case "bottom":da=y}}f=function(Da,pa){Da-=ja;pa-=da;return{x:Da*M-pa*Q+ja,y:Da*Q+pa*M+da}};g=f(w,y);h=f(w,B);c=f(C,y);B=f(C,B);w=Math.min(g.x,h.x,c.x,B.x);C=Math.max(g.x,h.x,c.x,B.x);y=Math.min(g.y,h.y,c.y,B.y);B=Math.max(g.y,h.y,c.y,B.y)}g=t+"Rot";g=q[g]=q[g]||{};g.x1=w;g.y1=y;g.x2=C;g.y2=B;g.w=C-w;g.h=B-y;fc(a,w,y,C,B);fc(e.labelBounds.all,w,y,C,B)}return a}},Fm=function(a,b){if(!b.cy().headless()){var c=b.pstyle("outline-opacity").value,
d=b.pstyle("outline-width").value;if(c>0&&d>0){c=b.pstyle("outline-offset").value;b=b.pstyle("shape").value;d+=c;c=(a.w+d*2)/a.w;var e=(a.h+d*2)/a.h,f=0;["diamond","pentagon","round-triangle"].includes(b)?(c=(a.w+d*2.4)/a.w,f=-d/3.6):["concave-hexagon","rhomboid","right-rhomboid"].includes(b)?c=(a.w+d*2.4)/a.w:b==="star"?(c=(a.w+d*2.8)/a.w,e=(a.h+d*2.6)/a.h,f=-d/3.8):b==="triangle"?(c=(a.w+d*2.8)/a.w,e=(a.h+d*2.4)/a.h,f=-d/1.4):b==="vee"&&(c=(a.w+d*4.4)/a.w,e=(a.h+d*3.8)/a.h,f=-d*.5);he(a,[Math.ceil((a.h*
e-a.h)/2),Math.ceil((a.w*c-a.w)/2)]);f!==0&&ej(a,{x1:a.x1+0,x2:a.x2+0,y1:a.y1+f,y2:a.y2+f,w:a.w,h:a.h})}}},Gm=function(a,b){var c=a._private.cy,d=c.styleEnabled(),e=c.headless();c=Vb();var f=a._private,g=a.isNode(),h=a.isEdge(),k,l=f.rstyle,m=g&&d?a.pstyle("bounds-expansion").pfValue:[0],n=function(v){return v.pstyle("display").value!=="none"};if(n=!d||n(a)&&(!h||n(a.source())&&n(a.target()))){var p=k=0;d&&b.includeOverlays&&(k=a.pstyle("overlay-opacity").value,k!==0&&(p=a.pstyle("overlay-padding").value));
var q=k=0;d&&b.includeUnderlays&&(k=a.pstyle("underlay-opacity").value,k!==0&&(q=a.pstyle("underlay-padding").value));p=Math.max(p,q);k=k=0;d&&(k=a.pstyle("width").pfValue,k/=2);if(g&&b.includeNodes){var t=a.position();k=t.x;t=t.y;e=a.outerWidth()/2;g=a.outerHeight()/2;fc(c,k-e,t-g,k+e,t+g);d&&b.includeOutlines&&Fm(c,a)}else if(h&&b.includeEdges)if(d&&!e){var u=a.pstyle("curve-style").strValue;e=Math.min(l.srcX,l.midX,l.tgtX);g=Math.max(l.srcX,l.midX,l.tgtX);q=Math.min(l.srcY,l.midY,l.tgtY);var x=
Math.max(l.srcY,l.midY,l.tgtY);fc(c,e-k,q-k,g+k,x+k);if(u==="haystack")(t=l.haystackPts)&&t.length===2&&(e=t[0].x,q=t[0].y,g=t[1].x,x=t[1].y,e>g&&(t=e,e=g,g=t),q>x&&(t=q,q=x,x=t),fc(c,e-k,q-k,g+k,x+k));else if(u==="bezier"||u==="unbundled-bezier"||u.endsWith("segments")||u.endsWith("taxi")){switch(u){case "bezier":case "unbundled-bezier":t=l.bezierPts;break;case "segments":case "taxi":case "round-segments":case "round-taxi":t=l.linePts}if(t!=null)for(l=0;l<t.length;l++)x=t[l],e=x.x-k,g=x.x+k,q=x.y-
k,x=x.y+k,fc(c,e,q,g,x)}}else q=a.source().position(),t=a.target().position(),e=q.x,g=t.x,q=q.y,x=t.y,e>g&&(t=e,e=g,g=t),q>x&&(t=q,q=x,x=t),fc(c,e-k,q-k,g+k,x+k);d&&b.includeEdges&&h&&(re(c,a,"mid-source"),re(c,a,"mid-target"),re(c,a,"source"),re(c,a,"target"));d&&a.pstyle("ghost").value==="yes"&&(k=a.pstyle("ghost-offset-x").pfValue,t=a.pstyle("ghost-offset-y").pfValue,fc(c,c.x1+k,c.y1+t,c.x2+k,c.y2+t));k=f.bodyBounds=f.bodyBounds||{};fj(k,c);he(k,m);ge(k,1);d&&(e=c.x1,g=c.x2,q=c.y1,x=c.y2,fc(c,
e-p,q-p,g+p,x+p));p=f.overlayBounds=f.overlayBounds||{};fj(p,c);he(p,m);ge(p,1);f=f.labelBounds=f.labelBounds||{};f.all!=null?am(f.all):f.all=Vb();d&&b.includeLabels&&(b.includeMainLabels&&mf(c,a,null),h&&(b.includeSourceLabels&&mf(c,a,"source"),b.includeTargetLabels&&mf(c,a,"target")))}c.x1=cc(c.x1);c.y1=cc(c.y1);c.x2=cc(c.x2);c.y2=cc(c.y2);c.w=cc(c.x2-c.x1);c.h=cc(c.y2-c.y1);c.w>0&&c.h>0&&n&&(he(c,m),ge(c,1));return c},Oj=function(a){var b=0,c=function(e){return(e?1:0)<<b++};var d=0+c(a.incudeNodes);
d+=c(a.includeEdges);d+=c(a.includeLabels);d+=c(a.includeMainLabels);d+=c(a.includeSourceLabels);d+=c(a.includeTargetLabels);d+=c(a.includeOverlays);return d+=c(a.includeOutlines)},Pj=function(a){if(a.isEdge()){var b=a.source().position();a=a.target().position();return Vi([Math.round(b.x),Math.round(b.y),Math.round(a.x),Math.round(a.y)])}b=a.position();return Vi([Math.round(b.x),Math.round(b.y)])},Rj=function(a,b){var c=a._private,d=a.isEdge(),e=(b==null?Qj:Oj(b))===Qj;if(c.bbCache==null){var f=Gm(a,
Kd);c.bbCache=f;c.bbCachePosKey=Pj(a)}else f=c.bbCache;if(!e){a=a.isNode();f=Vb();if(b.includeNodes&&a||b.includeEdges&&!a)b.includeOverlays?Sc(f,c.overlayBounds):Sc(f,c.bodyBounds);b.includeLabels&&(b.includeMainLabels&&(!d||b.includeSourceLabels&&b.includeTargetLabels)?Sc(f,c.labelBounds.all):(b.includeMainLabels&&Sc(f,c.labelBounds.mainRot),b.includeSourceLabels&&Sc(f,c.labelBounds.sourceRot),b.includeTargetLabels&&Sc(f,c.labelBounds.targetRot)));f.w=f.x2-f.x1;f.h=f.y2-f.y1}return f},Kd={includeNodes:!0,
includeEdges:!0,includeLabels:!0,includeMainLabels:!0,includeSourceLabels:!0,includeTargetLabels:!0,includeOverlays:!0,includeUnderlays:!0,includeOutlines:!0,useCache:!0},Qj=Oj(Kd),Sj=Mb(Kd);Fc.boundingBox=function(a){var b=a===void 0||a.useCache===void 0||a.useCache===!0,c=ed(function(f){var g=f._private;return g.bbCache==null||g.styleDirty||g.bbCachePosKey!==Pj(f)},function(f){return f.id()});if(b&&this.length===1&&!c(this[0])){a=a===void 0?Kd:Sj(a);var d=Rj(this[0],a)}else{d=Vb();a=a||Kd;a=Sj(a);
var e=this.cy().styleEnabled();this.edges().forEach(c);this.nodes().forEach(c);e&&this.recalculateRenderedStyle(b);this.updateCompoundBounds(!b);for(b=0;b<this.length;b++)e=this[b],c(e)&&e.dirtyBoundingBoxCache(),Sc(d,Rj(e,a))}d.x1=cc(d.x1);d.y1=cc(d.y1);d.x2=cc(d.x2);d.y2=cc(d.y2);d.w=cc(d.x2-d.x1);d.h=cc(d.y2-d.y1);return d};Fc.dirtyBoundingBoxCache=function(){for(var a=0;a<this.length;a++){var b=this[a]._private;b.bbCache=null;b.bbCachePosKey=null;b.bodyBounds=null;b.overlayBounds=null;b.labelBounds.all=
null;b.labelBounds.source=null;b.labelBounds.target=null;b.labelBounds.main=null;b.labelBounds.sourceRot=null;b.labelBounds.targetRot=null;b.labelBounds.mainRot=null;b.arrowBounds.source=null;b.arrowBounds.target=null;b.arrowBounds["mid-source"]=null;b.arrowBounds["mid-target"]=null}this.emitAndNotify("bounds");return this};Fc.boundingBoxAt=function(a){var b=this.nodes(),c=this.cy(),d=c.hasCompoundNodes(),e=c.collection();d&&(e=b.filter(function(h){return h.isParent()}),b=b.not(e));if(hb(a)){var f=
a;a=function(){return f}}c.startBatch();b.forEach(function(h,k){return h._private.bbAtOldPos=a(h,k)}).silentPositions(a);d&&(e.dirtyCompoundBoundsCache(),e.dirtyBoundingBoxCache(),e.updateCompoundBounds(!0));var g=$l(this.boundingBox({useCache:!1}));b.silentPositions(function(h){return h._private.bbAtOldPos});d&&(e.dirtyCompoundBoundsCache(),e.dirtyBoundingBoxCache(),e.updateCompoundBounds(!0));c.endBatch();return g};Jd.boundingbox=Jd.bb=Jd.boundingBox;Jd.renderedBoundingbox=Jd.renderedBoundingBox;
var Ld;var se=Ld={};var Tj=function(a){a.uppercaseName=Ri(a.name);a.autoName="auto"+a.uppercaseName;a.labelName="label"+a.uppercaseName;a.outerName="outer"+a.uppercaseName;a.uppercaseOuterName=Ri(a.outerName);se[a.name]=function(){var b=this[0],c=b._private,d=c.cy._private.styleEnabled;if(b)if(d){if(b.isParent())return b.updateCompoundBounds(),c[a.autoName]||0;d=b.pstyle(a.name);switch(d.strValue){case "label":return b.recalculateRenderedStyle(),c.rstyle[a.labelName]||0;default:return d.pfValue}}else return 1};
se["outer"+a.uppercaseName]=function(){var b=this[0],c=b._private.cy._private.styleEnabled;if(b){if(c){c=b[a.name]();var d=b.pstyle("border-position").value;d=d==="center"?b.pstyle("border-width").pfValue:d==="outside"?2*b.pstyle("border-width").pfValue:0;b=2*b.padding();return c+d+b}return 1}};se["rendered"+a.uppercaseName]=function(){var b=this[0];if(b)return b[a.name]()*this.cy().zoom()};se["rendered"+a.uppercaseOuterName]=function(){var b=this[0];if(b)return b[a.outerName]()*this.cy().zoom()}};
Tj({name:"width"});Tj({name:"height"});Ld.padding=function(){var a=this[0],b=a._private;return a.isParent()?(a.updateCompoundBounds(),b.autoPadding!==void 0?b.autoPadding:a.pstyle("padding").pfValue):a.pstyle("padding").pfValue};Ld.paddedHeight=function(){var a=this[0];return a.height()+2*a.padding()};Ld.paddedWidth=function(){var a=this[0];return a.width()+2*a.padding()};var Hm=function(a,b){if(a.isEdge()&&a.takesUpSpace()){var c=a.cy(),d=c.pan(),e=c.zoom();return b(a).map(function(f){return fe(f,
e,d)})}},Uj={controlPoints:{get:function(a){return a.renderer().getControlPoints(a)},mult:!0},segmentPoints:{get:function(a){return a.renderer().getSegmentPoints(a)},mult:!0},sourceEndpoint:{get:function(a){return a.renderer().getSourceEndpoint(a)}},targetEndpoint:{get:function(a){return a.renderer().getTargetEndpoint(a)}},midpoint:{get:function(a){return a.renderer().getEdgeMidpoint(a)}}},Im=function(a){return"rendered"+a[0].toUpperCase()+a.substr(1)},Jm=Object.keys(Uj).reduce(function(a,b){var c=
Uj[b],d=Im(b);a[b]=function(){var e=c.get;e=this.isEdge()&&this.takesUpSpace()?e(this):void 0;return e};a[d]=c.mult?function(){return Hm(this,c.get)}:function(){var e=c.get;if(this.isEdge()&&this.takesUpSpace()){var f=this.cy();e=fe(e(this),f.zoom(),f.pan())}else e=void 0;return e};return a},{}),Km=Ra({},Lj,Fc,Ld,Jm),Vj=function(a,b){this.recycle(a,b)};Vj.prototype={instanceString:function(){return"event"},recycle:function(a,b){this.isImmediatePropagationStopped=this.isPropagationStopped=this.isDefaultPrevented=
vd;a!=null&&a.preventDefault?(this.type=a.type,this.isDefaultPrevented=a.defaultPrevented?Qd:vd):a!=null&&a.type?b=a:this.type=a;b!=null&&(this.originalEvent=b.originalEvent,this.type=b.type!=null?b.type:this.type,this.cy=b.cy,this.target=b.target,this.position=b.position,this.renderedPosition=b.renderedPosition,this.namespace=b.namespace,this.layout=b.layout);if(this.cy!=null&&this.position!=null&&this.renderedPosition==null){b=this.position;var c=this.cy.zoom(),d=this.cy.pan();this.renderedPosition=
{x:b.x*c+d.x,y:b.y*c+d.y}}this.timeStamp=a&&a.timeStamp||Date.now()},preventDefault:function(){this.isDefaultPrevented=Qd;var a=this.originalEvent;a&&a.preventDefault&&a.preventDefault()},stopPropagation:function(){this.isPropagationStopped=Qd;var a=this.originalEvent;a&&a.stopPropagation&&a.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=Qd;this.stopPropagation()},isDefaultPrevented:vd,isPropagationStopped:vd,isImmediatePropagationStopped:vd};var Wj=/^([^.]+)(\.(?:[^.]+))?$/,
Wh={qualifierCompare:function(a,b){return a===b},eventMatches:function(){return!0},addEventFields:function(){},callbackContext:function(a){return a},beforeEmit:function(){},afterEmit:function(){},bubble:function(){return!1},parent:function(){return null},context:null},Vh=Object.keys(Wh),Rk={},Gc=Rd.prototype,Xj=function(a,b,c,d,e,f,g){zb(d)&&(e=d,d=null);g&&(f=f==null?g:Ra({},f,g));c=rb(c)?c:c.split(/\s+/);for(g=0;g<c.length;g++){var h=c[g];if(!xc(h)){var k=h.match(Wj);if(k&&b(a,h,k[1],k[2]?k[2]:
null,d,e,f)===!1)break}}},Yj=function(a,b){a.addEventFields(a.context,b);return new Vj(b.type,b)},Lm=function(a,b,c){if(wc(c)==="event")b(a,c);else if(hb(c))b(a,Yj(a,c));else{c=rb(c)?c:c.split(/\s+/);for(var d=0;d<c.length;d++){var e=c[d];!xc(e)&&(e=e.match(Wj))&&(e=Yj(a,{type:e[1],namespace:e[2]?e[2]:null,target:a.context}),b(a,e))}}};Gc.on=Gc.addListener=function(a,b,c,d,e){Xj(this,function(f,g,h,k,l,m,n){zb(m)&&f.listeners.push({event:g,callback:m,type:h,namespace:k,qualifier:l,conf:n})},a,b,c,
d,e);return this};Gc.one=function(a,b,c,d){return this.on(a,b,c,d,{one:!0})};Gc.removeListener=Gc.off=function(a,b,c,d){var e=this;this.emitting!==0&&(this.listeners=this.listeners.slice());for(var f=this.listeners,g=function(k){var l=f[k];Xj(e,function(m,n,p,q,t,u){if(!(l.type!==p&&a!=="*"||(q||l.namespace===".*")&&l.namespace!==q||t&&!m.qualifierCompare(l.qualifier,t)||u&&l.callback!==u))return f.splice(k,1),!1},a,b,c,d)},h=f.length-1;h>=0;h--)g(h);return this};Gc.removeAllListeners=function(){return this.removeListener("*")};
Gc.emit=Gc.trigger=function(a,b,c){var d=this.listeners,e=d.length;this.emitting++;rb(b)||(b=[b]);Lm(this,function(f,g){c!=null&&(d=[{event:g.event,type:g.type,namespace:g.namespace,callback:c}],e=d.length);for(var h=function(){var l=d[k];if(l.type===g.type&&(!l.namespace||l.namespace===g.namespace||l.namespace===".*")&&f.eventMatches(f.context,l,g)){var m=[g];b!=null&&Jl(m,b);f.beforeEmit(f.context,l,g);l.conf&&l.conf.one&&(f.listeners=f.listeners.filter(function(p){return p!==l}));var n=f.callbackContext(f.context,
l,g);m=l.callback.apply(n,m);f.afterEmit(f.context,l,g);m===!1&&(g.stopPropagation(),g.preventDefault())}},k=0;k<e;k++)h();f.bubble(f.context)&&!g.isPropagationStopped()&&f.parent(f.context).emit(g,b)},a);this.emitting--;return this};var Mm={qualifierCompare:function(a,b){return a==null||b==null?a==null&&b==null:a.sameText(b)},eventMatches:function(a,b,c){b=b.qualifier;return b!=null?a!==c.target&&Cd(c.target)&&b.matches(c.target):!0},addEventFields:function(a,b){b.cy=a.cy();b.target=a},callbackContext:function(a,
b,c){return b.qualifier!=null?c.target:a},beforeEmit:function(a,b){b.conf&&b.conf.once&&b.conf.onceCollection.removeListener(b.event,b.qualifier,b.callback)},bubble:function(){return!0},parent:function(a){return a.isChild()?a.parent():a.cy()}},te=function(a){return Qa(a)?new Cc(a):a},Zj={createEmitter:function(){for(var a=0;a<this.length;a++){var b=this[a],c=b._private;c.emitter||(c.emitter=new Rd(Mm,b))}return this},emitter:function(){return this._private.emitter},on:function(a,b,c){b=te(b);for(var d=
0;d<this.length;d++)this[d].emitter().on(a,b,c);return this},removeListener:function(a,b,c){b=te(b);for(var d=0;d<this.length;d++)this[d].emitter().removeListener(a,b,c);return this},removeAllListeners:function(){for(var a=0;a<this.length;a++)this[a].emitter().removeAllListeners();return this},one:function(a,b,c){b=te(b);for(var d=0;d<this.length;d++)this[d].emitter().one(a,b,c);return this},once:function(a,b,c){b=te(b);for(var d=0;d<this.length;d++)this[d].emitter().on(a,b,c,{once:!0,onceCollection:this})},
emit:function(a,b){for(var c=0;c<this.length;c++)this[c].emitter().emit(a,b);return this},emitAndNotify:function(a,b){if(this.length!==0)return this.cy().notify(a,this),this.emit(a,b),this}};nb.eventAliasesOn(Zj);var ib={nodes:function(a){return this.filter(function(b){return b.isNode()}).filter(a)},edges:function(a){return this.filter(function(b){return b.isEdge()}).filter(a)},byGroup:function(){for(var a=this.spawn(),b=this.spawn(),c=0;c<this.length;c++){var d=this[c];d.isNode()?a.push(d):b.push(d)}return{nodes:a,
edges:b}},filter:function(a,b){if(a===void 0)return this;if(Qa(a)||Yb(a))return(new Cc(a)).filter(this);if(zb(a)){for(var c=this.spawn(),d=0;d<this.length;d++){var e=this[d];(b?a.apply(b,[e,d,this]):a(e,d,this))&&c.push(e)}return c}return this.spawn()},not:function(a){if(a){Qa(a)&&(a=this.filter(a));for(var b=this.spawn(),c=0;c<this.length;c++){var d=this[c];a.has(d)||b.push(d)}return b}return this},absoluteComplement:function(){return this.cy().mutableElements().not(this)},intersect:function(a){if(Qa(a))return this.filter(a);
var b=this.spawn(),c=this.length<a.length,d=c?this:a;a=c?a:this;for(c=0;c<d.length;c++){var e=d[c];a.has(e)&&b.push(e)}return b},xor:function(a){var b=this._private.cy;Qa(a)&&(a=b.$(a));var c=this.spawn();b=function(d,e){for(var f=0;f<d.length;f++){var g=d[f];e.hasElementWithId(g._private.data.id)||c.push(g)}};b(this,a);b(a,this);return c},diff:function(a){var b=this._private.cy;Qa(a)&&(a=b.$(a));b=this.spawn();var c=this.spawn(),d=this.spawn(),e=function(f,g,h){for(var k=0;k<f.length;k++){var l=
f[k];g.hasElementWithId(l._private.data.id)?d.merge(l):h.push(l)}};e(this,a,b);e(a,this,c);return{left:b,right:c,both:d}},add:function(a){var b=this._private.cy;if(!a)return this;Qa(a)&&(a=b.mutableElements().filter(a));b=this.spawnSelf();for(var c=0;c<a.length;c++){var d=a[c];this.has(d)||b.push(d)}return b},merge:function(a){var b=this._private,c=b.cy;if(!a)return this;a&&Qa(a)&&(a=c.mutableElements().filter(a));b=b.map;for(c=0;c<a.length;c++){var d=a[c],e=d._private.data.id;if(!b.has(e)){var f=
this.length++;this[f]=d;b.set(e,{ele:d,index:f})}}return this},unmergeAt:function(a){var b=this[a].id(),c=this._private.map;this[a]=void 0;c["delete"](b);b=a===this.length-1;if(this.length>1&&!b){b=this.length-1;var d=this[b],e=d._private.data.id;this[b]=void 0;this[a]=d;c.set(e,{ele:d,index:a})}this.length--;return this},unmergeOne:function(a){a=a[0];a=this._private.map.get(a._private.data.id);if(!a)return this;this.unmergeAt(a.index);return this},unmerge:function(a){var b=this._private.cy;if(!a)return this;
a&&Qa(a)&&(a=b.mutableElements().filter(a));for(b=0;b<a.length;b++)this.unmergeOne(a[b]);return this},unmergeBy:function(a){for(var b=this.length-1;b>=0;b--)a(this[b])&&this.unmergeAt(b);return this},map:function(a,b){for(var c=[],d=0;d<this.length;d++){var e=this[d];e=b?a.apply(b,[e,d,this]):a(e,d,this);c.push(e)}return c},reduce:function(a,b){for(var c=0;c<this.length;c++)b=a(b,this[c],c,this);return b},max:function(a,b){for(var c=-Infinity,d,e=0;e<this.length;e++){var f=this[e],g=b?a.apply(b,[f,
e,this]):a(f,e,this);g>c&&(c=g,d=f)}return{value:c,ele:d}},min:function(a,b){for(var c=Infinity,d,e=0;e<this.length;e++){var f=this[e],g=b?a.apply(b,[f,e,this]):a(f,e,this);g<c&&(c=g,d=f)}return{value:c,ele:d}}};ib.u=ib["|"]=ib["+"]=ib.union=ib.or=ib.add;ib["\\"]=ib["!"]=ib["-"]=ib.difference=ib.relativeComplement=ib.subtract=ib.not;ib.n=ib["\x26"]=ib["."]=ib.and=ib.intersection=ib.intersect;ib["^"]=ib["(+)"]=ib["(-)"]=ib.symmetricDifference=ib.symdiff=ib.xor;ib.fnFilter=ib.filterFn=ib.stdFilter=
ib.filter;ib.complement=ib.abscomp=ib.absoluteComplement;var ak=function(a,b){function c(g){var h=g.pstyle("z-compound-depth");return h.value==="auto"?e?g.zDepth():0:h.value==="bottom"?-1:h.value==="top"?Ue:0}function d(g){return g.pstyle("z-index-compare").value==="auto"?g.isNode()?1:0:0}var e=a.cy().hasCompoundNodes(),f=c(a)-c(b);if(f!==0)return f;f=d(a)-d(b);if(f!==0)return f;f=a.pstyle("z-index").value-b.pstyle("z-index").value;return f!==0?f:a.poolIndex()-b.poolIndex()},ue={forEach:function(a,
b){if(zb(a))for(var c=this.length,d=0;d<c;d++){var e=this[d];if((b?a.apply(b,[e,d,this]):a(e,d,this))===!1)break}return this},toArray:function(){for(var a=[],b=0;b<this.length;b++)a.push(this[b]);return a},slice:function(a,b){var c=[],d=this.length;b==null&&(b=d);a==null&&(a=0);a<0&&(a=d+a);for(b<0&&(b=d+b);a>=0&&a<b&&a<d;a++)c.push(this[a]);return this.spawn(c)},size:function(){return this.length},eq:function(a){return this[a]||this.spawn()},first:function(){return this[0]||this.spawn()},last:function(){return this[this.length-
1]||this.spawn()},empty:function(){return this.length===0},nonempty:function(){return!this.empty()},sort:function(a){if(!zb(a))return this;a=this.toArray().sort(a);return this.spawn(a)},sortByZIndex:function(){return this.sort(ak)},zDepth:function(){var a=this[0];if(a){var b=a._private;if(b.group==="nodes")return b=b.data.parent?a.parents().size():0,a.isParent()?b:Ue-1;a=b.target;b=b.source.zDepth();a=a.zDepth();return Math.max(b,a,0)}}};ue.each=ue.forEach;(function(){(typeof Symbol==="undefined"?
"undefined":U(Symbol))!="undefined"&&U(Symbol.iterator)!="undefined"&&(ue[Symbol.iterator]=function(){var a=this,b={value:void 0,done:!1},c=0,d=this.length;return H({next:function(){c<d?b.value=a[c++]:(b.value=void 0,b.done=!0);return b}},Symbol.iterator,function(){return this})})})();var Nm=Mb({nodeDimensionsIncludeLabels:!1}),ve={layoutDimensions:function(a){a=Nm(a);this.takesUpSpace()?a.nodeDimensionsIncludeLabels?(a=this.boundingBox(),a={w:a.w,h:a.h}):a={w:this.outerWidth(),h:this.outerHeight()}:
a={w:0,h:0};if(a.w===0||a.h===0)a.w=a.h=1;return a},layoutPositions:function(a,b,c){var d=this.nodes().filter(function(p){return!p.isParent()}),e=this.cy(),f=b.eles,g=function(p){return p.id()},h=ed(c,g);a.emit({type:"layoutstart",layout:a});a.animations=[];var k=b.spacingFactor&&b.spacingFactor!==1,l=function(){if(!k)return null;for(var p=Vb(),q=0;q<d.length;q++){var t=h(d[q],q),u=p,x=t.x;t=t.y;u.x1=Math.min(u.x1,x);u.x2=Math.max(u.x2,x);u.w=u.x2-u.x1;u.y1=Math.min(u.y1,t);u.y2=Math.max(u.y2,t);
u.h=u.y2-u.y1}return p}();c=ed(function(p,q){q=h(p,q);if(k){var t=Math.abs(b.spacingFactor),u=l.x1+l.w/2,x=l.y1+l.h/2;q={x:u+(q.x-u)*t,y:x+(q.y-x)*t}}b.transform!=null&&(q=b.transform(p,q));return q},g);if(b.animate){for(g=0;g<d.length;g++){var m=d[g],n=c(m,g);b.animateFilter==null||b.animateFilter(m,g)?(m=m.animation({position:n,duration:b.animationDuration,easing:b.animationEasing}),a.animations.push(m)):m.position(n)}b.fit?(e=e.animation({fit:{boundingBox:f.boundingBoxAt(c),padding:b.padding},
duration:b.animationDuration,easing:b.animationEasing}),a.animations.push(e)):b.zoom!==void 0&&b.pan!==void 0&&(e=e.animation({zoom:b.zoom,pan:b.pan,duration:b.animationDuration,easing:b.animationEasing}),a.animations.push(e));a.animations.forEach(function(p){return p.play()});a.one("layoutready",b.ready);a.emit({type:"layoutready",layout:a});dd.all(a.animations.map(function(p){return p.promise()})).then(function(){a.one("layoutstop",b.stop);a.emit({type:"layoutstop",layout:a})})}else d.positions(c),
b.fit&&e.fit(b.eles,b.padding),b.zoom!=null&&e.zoom(b.zoom),b.pan&&e.pan(b.pan),a.one("layoutready",b.ready),a.emit({type:"layoutready",layout:a}),a.one("layoutstop",b.stop),a.emit({type:"layoutstop",layout:a});return this},layout:function(a){return this.cy().makeLayout(Ra({},a,{eles:this}))}};ve.createLayout=ve.makeLayout=ve.layout;var Nb={recalculateRenderedStyle:function(a){var b=this.cy(),c=b.renderer();b=b.styleEnabled();c&&b&&c.recalculateRenderedStyle(this,a);return this},dirtyStyleCache:function(){var a=
function(c){return c._private.styleCache=null};if(this.cy().hasCompoundNodes()){var b=this.spawnSelf().merge(this.descendants()).merge(this.parents());b.merge(b.connectedEdges());b.forEach(a)}else this.forEach(function(c){a(c);c.connectedEdges().forEach(a)});return this},updateStyle:function(a){var b=this._private.cy;if(!b.styleEnabled())return this;if(b.batching())return b._private.batchStyleEles.merge(this),this;var c=b.hasCompoundNodes();b=this;a=a||a===void 0?!0:!1;c&&(b=this.spawnSelf().merge(this.descendants()).merge(this.parents()));
c=b;a?c.emitAndNotify("style"):c.emit("style");b.forEach(function(d){return d._private.styleDirty=!0});return this},cleanStyle:function(){var a=this.cy();if(a.styleEnabled())for(var b=0;b<this.length;b++){var c=this[b];c._private.styleDirty&&(c._private.styleDirty=!1,a.style().apply(c))}},parsedStyle:function(a){var b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,c=this[0],d=c.cy();if(d.styleEnabled()&&c)return c._private.styleDirty&&(c._private.styleDirty=!1,d.style().apply(c)),c=c._private.style[a],
c!=null?c:b?d.style().getDefaultProperty(a):null},numericStyle:function(a){var b=this[0];if(b.cy().styleEnabled()&&b)return a=b.pstyle(a),a.pfValue!==void 0?a.pfValue:a.value},numericStyleUnits:function(a){var b=this[0];if(b.cy().styleEnabled()&&b)return b.pstyle(a).units},renderedStyle:function(a){var b=this.cy();if(!b.styleEnabled())return this;var c=this[0];if(c)return b.style().getRenderedStyle(c,a)},style:function(a,b){var c=this.cy();if(!c.styleEnabled())return this;c=c.style();if(hb(a))c.applyBypass(this,
a,!1),this.emitAndNotify("style");else if(Qa(a)){if(b===void 0){if(b=this[0])return c.getStylePropertyValue(b,a);return}c.applyBypass(this,a,b,!1);this.emitAndNotify("style")}else if(a===void 0){if(a=this[0])return c.getRawStyle(a);return}return this},removeStyle:function(a){var b=this.cy();if(!b.styleEnabled())return this;b=b.style();if(a===void 0)for(a=0;a<this.length;a++)b.removeAllBypasses(this[a],!1);else{a=a.split(/\s+/);for(var c=0;c<this.length;c++)b.removeBypasses(this[c],a,!1)}this.emitAndNotify("style");
return this},show:function(){this.css("display","element");return this},hide:function(){this.css("display","none");return this},effectiveOpacity:function(){var a=this.cy();if(!a.styleEnabled())return 1;var b=a.hasCompoundNodes(),c=this[0];if(c){var d=c._private;a=c.pstyle("opacity").value;if(!b)return a;if(b=d.data.parent?c.parents():null)for(c=0;c<b.length;c++)a*=b[c].pstyle("opacity").value;return a}},transparent:function(){if(!this.cy().styleEnabled())return!1;var a=this[0],b=a.cy().hasCompoundNodes();
if(a)return b?a.effectiveOpacity()===0:a.pstyle("opacity").value===0},backgrounding:function(){return this.cy().styleEnabled()?this[0]._private.backgrounding?!0:!1:!1}},pd=Sd("eleTakesUpSpace",function(a){return a.pstyle("display").value==="element"&&a.width()!==0&&(a.isNode()?a.height()!==0:!0)});Nb.takesUpSpace=Td("takesUpSpace",Ge({ok:pd}));var Om=Sd("eleInteractive",function(a){return a.pstyle("events").value==="yes"&&a.pstyle("visibility").value==="visible"&&pd(a)}),Pm=Sd("parentInteractive",
function(a){return a.pstyle("visibility").value==="visible"&&pd(a)});Nb.interactive=Td("interactive",Ge({ok:Om,parentOk:Pm,edgeOkViaNode:pd}));Nb.noninteractive=function(){var a=this[0];if(a)return!a.interactive()};var Qm=Sd("eleVisible",function(a){return a.pstyle("visibility").value==="visible"&&a.pstyle("opacity").pfValue!==0&&pd(a)});Nb.visible=Td("visible",Ge({ok:Qm,edgeOkViaNode:pd}));Nb.hidden=function(){var a=this[0];if(a)return!a.visible()};Nb.isBundledBezier=Td("isBundledBezier",function(){return this.cy().styleEnabled()?
!this.removed()&&this.pstyle("curve-style").value==="bezier"&&this.takesUpSpace():!1});Nb.bypass=Nb.css=Nb.style;Nb.renderedCss=Nb.renderedStyle;Nb.removeBypass=Nb.removeCss=Nb.removeStyle;Nb.pstyle=Nb.parsedStyle;var vc={};ad({field:"locked",overrideField:function(a){return a.cy().autolock()?!0:void 0},on:"lock",off:"unlock"});ad({field:"grabbable",overrideField:function(a){return a.cy().autoungrabify()||a.pannable()?!1:void 0},on:"grabify",off:"ungrabify"});ad({field:"selected",ableField:"selectable",
overrideAble:function(a){return a.cy().autounselectify()?!1:void 0},on:"select",off:"unselect"});ad({field:"selectable",overrideField:function(a){return a.cy().autounselectify()?!1:void 0},on:"selectify",off:"unselectify"});vc.deselect=vc.unselect;vc.grabbed=function(){var a=this[0];if(a)return a._private.grabbed};ad({field:"active",on:"activate",off:"unactivate"});ad({field:"pannable",on:"panify",off:"unpanify"});vc.inactive=function(){var a=this[0];if(a)return!a._private.active};var Rb={},bk=function(a){return function(b){for(var c=
[],d=0;d<this.length;d++){var e=this[d];if(e.isNode()){for(var f=!1,g=e.connectedEdges(),h=0;h<g.length;h++){var k=g[h],l=k.source();k=k.target();if(a.noIncomingEdges&&k===e&&l!==e||a.noOutgoingEdges&&l===e&&k!==e){f=!0;break}}f||c.push(e)}}return this.spawn(c,!0).filter(b)}},ck=function(a){return function(b){for(var c=[],d=0;d<this.length;d++){var e=this[d];if(e.isNode())for(var f=e.connectedEdges(),g=0;g<f.length;g++){var h=f[g],k=h.source(),l=h.target();a.outgoing&&k===e?(c.push(h),c.push(l)):
a.incoming&&l===e&&(c.push(h),c.push(k))}}return this.spawn(c,!0).filter(b)}},dk=function(a){return function(b){for(var c=this,d=[],e={};;){c=a.outgoing?c.outgoers():c.incomers();if(c.length===0)break;for(var f=!1,g=0;g<c.length;g++){var h=c[g],k=h.id();e[k]||(e[k]=!0,d.push(h),f=!0)}if(!f)break}return this.spawn(d,!0).filter(b)}};Rb.clearTraversalCache=function(){for(var a=0;a<this.length;a++)this[a]._private.traversalCache=null};Ra(Rb,{roots:bk({noIncomingEdges:!0}),leaves:bk({noOutgoingEdges:!0}),
outgoers:bc(ck({outgoing:!0}),"outgoers"),successors:dk({outgoing:!0}),incomers:bc(ck({incoming:!0}),"incomers"),predecessors:dk({})});Ra(Rb,{neighborhood:bc(function(a){for(var b=[],c=this.nodes(),d=0;d<c.length;d++)for(var e=c[d],f=e.connectedEdges(),g=0;g<f.length;g++){var h=f[g],k=h.source(),l=h.target();k=e===k?l:k;k.length>0&&b.push(k[0]);b.push(h[0])}return this.spawn(b,!0).filter(a)},"neighborhood"),closedNeighborhood:function(a){return this.neighborhood().add(this).filter(a)},openNeighborhood:function(a){return this.neighborhood(a)}});
Rb.neighbourhood=Rb.neighborhood;Rb.closedNeighbourhood=Rb.closedNeighborhood;Rb.openNeighbourhood=Rb.openNeighborhood;Ra(Rb,{source:bc(function(a){var b=this[0],c;b&&(c=b._private.source||b.cy().collection());return c&&a?c.filter(a):c},"source"),target:bc(function(a){var b=this[0],c;b&&(c=b._private.target||b.cy().collection());return c&&a?c.filter(a):c},"target"),sources:Zh({attr:"source"}),targets:Zh({attr:"target"})});Ra(Rb,{edgesWith:bc($h(),"edgesWith"),edgesTo:bc($h({thisIsSrc:!0}),"edgesTo")});
Ra(Rb,{connectedEdges:bc(function(a){for(var b=[],c=0;c<this.length;c++){var d=this[c];if(d.isNode()){d=d._private.edges;for(var e=0;e<d.length;e++)b.push(d[e])}}return this.spawn(b,!0).filter(a)},"connectedEdges"),connectedNodes:bc(function(a){for(var b=[],c=0;c<this.length;c++){var d=this[c];d.isEdge()&&(b.push(d.source()[0]),b.push(d.target()[0]))}return this.spawn(b,!0).filter(a)},"connectedNodes"),parallelEdges:bc(ai(),"parallelEdges"),codirectedEdges:bc(ai({codirected:!0}),"codirectedEdges")});
Ra(Rb,{components:function(a){var b=this,c=b.cy(),d=c.collection(),e=a==null?b.nodes():a.nodes(),f=[];a!=null&&e.empty()&&(e=a.sources());var g=function(h,k){d.merge(h);e.unmerge(h);k.merge(h)};if(e.empty())return b.spawn();a=function(){var h=c.collection();f.push(h);var k=e[0];g(k,h);b.bfs({directed:!1,roots:k,visit:function(l){return g(l,h)}});h.forEach(function(l){l.connectedEdges().forEach(function(m){b.has(m)&&h.has(m.source())&&h.has(m.target())&&h.merge(m)})})};do a();while(e.length>0);return f},
component:function(){var a=this[0];return a.cy().mutableElements().components(a)[0]}});Rb.componentsOf=Rb.components;var Lb=function(a,b){var c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,d=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(a===void 0)Ab("A collection must have a reference to the core");else{var e=new rc,f=!1;if(!b)b=[];else if(b.length>0&&hb(b[0])&&!Cd(b[0])){f=!0;for(var g=[],h=new Zc,k=0,l=b.length;k<l;k++){var m=b[k];m.data==null&&(m.data={});var n=m.data;
if(n.id==null)n.id=aj();else if(a.hasElementWithId(n.id)||h.has(n.id))continue;m=new de(a,m,!1);g.push(m);h.add(n.id)}b=g}g=this.length=0;for(h=b.length;g<h;g++)k=b[g][0],k!=null&&(l=k._private.data.id,c&&e.has(l)||(c&&e.set(l,{index:this.length,ele:k}),this[this.length]=k,this.length++));this._private={eles:this,cy:a,get map(){this.lazyMap==null&&this.rebuildMap();return this.lazyMap},set map(p){this.lazyMap=p},rebuildMap:function(){for(var p=this.lazyMap=new rc,q=this.eles,t=0;t<q.length;t++){var u=
q[t];p.set(u.id(),{index:t,ele:u})}}};c&&(this._private.map=e);f&&!d&&this.restore()}},tb=de.prototype=Lb.prototype=Object.create(Array.prototype);tb.instanceString=function(){return"collection"};tb.spawn=function(a,b){return new Lb(this.cy(),a,b)};tb.spawnSelf=function(){return this.spawn(this)};tb.cy=function(){return this._private.cy};tb.renderer=function(){return this._private.cy.renderer()};tb.element=function(){return this[0]};tb.collection=function(){return Pi(this)?this:new Lb(this._private.cy,
[this])};tb.unique=function(){return new Lb(this._private.cy,this,!0)};tb.hasElementWithId=function(a){return this._private.map.has(""+a)};tb.getElementById=function(a){var b=this._private.cy;return(a=this._private.map.get(""+a))?a.ele:new Lb(b)};tb.$id=tb.getElementById;tb.poolIndex=function(){return this._private.cy._private.elements._private.map.get(this[0]._private.data.id).index};tb.indexOf=function(a){return this._private.map.get(a[0]._private.data.id).index};tb.indexOfId=function(a){return this._private.map.get(""+
a).index};tb.json=function(a){var b=this.element(),c=this.cy();if(b==null&&a)return this;if(b!=null){var d=b._private;if(hb(a)){c.startBatch();if(a.data){b.data(a.data);var e=d.data;if(b.isEdge()){var f=!1,g={},h=a.data.source,k=a.data.target;h!=null&&h!=e.source&&(g.source=""+h,f=!0);k!=null&&k!=e.target&&(g.target=""+k,f=!0);f&&(b=b.move(g))}else f=a.data.parent,"parent"in a.data&&(f!=null||e.parent!=null)&&f!=e.parent&&(f===void 0&&(f=null),f!=null&&(f=""+f),b=b.move({parent:f}))}a.position&&b.position(a.position);
e=function(n,p,q){var t=a[n];if(t!=null&&t!==d[n])if(t)b[p]();else b[q]()};e("removed","remove","restore");e("selected","select","unselect");e("selectable","selectify","unselectify");e("locked","lock","unlock");e("grabbable","grabify","ungrabify");e("pannable","panify","unpanify");a.classes!=null&&b.classes(a.classes);c.endBatch();return this}if(a===void 0){var l={data:mc(d.data),position:mc(d.position),group:d.group,removed:d.removed,selected:d.selected,selectable:d.selectable,locked:d.locked,grabbable:d.grabbable,
pannable:d.pannable,classes:""},m=0;d.classes.forEach(function(n){return l.classes+=m++===0?n:" "+n});return l}}};tb.jsons=function(){for(var a=[],b=0;b<this.length;b++){var c=this[b].json();a.push(c)}return a};tb.clone=function(){for(var a=this.cy(),b=[],c=0;c<this.length;c++){var d=this[c].json();d=new de(a,d,!1);b.push(d)}return new Lb(a,b)};tb.copy=tb.clone;tb.restore=function(){for(var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:
!0,c=this.cy(),d=c._private,e=[],f=[],g,h=0,k=this.length;h<k;h++){var l=this[h];if(!b||l.removed())l.isNode()?e.push(l):f.push(l)}g=e.concat(f);var m;f=function(){g.splice(m,1);m--};for(m=0;m<g.length;m++){h=g[m];k=h._private;var n=k.data;h.clearTraversalCache();if(b||k.removed)if(n.id===void 0)n.id=aj();else if(Ba(n.id))n.id=""+n.id;else if(xc(n.id)||!Qa(n.id)){Ab("Can not create element with invalid string ID `"+n.id+"`");f();continue}else if(c.hasElementWithId(n.id)){Ab("Can not create second element with ID `"+
n.id+"`");f();continue}l=n.id;if(h.isNode()){var p=k.position;p.x==null&&(p.x=0);p.y==null&&(p.y=0)}if(h.isEdge()){p=h;for(var q=["source","target"],t=q.length,u=!1,x=0;x<t;x++){var v=q[x],w=n[v];Ba(w)&&(w=n[v]=""+n[v]);w==null||w===""?(Ab("Can not create edge `"+l+"` with unspecified "+v),u=!0):c.hasElementWithId(w)||(Ab("Can not create edge `"+l+"` with nonexistant "+v+" `"+w+"`"),u=!0)}if(u){f();continue}q=c.getElementById(n.source);n=c.getElementById(n.target);q.same(n)?q._private.edges.push(p):
(q._private.edges.push(p),n._private.edges.push(p));p._private.source=q;p._private.target=n}k.map=new rc;k.map.set(l,{ele:h,index:0});k.removed=!1;b&&c.addToPool(h)}for(f=0;f<e.length;f++)if(h=e[f],k=h._private.data,Ba(k.parent)&&(k.parent=""+k.parent),l=k.parent,l!=null||h._private.parent)if(l=h._private.parent?c.collection().merge(h._private.parent):c.getElementById(l),l.empty())k.parent=void 0;else if(l[0].removed())mb("Node added with missing parent, reference to parent removed"),k.parent=void 0,
h._private.parent=null;else{n=!1;for(p=l;!p.empty();){if(h.same(p)){n=!0;k.parent=void 0;break}p=p.parent()}n||(l[0]._private.children.push(h),h._private.parent=l[0],d.hasCompoundNodes=!0)}if(g.length>0){e=g.length===this.length?this:new Lb(c,g);for(f=0;f<e.length;f++)h=e[f],h.isNode()||(h.parallelEdges().clearTraversalCache(),h.source().clearTraversalCache(),h.target().clearTraversalCache());(d.hasCompoundNodes?c.collection().merge(e).merge(e.connectedNodes()).merge(e.parent()):e).dirtyCompoundBoundsCache().dirtyBoundingBoxCache().updateStyle(a);
a?e.emitAndNotify("add"):b&&e.emit("add")}return this};tb.removed=function(){var a=this[0];return a&&a._private.removed};tb.inside=function(){var a=this[0];return a&&!a._private.removed};tb.remove=function(){function a(t){var u=g[t.id()];if(!(e&&t.removed()||u))if(g[t.id()]=!0,t.isNode()){f.push(t);u=t._private.edges;for(var x=0;x<u.length;x++)a(u[x]);t=t._private.children;for(u=0;u<t.length;u++)a(t[u])}else f.unshift(t)}function b(t,u){zc(t._private.edges,u);t.clearTraversalCache()}function c(t,
u){u=u[0];t=t[0];var x=t._private.children,v=t.id();zc(x,u);u._private.parent=null;m.ids[v]||(m.ids[v]=!0,m.push(t))}for(var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,f=[],g={},h=this._private.cy,k=0,l=this.length;k<l;k++)a(this[k]);var m=[];m.ids={};this.dirtyCompoundBoundsCache();e&&h.removeFromPool(f);for(k=0;k<f.length;k++){l=f[k];if(l.isEdge()){var n=l.source()[0],p=l.target()[0];b(n,l);b(p,l);n=l.parallelEdges();for(p=
0;p<n.length;p++){var q=n[p];q.clearTraversalCache();q.isBundledBezier()&&q.dirtyBoundingBoxCache()}}else n=l.parent(),n.length!==0&&c(n,l);e&&(l._private.removed=!0)}k=h._private.elements;h._private.hasCompoundNodes=!1;for(l=0;l<k.length;l++)if(k[l].isParent()){h._private.hasCompoundNodes=!0;break}h=new Lb(this.cy(),f);h.size()>0&&(d?h.emitAndNotify("remove"):e&&h.emit("remove"));for(d=0;d<m.length;d++)k=m[d],e&&k.removed()||k.updateStyle();return h};tb.move=function(a){var b=this._private.cy,c=
this,d=function(l){return l==null?l:""+l};if(a.source!==void 0||a.target!==void 0){var e=d(a.source),f=d(a.target),g=e!=null&&b.hasElementWithId(e),h=f!=null&&b.hasElementWithId(f);if(g||h)b.batch(function(){c.remove(!1,!1);c.emitAndNotify("moveout");for(var l=0;l<c.length;l++){var m=c[l],n=m._private.data;m.isEdge()&&(g&&(n.source=e),h&&(n.target=f))}c.restore(!1,!1)}),c.emitAndNotify("move")}else if(a.parent!==void 0&&(a=d(a.parent),a===null||b.hasElementWithId(a))){var k=a===null?void 0:a;b.batch(function(){var l=
c.remove(!1,!1);l.emitAndNotify("moveout");for(var m=0;m<c.length;m++){var n=c[m],p=n._private.data;n.isNode()&&(p.parent=k)}l.restore(!1,!1)});c.emitAndNotify("move")}return this};[xj,Dm,oe,Ec,lf,Kj,qe,Km,Zj,ib,{isNode:function(){return this.group()==="nodes"},isEdge:function(){return this.group()==="edges"},isLoop:function(){return this.isEdge()&&this.source()[0]===this.target()[0]},isSimple:function(){return this.isEdge()&&this.source()[0]!==this.target()[0]},group:function(){var a=this[0];if(a)return a._private.group}},
ue,ve,Nb,vc,Rb].forEach(function(a){Ra(tb,a)});var Rm=function(){function a(c,d,e){var f=c.v+e.dv*d;return{dx:f,dv:-c.tension*(c.x+e.dx*d)-c.friction*f}}function b(c,d){var e={dx:c.v,dv:-c.tension*c.x-c.friction*c.v},f=a(c,d*.5,e),g=a(c,d*.5,f),h=a(c,d,g),k=1/6*(e.dv+2*(f.dv+g.dv)+h.dv);c.x+=1/6*(e.dx+2*(f.dx+g.dx)+h.dx)*d;c.v+=k*d;return c}return function g(d,e,f){var h={x:-1,v:0,tension:null,friction:null},k=[0],l=0,m;d=parseFloat(d)||500;e=parseFloat(e)||20;f=f||null;h.tension=d;h.friction=e;(m=
f!==null)?(l=g(d,e),d=l/f*.016):d=.016;for(;;){var n=b(n||h,d);k.push(1+n.x);l+=16;if(!(Math.abs(n.x)>1E-4&&Math.abs(n.v)>1E-4))break}return m?function(p){return k[p*(k.length-1)|0]}:l}}(),ub=function(a,b,c,d){var e=Sk(a,b,c,d);return function(f,g,h){return f+(g-f)*e(h)}},Ud={linear:function(a,b,c){return a+(b-a)*c},ease:ub(.25,.1,.25,1),"ease-in":ub(.42,0,1,1),"ease-out":ub(0,0,.58,1),"ease-in-out":ub(.42,0,.58,1),"ease-in-sine":ub(.47,0,.745,.715),"ease-out-sine":ub(.39,.575,.565,1),"ease-in-out-sine":ub(.445,
.05,.55,.95),"ease-in-quad":ub(.55,.085,.68,.53),"ease-out-quad":ub(.25,.46,.45,.94),"ease-in-out-quad":ub(.455,.03,.515,.955),"ease-in-cubic":ub(.55,.055,.675,.19),"ease-out-cubic":ub(.215,.61,.355,1),"ease-in-out-cubic":ub(.645,.045,.355,1),"ease-in-quart":ub(.895,.03,.685,.22),"ease-out-quart":ub(.165,.84,.44,1),"ease-in-out-quart":ub(.77,0,.175,1),"ease-in-quint":ub(.755,.05,.855,.06),"ease-out-quint":ub(.23,1,.32,1),"ease-in-out-quint":ub(.86,0,.07,1),"ease-in-expo":ub(.95,.05,.795,.035),"ease-out-expo":ub(.19,
1,.22,1),"ease-in-out-expo":ub(1,0,0,1),"ease-in-circ":ub(.6,.04,.98,.335),"ease-out-circ":ub(.075,.82,.165,1),"ease-in-out-circ":ub(.785,.135,.15,.86),spring:function(a,b,c){if(c===0)return Ud.linear;var d=Rm(a,b,c);return function(e,f,g){return e+(f-e)*d(g)}},"cubic-bezier":ub},Sm={animate:nb.animate(),animation:nb.animation(),animated:nb.animated(),clearQueue:nb.clearQueue(),delay:nb.delay(),delayAnimation:nb.delayAnimation(),stop:nb.stop(),addToAnimationPool:function(a){this.styleEnabled()&&this._private.aniEles.merge(a)},
stopAnimationLoop:function(){this._private.animationsRunning=!1},startAnimationLoop:function(){function a(){b._private.animationsRunning&&ae(function(d){di(d,b);a()})}var b=this;b._private.animationsRunning=!0;if(b.styleEnabled()){var c=b.renderer();c&&c.beforeRender?c.beforeRender(function(d,e){di(e,b)},c.beforeRenderPriorities.animations):a()}}},Tm={qualifierCompare:function(a,b){return a==null||b==null?a==null&&b==null:a.sameText(b)},eventMatches:function(a,b,c){b=b.qualifier;return b!=null?a!==
c.target&&Cd(c.target)&&b.matches(c.target):!0},addEventFields:function(a,b){b.cy=a;b.target=a},callbackContext:function(a,b,c){return b.qualifier!=null?c.target:a}},we=function(a){return Qa(a)?new Cc(a):a},ek={createEmitter:function(){var a=this._private;a.emitter||(a.emitter=new Rd(Tm,this));return this},emitter:function(){return this._private.emitter},on:function(a,b,c){this.emitter().on(a,we(b),c);return this},removeListener:function(a,b,c){this.emitter().removeListener(a,we(b),c);return this},
removeAllListeners:function(){this.emitter().removeAllListeners();return this},one:function(a,b,c){this.emitter().one(a,we(b),c);return this},once:function(a,b,c){this.emitter().one(a,we(b),c);return this},emit:function(a,b){this.emitter().emit(a,b);return this},emitAndNotify:function(a,b){this.emit(a);this.notify(a,b);return this}};nb.eventAliasesOn(ek);var nf={png:function(a){var b=this._private.renderer;a=a||{};return b.png(a)},jpg:function(a){var b=this._private.renderer;a=a||{};a.bg=a.bg||"#fff";
return b.jpg(a)}};nf.jpeg=nf.jpg;var xe={layout:function(a){if(a==null)Ab("Layout options must be specified to make a layout");else if(a.name==null)Ab("A `name` must be specified to make a layout");else{var b=a.name,c=this.extension("layout",b);if(c==null)Ab("No such layout `"+b+"` found.  Did you forget to import it and `cytoscape.use()` it?");else return b=Qa(a.eles)?this.$(a.eles):a.eles!=null?a.eles:this.$(),new c(Ra({},a,{cy:this,eles:b}))}}};xe.createLayout=xe.makeLayout=xe.layout;var Um=Mb({hideEdgesOnViewport:!1,
textureOnViewport:!1,motionBlur:!1,motionBlurOpacity:.05,pixelRatio:void 0,desktopTapThreshold:4,touchTapThreshold:8,wheelSensitivity:1,debug:!1,showFps:!1,webgl:!1,webglDebug:!1,webglDebugShowAtlases:!1,webglTexSize:2048,webglTexRows:36,webglTexRowsNodes:18,webglBatchSize:2048,webglTexPerBatch:14,webglBgColor:[255,255,255]}),of={renderTo:function(a,b,c,d){this._private.renderer.renderTo(a,b,c,d);return this},renderer:function(){return this._private.renderer},forceRender:function(){this.notify("draw");
return this},resize:function(){this.invalidateSize();this.emitAndNotify("resize");return this},initRenderer:function(a){var b=this.extension("renderer",a.name);b==null?Ab("Can not initialise: No such renderer `".concat(a.name,"` found. Did you forget to import it and `cytoscape.use()` it?")):(a.wheelSensitivity!==void 0&&mb("You have set a custom wheel sensitivity.  This will make your app zoom unnaturally when using mainstream mice.  You should change this value from the default only if you can guarantee that all your users will use the same hardware and OS configuration as your current machine."),
a=Um(a),a.cy=this,this._private.renderer=new b(a),this.notify("init"))},destroyRenderer:function(){this.notify("destroy");var a=this.container();if(a)for(a._cyreg=null;a.childNodes.length>0;)a.removeChild(a.childNodes[0]);this._private.renderer=null;this.mutableElements().forEach(function(b){b=b._private;b.rscratch={};b.rstyle={};b.animation.current=[];b.animation.queue=[]})},onRender:function(a){return this.on("render",a)},offRender:function(a){return this.off("render",a)}};of.invalidateDimensions=
of.resize;var ye={collection:function(a,b){return Qa(a)?this.$(a):Yb(a)?a.collection():rb(a)?(b||(b={}),new Lb(this,a,b.unique,b.removed)):new Lb(this)},nodes:function(a){var b=this.$(function(c){return c.isNode()});return a?b.filter(a):b},edges:function(a){var b=this.$(function(c){return c.isEdge()});return a?b.filter(a):b},$:function(a){var b=this._private.elements;return a?b.filter(a):b.spawnSelf()},mutableElements:function(){return this._private.elements}};ye.elements=ye.filter=ye.$;var pf={getRenderedStyle:function(a,
b){return b?this.getStylePropertyValue(a,b,!0):this.getRawStyle(a,!0)},getRawStyle:function(a,b){if(a=a[0]){for(var c={},d=0;d<this.properties.length;d++){var e=this.properties[d],f=this.getStylePropertyValue(a,e.name,b);f!=null&&(c[e.name]=f,c[$d(e.name)]=f)}return c}},getIndexedStyle:function(a,b,c,d){d=a.pstyle(b)[c][d];return d!=null?d:a.cy().style().getDefaultProperty(b)[c][0]},getStylePropertyValue:function(a,b,c){if(a=a[0]){var d=this.properties[b];d.alias&&(d=d.pointsTo);b=d.type;var e=a.pstyle(d.name);
if(e){d=e.value;var f=e.units;e=e.strValue;if(c&&b.number&&d!=null&&Ba(d)){var g=a.cy().zoom();return((a=rb(d))?f.every(function(h){return h!=null}):f!=null)?a?d.map(function(h,k){return h*g+f[k]}).join(" "):d*g+f:a?d.map(function(h){return Qa(h)?h:""+h*g}).join(" "):""+d*g}if(e!=null)return e}return null}},getAnimationStartStyle:function(a,b){for(var c={},d=0;d<b.length;d++){var e=b[d].name,f=a.pstyle(e);f!==void 0&&(f=hb(f)?this.parse(e,f.strValue):this.parse(e,f));f&&(c[e]=f)}return c},getPropsList:function(a){var b=
[],c=this.properties;if(a)for(var d=Object.keys(a),e=0;e<d.length;e++){var f=d[e],g=a[f];f=c[f]||c[Se(f)];(g=this.parse(f.name,g))&&b.push(g)}return b},getNonDefaultPropertiesHash:function(a,b,c){c=c.slice();var d,e;for(d=0;d<b.length;d++){var f=b[d];f=a.pstyle(f,!1);if(f!=null)if(f.pfValue!=null)c[0]=fd(g,c[0]),c[1]=gd(g,c[1]);else for(f=f.strValue,e=0;e<f.length;e++){var g=f.charCodeAt(e);c[0]=fd(g,c[0]);c[1]=gd(g,c[1])}}return c}};pf.getPropertiesHash=pf.getNonDefaultPropertiesHash;var Eb={};(function(){var a=
function(pa){return"^"+pa+"\\s*\\(\\s*([\\w\\.]+)\\s*\\)$"},b=function(pa){return"^"+pa+"\\s*\\(([\\w\\.]+)\\s*\\,\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?)))\\s*\\,\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?)))\\s*,\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))|\\w+|rgb[a]?\\((?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%]?)\\s*,\\s*(?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%]?)\\s*,\\s*(?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%]?)(?:\\s*,\\s*(?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))))?\\)|hsl[a]?\\((?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?)))\\s*,\\s*(?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%])\\s*,\\s*(?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%])(?:\\s*,\\s*(?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))))?\\)|\\#[0-9a-fA-F]{3}|\\#[0-9a-fA-F]{6})\\s*\\,\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))|\\w+|rgb[a]?\\((?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%]?)\\s*,\\s*(?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%]?)\\s*,\\s*(?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%]?)(?:\\s*,\\s*(?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))))?\\)|hsl[a]?\\((?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?)))\\s*,\\s*(?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%])\\s*,\\s*(?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%])(?:\\s*,\\s*(?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))))?\\)|\\#[0-9a-fA-F]{3}|\\#[0-9a-fA-F]{6})\\)$"},
c=["^url\\s*\\(\\s*['\"]?(.+?)['\"]?\\s*\\)$","^(none)$","^(.+)$"];Eb.types={time:{number:!0,min:0,units:"s|ms",implicitUnits:"ms"},percent:{number:!0,min:0,max:100,units:"%",implicitUnits:"%"},percentages:{number:!0,min:0,max:100,units:"%",implicitUnits:"%",multiple:!0},zeroOneNumber:{number:!0,min:0,max:1,unitless:!0},zeroOneNumbers:{number:!0,min:0,max:1,unitless:!0,multiple:!0},nOneOneNumber:{number:!0,min:-1,max:1,unitless:!0},nonNegativeInt:{number:!0,min:0,integer:!0,unitless:!0},nonNegativeNumber:{number:!0,
min:0,unitless:!0},position:{enums:["parent","origin"]},nodeSize:{number:!0,min:0,enums:["label"]},number:{number:!0,unitless:!0},numbers:{number:!0,unitless:!0,multiple:!0},positiveNumber:{number:!0,unitless:!0,min:0,strictMin:!0},size:{number:!0,min:0},bidirectionalSize:{number:!0},bidirectionalSizeMaybePercent:{number:!0,allowPercent:!0},bidirectionalSizes:{number:!0,multiple:!0},sizeMaybePercent:{number:!0,min:0,allowPercent:!0},axisDirection:{enums:"horizontal leftward rightward vertical upward downward auto".split(" ")},
axisDirectionExplicit:{enums:["leftward","rightward","upward","downward"]},axisDirectionPrimary:{enums:["horizontal","vertical"]},paddingRelativeTo:{enums:["width","height","average","min","max"]},bgWH:{number:!0,min:0,allowPercent:!0,enums:["auto"],multiple:!0},bgPos:{number:!0,allowPercent:!0,multiple:!0},bgRelativeTo:{enums:["inner","include-padding"],multiple:!0},bgRepeat:{enums:["repeat","repeat-x","repeat-y","no-repeat"],multiple:!0},bgFit:{enums:["none","contain","cover"],multiple:!0},bgCrossOrigin:{enums:["anonymous",
"use-credentials","null"],multiple:!0},bgClip:{enums:["none","node"],multiple:!0},bgContainment:{enums:["inside","over"],multiple:!0},color:{color:!0},colors:{color:!0,multiple:!0},fill:{enums:["solid","linear-gradient","radial-gradient"]},bool:{enums:["yes","no"]},bools:{enums:["yes","no"],multiple:!0},lineStyle:{enums:["solid","dotted","dashed"]},lineCap:{enums:["butt","round","square"]},linePosition:{enums:["center","inside","outside"]},lineJoin:{enums:["round","bevel","miter"]},borderStyle:{enums:["solid",
"dotted","dashed","double"]},curveStyle:{enums:"bezier unbundled-bezier haystack segments straight straight-triangle taxi round-segments round-taxi".split(" ")},radiusType:{enums:["arc-radius","influence-radius"],multiple:!0},fontFamily:{regex:'^([\\w- \\"]+(?:\\s*,\\s*[\\w- \\"]+)*)$'},fontStyle:{enums:["italic","normal","oblique"]},fontWeight:{enums:["normal","bold","bolder","lighter","100","200","300","400","500","600","800","900",100,200,300,400,500,600,700,800,900]},textDecoration:{enums:["none",
"underline","overline","line-through"]},textTransform:{enums:["none","uppercase","lowercase"]},textWrap:{enums:["none","wrap","ellipsis"]},textOverflowWrap:{enums:["whitespace","anywhere"]},textBackgroundShape:{enums:["rectangle","roundrectangle","round-rectangle"]},nodeShape:{enums:"rectangle roundrectangle round-rectangle cutrectangle cut-rectangle bottomroundrectangle bottom-round-rectangle barrel ellipse triangle round-triangle square pentagon round-pentagon hexagon round-hexagon concavehexagon concave-hexagon heptagon round-heptagon octagon round-octagon tag round-tag star diamond round-diamond vee rhomboid right-rhomboid polygon".split(" ")},
overlayShape:{enums:["roundrectangle","round-rectangle","ellipse"]},cornerRadius:{number:!0,min:0,units:"px|em",implicitUnits:"px",enums:["auto"]},compoundIncludeLabels:{enums:["include","exclude"]},arrowShape:{enums:"tee triangle triangle-tee circle-triangle triangle-cross triangle-backcurve vee square circle diamond chevron none".split(" ")},arrowFill:{enums:["filled","hollow"]},arrowWidth:{number:!0,units:"%|px|em",implicitUnits:"px",enums:["match-line"]},display:{enums:["element","none"]},visibility:{enums:["hidden",
"visible"]},zCompoundDepth:{enums:["bottom","orphan","auto","top"]},zIndexCompare:{enums:["auto","manual"]},valign:{enums:["top","center","bottom"]},halign:{enums:["left","center","right"]},justification:{enums:["left","center","right","auto"]},text:{string:!0},data:{mapping:!0,regex:a("data")},layoutData:{mapping:!0,regex:a("layoutData")},scratch:{mapping:!0,regex:a("scratch")},mapData:{mapping:!0,regex:b("mapData")},mapLayoutData:{mapping:!0,regex:b("mapLayoutData")},mapScratch:{mapping:!0,regex:b("mapScratch")},
fn:{mapping:!0,fn:!0},url:{regexes:c,singleRegexMatchValue:!0},urls:{regexes:c,singleRegexMatchValue:!0,multiple:!0},propList:{propList:!0},angle:{number:!0,units:"deg|rad",implicitUnits:"rad"},textRotation:{number:!0,units:"deg|rad",implicitUnits:"rad",enums:["none","autorotate"]},polygonPointList:{number:!0,multiple:!0,evenMultiple:!0,min:-1,max:1,unitless:!0},edgeDistances:{enums:["intersection","node-position","endpoints"]},edgeEndpoint:{number:!0,multiple:!0,units:"%|px|em|deg|rad",implicitUnits:"px",
enums:["inside-to-node","outside-to-node","outside-to-node-or-label","outside-to-line","outside-to-line-or-label"],singleEnum:!0,validate:function(pa,ra){switch(pa.length){case 2:return ra[0]!=="deg"&&ra[0]!=="rad"&&ra[1]!=="deg"&&ra[1]!=="rad";case 1:return Qa(pa[0])||ra[0]==="deg"||ra[0]==="rad";default:return!1}}},easing:{regexes:["^(spring)\\s*\\(\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?)))\\s*,\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?)))\\s*\\)$","^(cubic-bezier)\\s*\\(\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?)))\\s*,\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?)))\\s*,\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?)))\\s*,\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?)))\\s*\\)$"],
enums:"linear ease ease-in ease-out ease-in-out ease-in-sine ease-out-sine ease-in-out-sine ease-in-quad ease-out-quad ease-in-out-quad ease-in-cubic ease-out-cubic ease-in-out-cubic ease-in-quart ease-out-quart ease-in-out-quart ease-in-quint ease-out-quint ease-in-out-quint ease-in-expo ease-out-expo ease-in-out-expo ease-in-circ ease-out-circ ease-in-out-circ".split(" ")},gradientDirection:{enums:"to-bottom to-top to-left to-right to-bottom-right to-bottom-left to-top-right to-top-left to-right-bottom to-left-bottom to-right-top to-left-top".split(" ")},
boundsExpansion:{number:!0,multiple:!0,min:0,validate:function(pa){pa=pa.length;return pa===1||pa===2||pa===4}}};var d=function(pa,ra){return pa!=null&&ra!=null||pa===ra?pa==0&&ra!=0?!0:pa!=0&&ra==0?!0:!1:!0},e=function(pa,ra){return pa!=ra},f=Eb.types;a=[{name:"label",type:f.text,triggersBounds:e,triggersZOrder:function(pa,ra){pa=xc(pa);ra=xc(ra);return pa&&!ra||!pa&&ra}},{name:"text-rotation",type:f.textRotation,triggersBounds:e},{name:"text-margin-x",type:f.bidirectionalSize,triggersBounds:e},
{name:"text-margin-y",type:f.bidirectionalSize,triggersBounds:e}];b=[{name:"source-label",type:f.text,triggersBounds:e},{name:"source-text-rotation",type:f.textRotation,triggersBounds:e},{name:"source-text-margin-x",type:f.bidirectionalSize,triggersBounds:e},{name:"source-text-margin-y",type:f.bidirectionalSize,triggersBounds:e},{name:"source-text-offset",type:f.size,triggersBounds:e}];c=[{name:"target-label",type:f.text,triggersBounds:e},{name:"target-text-rotation",type:f.textRotation,triggersBounds:e},
{name:"target-text-margin-x",type:f.bidirectionalSize,triggersBounds:e},{name:"target-text-margin-y",type:f.bidirectionalSize,triggersBounds:e},{name:"target-text-offset",type:f.size,triggersBounds:e}];var g=[{name:"font-family",type:f.fontFamily,triggersBounds:e},{name:"font-style",type:f.fontStyle,triggersBounds:e},{name:"font-weight",type:f.fontWeight,triggersBounds:e},{name:"font-size",type:f.size,triggersBounds:e},{name:"text-transform",type:f.textTransform,triggersBounds:e},{name:"text-wrap",
type:f.textWrap,triggersBounds:e},{name:"text-overflow-wrap",type:f.textOverflowWrap,triggersBounds:e},{name:"text-max-width",type:f.size,triggersBounds:e},{name:"text-outline-width",type:f.size,triggersBounds:e},{name:"line-height",type:f.positiveNumber,triggersBounds:e}],h=[{name:"text-valign",type:f.valign,triggersBounds:e},{name:"text-halign",type:f.halign,triggersBounds:e},{name:"color",type:f.color},{name:"text-outline-color",type:f.color},{name:"text-outline-opacity",type:f.zeroOneNumber},
{name:"text-background-color",type:f.color},{name:"text-background-opacity",type:f.zeroOneNumber},{name:"text-background-padding",type:f.size,triggersBounds:e},{name:"text-border-opacity",type:f.zeroOneNumber},{name:"text-border-color",type:f.color},{name:"text-border-width",type:f.size,triggersBounds:e},{name:"text-border-style",type:f.borderStyle,triggersBounds:e},{name:"text-background-shape",type:f.textBackgroundShape,triggersBounds:e},{name:"text-justification",type:f.justification},{name:"box-select-labels",
type:f.bool,triggersBounds:e}],k=[{name:"events",type:f.bool,triggersZOrder:e},{name:"text-events",type:f.bool,triggersZOrder:e}],l=[{name:"display",type:f.display,triggersZOrder:e,triggersBounds:e,triggersBoundsOfConnectedEdges:e,triggersBoundsOfParallelEdges:function(pa,ra,Z){return pa===ra?!1:Z.pstyle("curve-style").value==="bezier"}},{name:"visibility",type:f.visibility,triggersZOrder:e},{name:"opacity",type:f.zeroOneNumber,triggersZOrder:d},{name:"text-opacity",type:f.zeroOneNumber},{name:"min-zoomed-font-size",
type:f.size},{name:"z-compound-depth",type:f.zCompoundDepth,triggersZOrder:e},{name:"z-index-compare",type:f.zIndexCompare,triggersZOrder:e},{name:"z-index",type:f.number,triggersZOrder:e}],m=[{name:"overlay-padding",type:f.size,triggersBounds:e},{name:"overlay-color",type:f.color},{name:"overlay-opacity",type:f.zeroOneNumber,triggersBounds:d},{name:"overlay-shape",type:f.overlayShape,triggersBounds:e},{name:"overlay-corner-radius",type:f.cornerRadius}];d=[{name:"underlay-padding",type:f.size,triggersBounds:e},
{name:"underlay-color",type:f.color},{name:"underlay-opacity",type:f.zeroOneNumber,triggersBounds:d},{name:"underlay-shape",type:f.overlayShape,triggersBounds:e},{name:"underlay-corner-radius",type:f.cornerRadius}];var n=[{name:"transition-property",type:f.propList},{name:"transition-duration",type:f.time},{name:"transition-delay",type:f.time},{name:"transition-timing-function",type:f.easing}],p=function(pa,ra){return ra.value==="label"?-pa.poolIndex():ra.pfValue};p=[{name:"height",type:f.nodeSize,
triggersBounds:e,hashOverride:p},{name:"width",type:f.nodeSize,triggersBounds:e,hashOverride:p},{name:"shape",type:f.nodeShape,triggersBounds:e},{name:"shape-polygon-points",type:f.polygonPointList,triggersBounds:e},{name:"corner-radius",type:f.cornerRadius},{name:"background-color",type:f.color},{name:"background-fill",type:f.fill},{name:"background-opacity",type:f.zeroOneNumber},{name:"background-blacken",type:f.nOneOneNumber},{name:"background-gradient-stop-colors",type:f.colors},{name:"background-gradient-stop-positions",
type:f.percentages},{name:"background-gradient-direction",type:f.gradientDirection},{name:"padding",type:f.sizeMaybePercent,triggersBounds:e},{name:"padding-relative-to",type:f.paddingRelativeTo,triggersBounds:e},{name:"bounds-expansion",type:f.boundsExpansion,triggersBounds:e}];var q=[{name:"border-color",type:f.color},{name:"border-opacity",type:f.zeroOneNumber},{name:"border-width",type:f.size,triggersBounds:e},{name:"border-style",type:f.borderStyle},{name:"border-cap",type:f.lineCap},{name:"border-join",
type:f.lineJoin},{name:"border-dash-pattern",type:f.numbers},{name:"border-dash-offset",type:f.number},{name:"border-position",type:f.linePosition}],t=[{name:"outline-color",type:f.color},{name:"outline-opacity",type:f.zeroOneNumber},{name:"outline-width",type:f.size,triggersBounds:e},{name:"outline-style",type:f.borderStyle},{name:"outline-offset",type:f.size,triggersBounds:e}],u=[{name:"background-image",type:f.urls},{name:"background-image-crossorigin",type:f.bgCrossOrigin},{name:"background-image-opacity",
type:f.zeroOneNumbers},{name:"background-image-containment",type:f.bgContainment},{name:"background-image-smoothing",type:f.bools},{name:"background-position-x",type:f.bgPos},{name:"background-position-y",type:f.bgPos},{name:"background-width-relative-to",type:f.bgRelativeTo},{name:"background-height-relative-to",type:f.bgRelativeTo},{name:"background-repeat",type:f.bgRepeat},{name:"background-fit",type:f.bgFit},{name:"background-clip",type:f.bgClip},{name:"background-width",type:f.bgWH},{name:"background-height",
type:f.bgWH},{name:"background-offset-x",type:f.bgPos},{name:"background-offset-y",type:f.bgPos}],x=[{name:"position",type:f.position,triggersBounds:e},{name:"compound-sizing-wrt-labels",type:f.compoundIncludeLabels,triggersBounds:e},{name:"min-width",type:f.size,triggersBounds:e},{name:"min-width-bias-left",type:f.sizeMaybePercent,triggersBounds:e},{name:"min-width-bias-right",type:f.sizeMaybePercent,triggersBounds:e},{name:"min-height",type:f.size,triggersBounds:e},{name:"min-height-bias-top",type:f.sizeMaybePercent,
triggersBounds:e},{name:"min-height-bias-bottom",type:f.sizeMaybePercent,triggersBounds:e}],v=[{name:"line-style",type:f.lineStyle},{name:"line-color",type:f.color},{name:"line-fill",type:f.fill},{name:"line-cap",type:f.lineCap},{name:"line-opacity",type:f.zeroOneNumber},{name:"line-dash-pattern",type:f.numbers},{name:"line-dash-offset",type:f.number},{name:"line-outline-width",type:f.size},{name:"line-outline-color",type:f.color},{name:"line-gradient-stop-colors",type:f.colors},{name:"line-gradient-stop-positions",
type:f.percentages},{name:"curve-style",type:f.curveStyle,triggersBounds:e,triggersBoundsOfParallelEdges:function(pa,ra){return pa===ra?!1:pa==="bezier"||ra==="bezier"}},{name:"haystack-radius",type:f.zeroOneNumber,triggersBounds:e},{name:"source-endpoint",type:f.edgeEndpoint,triggersBounds:e},{name:"target-endpoint",type:f.edgeEndpoint,triggersBounds:e},{name:"control-point-step-size",type:f.size,triggersBounds:e},{name:"control-point-distances",type:f.bidirectionalSizes,triggersBounds:e},{name:"control-point-weights",
type:f.numbers,triggersBounds:e},{name:"segment-distances",type:f.bidirectionalSizes,triggersBounds:e},{name:"segment-weights",type:f.numbers,triggersBounds:e},{name:"segment-radii",type:f.numbers,triggersBounds:e},{name:"radius-type",type:f.radiusType,triggersBounds:e},{name:"taxi-turn",type:f.bidirectionalSizeMaybePercent,triggersBounds:e},{name:"taxi-turn-min-distance",type:f.size,triggersBounds:e},{name:"taxi-direction",type:f.axisDirection,triggersBounds:e},{name:"taxi-radius",type:f.number,
triggersBounds:e},{name:"edge-distances",type:f.edgeDistances,triggersBounds:e},{name:"arrow-scale",type:f.positiveNumber,triggersBounds:e},{name:"loop-direction",type:f.angle,triggersBounds:e},{name:"loop-sweep",type:f.angle,triggersBounds:e},{name:"source-distance-from-node",type:f.size,triggersBounds:e},{name:"target-distance-from-node",type:f.size,triggersBounds:e}],w=[{name:"ghost",type:f.bool,triggersBounds:e},{name:"ghost-offset-x",type:f.bidirectionalSize,triggersBounds:e},{name:"ghost-offset-y",
type:f.bidirectionalSize,triggersBounds:e},{name:"ghost-opacity",type:f.zeroOneNumber}],C=[{name:"selection-box-color",type:f.color},{name:"selection-box-opacity",type:f.zeroOneNumber},{name:"selection-box-border-color",type:f.color},{name:"selection-box-border-width",type:f.size},{name:"active-bg-color",type:f.color},{name:"active-bg-opacity",type:f.zeroOneNumber},{name:"active-bg-size",type:f.size},{name:"outside-texture-bg-color",type:f.color},{name:"outside-texture-bg-opacity",type:f.zeroOneNumber}],
y=[];Eb.pieBackgroundN=16;y.push({name:"pie-size",type:f.sizeMaybePercent});y.push({name:"pie-hole",type:f.sizeMaybePercent});y.push({name:"pie-start-angle",type:f.angle});for(var B=1;B<=Eb.pieBackgroundN;B++)y.push({name:"pie-"+B+"-background-color",type:f.color}),y.push({name:"pie-"+B+"-background-size",type:f.percent}),y.push({name:"pie-"+B+"-background-opacity",type:f.zeroOneNumber});B=[];Eb.stripeBackgroundN=16;B.push({name:"stripe-size",type:f.sizeMaybePercent});B.push({name:"stripe-direction",
type:f.axisDirectionPrimary});for(var M=1;M<=Eb.stripeBackgroundN;M++)B.push({name:"stripe-"+M+"-background-color",type:f.color}),B.push({name:"stripe-"+M+"-background-size",type:f.percent}),B.push({name:"stripe-"+M+"-background-opacity",type:f.zeroOneNumber});var Q=[],ja=Eb.arrowPrefixes=["source","mid-source","target","mid-target"];[{name:"arrow-shape",type:f.arrowShape,triggersBounds:e},{name:"arrow-color",type:f.color},{name:"arrow-fill",type:f.arrowFill},{name:"arrow-width",type:f.arrowWidth}].forEach(function(pa){ja.forEach(function(ra){Q.push({name:ra+
"-"+pa.name,type:pa.type,triggersBounds:pa.triggersBounds})})},{});e=Eb.properties=[].concat(k,n,l,m,d,w,h,g,a,b,c,p,q,t,u,y,B,x,v,Q,C);var da=Eb.propertyGroups={behavior:k,transition:n,visibility:l,overlay:m,underlay:d,ghost:w,commonLabel:h,labelDimensions:g,mainLabel:a,sourceLabel:b,targetLabel:c,nodeBody:p,nodeBorder:q,nodeOutline:t,backgroundImage:u,pie:y,stripe:B,compound:x,edgeLine:v,edgeArrow:Q,core:C},Da=Eb.propertyGroupNames={};(Eb.propertyGroupKeys=Object.keys(da)).forEach(function(pa){Da[pa]=
da[pa].map(function(ra){return ra.name});da[pa].forEach(function(ra){return ra.groupKey=pa})});a=Eb.aliases=[{name:"content",pointsTo:"label"},{name:"control-point-distance",pointsTo:"control-point-distances"},{name:"control-point-weight",pointsTo:"control-point-weights"},{name:"segment-distance",pointsTo:"segment-distances"},{name:"segment-weight",pointsTo:"segment-weights"},{name:"segment-radius",pointsTo:"segment-radii"},{name:"edge-text-rotation",pointsTo:"text-rotation"},{name:"padding-left",
pointsTo:"padding"},{name:"padding-right",pointsTo:"padding"},{name:"padding-top",pointsTo:"padding"},{name:"padding-bottom",pointsTo:"padding"}];Eb.propertyNames=e.map(function(pa){return pa.name});for(b=0;b<e.length;b++)c=e[b],e[c.name]=c;for(b=0;b<a.length;b++)c=a[b],g={name:c.name,alias:!0,pointsTo:e[c.pointsTo]},e.push(g),e[c.name]=g})();Eb.getDefaultProperty=function(a){return this.getDefaultProperties()[a]};Eb.getDefaultProperties=function(){var a=this._private;if(a.defaultProperties!=null)return a.defaultProperties;
for(var b=Ra({"selection-box-color":"#ddd","selection-box-opacity":.65,"selection-box-border-color":"#aaa","selection-box-border-width":1,"active-bg-color":"black","active-bg-opacity":.15,"active-bg-size":30,"outside-texture-bg-color":"#000","outside-texture-bg-opacity":.125,events:"yes","text-events":"no","text-valign":"top","text-halign":"center","text-justification":"auto","line-height":1,color:"#000","text-outline-color":"#000","text-outline-width":0,"text-outline-opacity":1,"text-opacity":1,
"text-decoration":"none","text-transform":"none","text-wrap":"none","text-overflow-wrap":"whitespace","text-max-width":9999,"text-background-color":"#000","text-background-opacity":0,"text-background-shape":"rectangle","text-background-padding":0,"text-border-opacity":0,"text-border-width":0,"text-border-style":"solid","text-border-color":"#000","font-family":"Helvetica Neue, Helvetica, sans-serif","font-style":"normal","font-weight":"normal","font-size":16,"min-zoomed-font-size":0,"text-rotation":"none",
"source-text-rotation":"none","target-text-rotation":"none",visibility:"visible",display:"element",opacity:1,"z-compound-depth":"auto","z-index-compare":"auto","z-index":0,label:"","text-margin-x":0,"text-margin-y":0,"source-label":"","source-text-offset":0,"source-text-margin-x":0,"source-text-margin-y":0,"target-label":"","target-text-offset":0,"target-text-margin-x":0,"target-text-margin-y":0,"overlay-opacity":0,"overlay-color":"#000","overlay-padding":10,"overlay-shape":"round-rectangle","overlay-corner-radius":"auto",
"underlay-opacity":0,"underlay-color":"#000","underlay-padding":10,"underlay-shape":"round-rectangle","underlay-corner-radius":"auto","transition-property":"none","transition-duration":0,"transition-delay":0,"transition-timing-function":"linear","box-select-labels":"no","background-blacken":0,"background-color":"#999","background-fill":"solid","background-opacity":1,"background-image":"none","background-image-crossorigin":"anonymous","background-image-opacity":1,"background-image-containment":"inside",
"background-image-smoothing":"yes","background-position-x":"50%","background-position-y":"50%","background-offset-x":0,"background-offset-y":0,"background-width-relative-to":"include-padding","background-height-relative-to":"include-padding","background-repeat":"no-repeat","background-fit":"none","background-clip":"node","background-width":"auto","background-height":"auto","border-color":"#000","border-opacity":1,"border-width":0,"border-style":"solid","border-dash-pattern":[4,2],"border-dash-offset":0,
"border-cap":"butt","border-join":"miter","border-position":"center","outline-color":"#999","outline-opacity":1,"outline-width":0,"outline-offset":0,"outline-style":"solid",height:30,width:30,shape:"ellipse","shape-polygon-points":"-1, -1,   1, -1,   1, 1,   -1, 1","corner-radius":"auto","bounds-expansion":0,"background-gradient-direction":"to-bottom","background-gradient-stop-colors":"#999","background-gradient-stop-positions":"0%",ghost:"no","ghost-offset-y":0,"ghost-offset-x":0,"ghost-opacity":0,
padding:0,"padding-relative-to":"width",position:"origin","compound-sizing-wrt-labels":"include","min-width":0,"min-width-bias-left":0,"min-width-bias-right":0,"min-height":0,"min-height-bias-top":0,"min-height-bias-bottom":0},{"pie-size":"100%","pie-hole":0,"pie-start-angle":"0deg"},[{name:"pie-{{i}}-background-color",value:"black"},{name:"pie-{{i}}-background-size",value:"0%"},{name:"pie-{{i}}-background-opacity",value:1}].reduce(function(g,h){for(var k=1;k<=Eb.pieBackgroundN;k++){var l=h.name.replace("{{i}}",
k);g[l]=h.value}return g},{}),{"stripe-size":"100%","stripe-direction":"horizontal"},[{name:"stripe-{{i}}-background-color",value:"black"},{name:"stripe-{{i}}-background-size",value:"0%"},{name:"stripe-{{i}}-background-opacity",value:1}].reduce(function(g,h){for(var k=1;k<=Eb.stripeBackgroundN;k++){var l=h.name.replace("{{i}}",k);g[l]=h.value}return g},{}),{"line-style":"solid","line-color":"#999","line-fill":"solid","line-cap":"butt","line-opacity":1,"line-outline-width":0,"line-outline-color":"#000",
"line-gradient-stop-colors":"#999","line-gradient-stop-positions":"0%","control-point-step-size":40,"control-point-weights":.5,"segment-weights":.5,"segment-distances":20,"segment-radii":15,"radius-type":"arc-radius","taxi-turn":"50%","taxi-radius":15,"taxi-turn-min-distance":10,"taxi-direction":"auto","edge-distances":"intersection","curve-style":"haystack","haystack-radius":0,"arrow-scale":1,"loop-direction":"-45deg","loop-sweep":"-90deg","source-distance-from-node":0,"target-distance-from-node":0,
"source-endpoint":"outside-to-node","target-endpoint":"outside-to-node","line-dash-pattern":[6,3],"line-dash-offset":0},[{name:"arrow-shape",value:"none"},{name:"arrow-color",value:"#999"},{name:"arrow-fill",value:"filled"},{name:"arrow-width",value:1}].reduce(function(g,h){Eb.arrowPrefixes.forEach(function(k){g[k+"-"+h.name]=h.value});return g},{})),c={},d=0;d<this.properties.length;d++){var e=this.properties[d];if(!e.pointsTo){e=e.name;var f=this.parse(e,b[e]);c[e]=f}}a.defaultProperties=c;return a.defaultProperties};
Eb.addDefaultStylesheet=function(){this.selector(":parent").css({shape:"rectangle",padding:10,"background-color":"#eee","border-color":"#ccc","border-width":1}).selector("edge").css({width:3}).selector(":loop").css({"curve-style":"bezier"}).selector("edge:compound").css({"curve-style":"bezier","source-endpoint":"outside-to-line","target-endpoint":"outside-to-line"}).selector(":selected").css({"background-color":"#0169D9","line-color":"#0169D9","source-arrow-color":"#0169D9","target-arrow-color":"#0169D9",
"mid-source-arrow-color":"#0169D9","mid-target-arrow-color":"#0169D9"}).selector(":parent:selected").css({"background-color":"#CCE1F9","border-color":"#aec8e5"}).selector(":active").css({"overlay-color":"black","overlay-padding":10,"overlay-opacity":.25});this.defaultLength=this.length};var Jb=function(a){if(!(this instanceof Jb))return new Jb(a);wc(a)!=="core"?Ab("A style must have a core reference"):(this._private={cy:a,coreStyle:{}},this.length=0,this.resetToDefault())},Sb=Jb.prototype;Sb.instanceString=
function(){return"style"};Sb.clear=function(){for(var a=this._private,b=a.cy.elements(),c=0;c<this.length;c++)this[c]=void 0;this.length=0;a.contextStyles={};a.propDiffs={};this.cleanElements(b,!0);b.forEach(function(d){d=d[0]._private;d.styleDirty=!0;d.appliedInitStyle=!1});return this};Sb.resetToDefault=function(){this.clear();this.addDefaultStylesheet();return this};Sb.core=function(a){return this._private.coreStyle[a]||this.getDefaultProperty(a)};Sb.selector=function(a){a=a==="core"?null:new Cc(a);
var b=this.length++;this[b]={selector:a,properties:[],mappedProperties:[],index:b};return this};Sb.css=function(){var a=arguments;if(a.length===1){a=a[0];for(var b=0;b<this.properties.length;b++){var c=this.properties[b],d=a[c.name];d===void 0&&(d=a[$d(c.name)]);d!==void 0&&this.cssRule(c.name,d)}}else a.length===2&&this.cssRule(a[0],a[1]);return this};Sb.style=Sb.css;Sb.cssRule=function(a,b){if(a=this.parse(a,b))b=this.length-1,this[b].properties.push(a),this[b].properties[a.name]=a,a.name.match(/pie-(\d+)-background-size/)&&
a.value&&(this._private.hasPie=!0),a.name.match(/stripe-(\d+)-background-size/)&&a.value&&(this._private.hasStripe=!0),a.mapped&&this[b].mappedProperties.push(a),this[b].selector||(this._private.coreStyle[a.name]=a);return this};Sb.append=function(a){wc(a)==="stylesheet"?a.appendToStyle(this):rb(a)?this.appendFromJson(a):Qa(a)&&this.appendFromString(a);return this};Jb.fromJson=function(a,b){a=new Jb(a);a.fromJson(b);return a};Jb.fromString=function(a,b){return(new Jb(a)).fromString(b)};[{apply:function(a){for(var b=
this._private.cy.collection(),c=0;c<a.length;c++){var d=a[c],e=this.getContextMeta(d);if(!e.empty){var f=this.getContextStyle(e);e=this.applyContextStyle(e,f,d);d._private.appliedInitStyle?this.updateTransitions(d,e.diffProps):d._private.appliedInitStyle=!0;this.updateStyleHints(d)&&b.push(d)}}return b},getPropertiesDiff:function(a,b){var c=this._private.propDiffs=this._private.propDiffs||{},d=a+"-"+b,e=c[d];if(e)return e;e=[];for(var f={},g=0;g<this.length;g++){var h=this[g],k=b[g]==="t",l=a[g]===
"t"!==k,m=h.mappedProperties.length>0;if(l||k&&m)for(k=void 0,l&&m?k=h.properties:l?k=h.properties:m&&(k=h.mappedProperties),h=0;h<k.length;h++){l=k[h];m=l.name;for(var n=!1,p=g+1;p<this.length&&(b[p]!=="t"||!(n=this[p].properties[l.name]!=null));p++);f[m]||n||(f[m]=!0,e.push(m))}}return c[d]=e},getContextMeta:function(a){var b="";var c=a._private.styleCxtKey||"";for(var d=0;d<this.length;d++){var e=this[d];b=e.selector&&e.selector.matches(a)?b+"t":b+"f"}c=this.getPropertiesDiff(c,b);a._private.styleCxtKey=
b;return{key:b,diffPropNames:c,empty:c.length===0}},getContextStyle:function(a){a=a.key;var b=this._private.contextStyles=this._private.contextStyles||{};if(b[a])return b[a];for(var c={_private:{key:a}},d=0;d<this.length;d++){var e=this[d];if(a[d]==="t")for(var f=0;f<e.properties.length;f++){var g=e.properties[f];c[g.name]=g}}return b[a]=c},applyContextStyle:function(a,b,c){a=a.diffPropNames;for(var d={},e=this.types,f=0;f<a.length;f++){var g=a[f],h=b[g],k=c.pstyle(g);if(!h)if(k)h=k.bypass?{name:g,
deleteBypassed:!0}:{name:g,"delete":!0};else continue;if(k!==h){if(h.mapped===e.fn&&k!=null&&k.mapping!=null&&k.mapping.value===h.value){var l=k.mapping;if((l.fnValue=h.value(c))===l.prevFnValue)continue}k=d[g]={prev:k};this.applyParsedProperty(c,h);k.next=c.pstyle(g);k.next&&k.next.bypass&&(k.next=k.next.bypassed)}}return{diffProps:d}},updateStyleHints:function(a){var b=a._private,c=this,d=c.propertyGroupNames,e=c.propertyGroupKeys,f=function(y,B,M){return c.getPropertiesHash(y,B,M)},g=b.styleKey;
if(a.removed())return!1;var h=b.group==="nodes",k=a._private.style;d=Object.keys(k);for(var l=0;l<e.length;l++)b.styleKeys[e[l]]=[9261,5381];l=function(y,B){b.styleKeys[B][0]=fd(y,b.styleKeys[B][0]);b.styleKeys[B][1]=gd(y,b.styleKeys[B][1])};for(var m=function(y,B){for(var M=0;M<y.length;M++){var Q=y.charCodeAt(M);b.styleKeys[B][0]=fd(Q,b.styleKeys[B][0]);b.styleKeys[B][1]=gd(Q,b.styleKeys[B][1])}},n=0;n<d.length;n++){var p=d[n],q=k[p];if(q!=null){var t=this.properties[p],u=t.type;p=t.groupKey;var x=
void 0;t.hashOverride!=null?x=t.hashOverride(a,q):q.pfValue!=null&&(x=q.pfValue);var v=t.enums==null?q.value:null;t=x!=null;var w=v!=null,C=t||w;w=q.units;u.number&&C&&!u.multiple?(q=t?x:v,l(-128<q&&q<128&&Math.floor(q)!==q?2E9-(q*1024|0):q,p),t||w==null||m(w,p)):m(q.strValue,p)}}d=[9261,5381];for(k=0;k<e.length;k++)l=b.styleKeys[e[k]],d[0]=fd(l[0],d[0]),d[1]=gd(l[1],d[1]);b.styleKey=d[0]*2097152+d[1];e=b.styleKeys;b.labelDimsKey=yc(e.labelDimensions);d=f(a,["label"],e.labelDimensions);b.labelKey=
yc(d);b.labelStyleKey=yc(be(e.commonLabel,d));h||(d=f(a,["source-label"],e.labelDimensions),b.sourceLabelKey=yc(d),b.sourceLabelStyleKey=yc(be(e.commonLabel,d)),a=f(a,["target-label"],e.labelDimensions),b.targetLabelKey=yc(a),b.targetLabelStyleKey=yc(be(e.commonLabel,a)));h&&(f=b.styleKeys,h=f.pie,a=f.stripe,f=[f.nodeBody,f.nodeBorder,f.nodeOutline,f.backgroundImage,f.compound,h,a].filter(function(y){return y!=null}).reduce(be,[9261,5381]),b.nodeKey=yc(f),b.hasPie=h!=null&&h[0]!==9261&&h[1]!==5381,
b.hasStripe=a!=null&&a[0]!==9261&&a[1]!==5381);return g!==b.styleKey},clearStyleHints:function(a){a=a._private;a.styleCxtKey="";a.styleKeys={};a.styleKey=null;a.labelKey=null;a.labelStyleKey=null;a.sourceLabelKey=null;a.sourceLabelStyleKey=null;a.targetLabelKey=null;a.targetLabelStyleKey=null;a.nodeKey=null;a.hasPie=null;a.hasStripe=null},applyParsedProperty:function(a,b){var c=this,d=b,e=a._private.style,f=c.types,g=c.properties[d.name].type,h=d.bypass,k=e[d.name],l=k&&k.bypass,m=a._private,n=function(){c.checkTriggers(a,
d.name,k==null?null:k.pfValue!=null?k.pfValue:k.value,d==null?null:d.pfValue!=null?d.pfValue:d.value)};b.name==="curve-style"&&a.isEdge()&&(b.value!=="bezier"&&a.isLoop()||b.value==="haystack"&&(a.source().isParent()||a.target().isParent()))&&(d=b=this.parse(b.name,"bezier",h));if(d["delete"])return e[d.name]=void 0,n(),!0;if(d.deleteBypassed){if(k)return k.bypass?(k.bypassed=void 0,n(),!0):!1;n();return!0}if(d.deleteBypass){if(k)return k.bypass?(e[d.name]=k.bypassed,n(),!0):!1;n();return!0}b=function(){mb("Do not assign mappings to elements without corresponding data (i.e. ele `"+
a.id()+"` has no mapping for property `"+d.name+"` with data field `"+d.field+"`); try a `["+d.field+"]` selector to limit scope to elements with `"+d.field+"` defined")};switch(d.mapped){case f.mapData:var p=d.field.split(".");m=m.data;for(f=0;f<p.length&&m;f++)m=m[p[f]];if(m==null)return b(),!1;if(Ba(m))p=d.fieldMax-d.fieldMin,p=p===0?0:(m-d.fieldMin)/p;else return mb("Do not use continuous mappers without specifying numeric data (i.e. `"+d.field+": "+m+"` for `"+a.id()+"` is non-numeric)"),!1;
p<0?p=0:p>1&&(p=1);if(g.color){g=d.valueMin[0];m=d.valueMin[1];f=d.valueMin[2];var q=d.valueMin[3]==null?1:d.valueMin[3];g=[Math.round(g+(d.valueMax[0]-g)*p),Math.round(m+(d.valueMax[1]-m)*p),Math.round(f+(d.valueMax[2]-f)*p),Math.round(q+((d.valueMax[3]==null?1:d.valueMax[3])-q)*p)];p={bypass:d.bypass,name:d.name,value:g,strValue:"rgb("+g[0]+", "+g[1]+", "+g[2]+")"}}else if(g.number)p=this.parse(d.name,d.valueMin+(d.valueMax-d.valueMin)*p,d.bypass,"mapping");else return!1;if(!p)return b(),!1;p.mapping=
d;d=p;break;case f.data:g=d.field.split(".");m=m.data;for(f=0;f<g.length&&m;f++)m=m[g[f]];m!=null&&(p=this.parse(d.name,m,d.bypass,"mapping"));if(!p)return b(),!1;p.mapping=d;d=p;break;case f.fn:b=d.value;b=d.fnValue!=null?d.fnValue:b(a);d.prevFnValue=b;if(b==null)return mb("Custom function mappers may not return null (i.e. `"+d.name+"` for ele `"+a.id()+"` is null)"),!1;p=this.parse(d.name,b,d.bypass,"mapping");if(!p)return mb("Custom function mappers may not return invalid values for the property type (i.e. `"+
d.name+"` for ele `"+a.id()+"` is invalid)"),!1;p.mapping=mc(d);d=p;break;case void 0:break;default:return!1}h?(d.bypassed=l?k.bypassed:k,e[d.name]=d):l?k.bypassed=d:e[d.name]=d;n();return!0},cleanElements:function(a,b){for(var c=0;c<a.length;c++){var d=a[c];this.clearStyleHints(d);d.dirtyCompoundBoundsCache();d.dirtyBoundingBoxCache();if(b){d=d._private.style;for(var e=Object.keys(d),f=0;f<e.length;f++){var g=e[f],h=d[g];h!=null&&(h.bypass?h.bypassed=null:d[g]=null)}}else d._private.style={}}},update:function(){this._private.cy.mutableElements().updateStyle()},
updateTransitions:function(a,b){var c=this,d=a._private,e=a.pstyle("transition-property").value,f=a.pstyle("transition-duration").pfValue,g=a.pstyle("transition-delay").pfValue;if(e.length>0&&f>0){for(var h={},k=!1,l=0;l<e.length;l++){var m=e[l],n=a.pstyle(m),p=b[m];if(p){var q=p.prev;n=p.next!=null?p.next:n;p=!1;var t=void 0;q&&(Ba(q.pfValue)&&Ba(n.pfValue)?(p=n.pfValue-q.pfValue,t=q.pfValue+1E-6*p):Ba(q.value)&&Ba(n.value)?(p=n.value-q.value,t=q.value+1E-6*p):rb(q.value)&&rb(n.value)&&(p=q.value[0]!==
n.value[0]||q.value[1]!==n.value[1]||q.value[2]!==n.value[2],t=q.strValue),p&&(h[m]=n.strValue,this.applyBypass(a,m,t),k=!0))}}k&&(d.transitioning=!0,(new dd(function(u){g>0?a.delayAnimation(g).play().promise().then(u):u()})).then(function(){return a.animation({style:h,duration:f,easing:a.pstyle("transition-timing-function").value,queue:!1}).play().promise()}).then(function(){c.removeBypasses(a,e);a.emitAndNotify("style");d.transitioning=!1}))}else d.transitioning&&(this.removeBypasses(a,e),a.emitAndNotify("style"),
d.transitioning=!1)},checkTrigger:function(a,b,c,d,e,f){b=this.properties[b];e=e(b);a.removed()||e!=null&&e(c,d,a)&&f(b)},checkZOrderTrigger:function(a,b,c,d){var e=this;this.checkTrigger(a,b,c,d,function(f){return f.triggersZOrder},function(){e._private.cy.notify("zorder",a)})},checkBoundsTrigger:function(a,b,c,d){this.checkTrigger(a,b,c,d,function(e){return e.triggersBounds},function(e){a.dirtyCompoundBoundsCache();a.dirtyBoundingBoxCache()})},checkConnectedEdgesBoundsTrigger:function(a,b,c,d){this.checkTrigger(a,
b,c,d,function(e){return e.triggersBoundsOfConnectedEdges},function(e){a.connectedEdges().forEach(function(f){f.dirtyBoundingBoxCache()})})},checkParallelEdgesBoundsTrigger:function(a,b,c,d){this.checkTrigger(a,b,c,d,function(e){return e.triggersBoundsOfParallelEdges},function(e){a.parallelEdges().forEach(function(f){f.dirtyBoundingBoxCache()})})},checkTriggers:function(a,b,c,d){a.dirtyStyleCache();this.checkZOrderTrigger(a,b,c,d);this.checkBoundsTrigger(a,b,c,d);this.checkConnectedEdgesBoundsTrigger(a,
b,c,d);this.checkParallelEdgesBoundsTrigger(a,b,c,d)}},{applyBypass:function(a,b,c,d){var e=[];if(b==="*"||b==="**"){if(c!==void 0)for(b=0;b<this.properties.length;b++){var f=this.parse(this.properties[b].name,c,!0);f&&e.push(f)}}else if(Qa(b))(b=this.parse(b,c,!0))&&e.push(b);else if(hb(b))for(d=c,c=Object.keys(b),f=0;f<c.length;f++){var g=c[f],h=b[g];h===void 0&&(h=b[$d(g)]);h!==void 0&&(g=this.parse(g,h,!0))&&e.push(g)}else return!1;if(e.length===0)return!1;b=!1;for(c=0;c<a.length;c++){f=a[c];
g={};var k=void 0;for(h=0;h<e.length;h++){var l=e[h];d&&(k=f.pstyle(l.name),k=g[l.name]={prev:k});b=this.applyParsedProperty(f,mc(l))||b;d&&(k.next=f.pstyle(l.name))}b&&this.updateStyleHints(f);d&&this.updateTransitions(f,g,!0)}return b},overrideBypass:function(a,b,c){b=Se(b);for(var d=0;d<a.length;d++){var e=a[d],f=e._private.style[b],g=this.properties[b].type,h=g.color;g=g.mutiple;var k=f?f.pfValue!=null?f.pfValue:f.value:null;f&&f.bypass?(f.value=c,f.pfValue!=null&&(f.pfValue=c),f.strValue=h?"rgb("+
c.join(",")+")":g?c.join(" "):""+c,this.updateStyleHints(e)):this.applyBypass(e,b,c);this.checkTriggers(e,b,k,c)}},removeAllBypasses:function(a,b){return this.removeBypasses(a,this.propertyNames,b)},removeBypasses:function(a,b,c){for(var d=0;d<a.length;d++){for(var e=a[d],f={},g=0;g<b.length;g++){var h=b[g],k=this.properties[h],l=e.pstyle(k.name);l&&l.bypass&&(h=this.parse(h,"",!0),l=f[k.name]={prev:l},this.applyParsedProperty(e,h),l.next=e.pstyle(k.name))}this.updateStyleHints(e);c&&this.updateTransitions(e,
f,!0)}}},{getEmSizeInPixels:function(){var a=this.containerCss("font-size");return a!=null?parseFloat(a):1},containerCss:function(a){var b=this._private.cy,c=b.container();if((b=b.window())&&c&&b.getComputedStyle)return b.getComputedStyle(c).getPropertyValue(a)}},pf,{appendFromJson:function(a){for(var b=0;b<a.length;b++){var c=a[b],d=c.selector;c=c.style||c.css;var e=Object.keys(c);this.selector(d);for(d=0;d<e.length;d++){var f=e[d];this.css(f,c[f])}}return this},fromJson:function(a){this.resetToDefault();
this.appendFromJson(a);return this},json:function(){for(var a=[],b=this.defaultLength;b<this.length;b++){var c=this[b],d=c.selector;c=c.properties;for(var e={},f=0;f<c.length;f++){var g=c[f];e[g.name]=g.strValue}a.push({selector:d?d.toString():"core",style:e})}return a}},{appendFromString:function(a){function b(){c=c.length>d.length?c.substr(d.length):""}var c=""+a;for(c=c.replace(/[/][*](\s|.)+?[*][/]/g,"");!c.match(/^\s*$/);){a=c.match(/^\s*((?:.|\s)+?)\s*\{((?:.|\s)+?)\}/);if(!a){mb("Halting stylesheet parsing: String stylesheet contains more to parse but no selector and block found in: "+
c);break}var d=a[0];var e=a[1];if(e!=="core"&&(new Cc(e)).invalid)mb("Skipping parsing of block: Invalid selector found in string stylesheet: "+e);else{var f=a[2],g=!1;var h=f;for(a=[];!h.match(/^\s*$/);){var k=h.match(/^\s*(.+?)\s*:\s*(.+?)(?:\s*;|\s*$)/);if(!k){mb("Skipping parsing of block: Invalid formatting of style property and value definitions found in:"+f);g=!0;break}var l=k[0];var m=k[1];k=k[2];this.properties[m]?this.parse(m,k)?a.push({name:m,val:k}):mb("Skipping property: Invalid property definition in: "+
l):mb("Skipping property: Invalid property name in: "+l);h=h.length>l.length?h.substr(l.length):""}if(g){b();break}this.selector(e);for(e=0;e<a.length;e++)h=a[e],this.css(h.name,h.val)}b()}return this},fromString:function(a){this.resetToDefault();this.appendFromString(a);return this}},Eb,{parse:function(a,b,c,d){if(zb(b))return this.parseImplWarn(a,b,c,d);var e=Wi(a,""+b,c?"t":"f",d==="mapping"||d===!0||d===!1||d==null?"dontcare":d),f=this.propCache=this.propCache||[],g;(g=f[e])||(g=f[e]=this.parseImplWarn(a,
b,c,d));if(c||d==="mapping")if(g=mc(g))g.value=mc(g.value);return g},parseImplWarn:function(a,b,c,d){(c=this.parseImpl(a,b,c,d))||b==null||mb("The style property `".concat(a,": ").concat(b,"` is invalid"));!c||c.name!=="width"&&c.name!=="height"||b!=="label"||mb("The style value of `label` is deprecated for `"+c.name+"`");return c},parseImpl:function(a,b,c,d){a=Se(a);var e=this.properties[a],f=b,g=this.types;if(!e||b===void 0)return null;e.alias&&(e=e.pointsTo,a=e.name);var h=Qa(b);h&&(b=b.trim());
var k=e.type;if(!k)return null;if(c&&(b===""||b===null))return{name:a,value:b,bypass:!0,deleteBypass:!0};if(zb(b))return{name:a,value:b,strValue:"fn",mapped:g.fn,bypass:c};var l,m;if(!(!h||d||b.length<7||b[1]!=="a")){if(b.length>=7&&b[0]==="d"&&(l=(new RegExp(g.data.regex)).exec(b)))return c?!1:{name:a,value:l,strValue:""+b,mapped:g.data,field:l[1],bypass:c};if(b.length>=10&&b[0]==="m"&&(m=(new RegExp(g.mapData.regex)).exec(b))){if(c||k.multiple)return!1;var n=g.mapData;if(!k.color&&!k.number)return!1;
f=this.parse(a,m[4]);if(!f||f.mapped)return!1;h=this.parse(a,m[5]);return!h||h.mapped?!1:f.pfValue===h.pfValue||f.strValue===h.strValue?(mb("`"+a+": "+b+"` is not a valid mapper because the output range is zero; converting to `"+a+": "+f.strValue+"`"),this.parse(a,f.strValue)):!k.color||(d=f.value,e=h.value,d[0]!==e[0]||d[1]!==e[1]||d[2]!==e[2]||d[3]!==e[3]&&(d[3]!=null&&d[3]!==1||e[3]!=null&&e[3]!==1))?{name:a,value:m,strValue:""+b,mapped:n,field:m[1],fieldMin:parseFloat(m[2]),fieldMax:parseFloat(m[3]),
valueMin:f.value,valueMax:h.value,bypass:c}:!1}}if(k.multiple&&d!=="multiple"){m=h?b.split(/\s+/):rb(b)?b:[b];if(k.evenMultiple&&m.length%2!==0)return null;n=[];f=[];h=[];d="";e=!1;for(g=0;g<m.length;g++)l=this.parse(a,m[g],c,"multiple"),e=e||Qa(l.value),n.push(l.value),h.push(l.pfValue!=null?l.pfValue:l.value),f.push(l.units),d+=(g>0?" ":"")+l.strValue;return k.validate&&!k.validate(n,f)?null:k.singleEnum&&e?n.length===1&&Qa(n[0])?{name:a,value:n[0],strValue:n[0],bypass:c}:null:{name:a,value:n,pfValue:h,
strValue:d,bypass:c,units:f}}m=function(){for(var p=0;p<k.enums.length;p++)if(k.enums[p]===b)return{name:a,value:b,strValue:""+b,bypass:c};return null};if(k.number){d="px";k.units&&(n=k.units);k.implicitUnits&&(d=k.implicitUnits);if(!k.unitless)if(h){if(h="px|em"+(k.allowPercent?"|\\%":""),n&&(h=n),h=b.match("^((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?)))("+h+")?$"))b=h[1],n=h[2]||d}else if(!n||k.implicitUnits)n=d;b=parseFloat(b);if(isNaN(b)&&k.enums===void 0)return null;if(isNaN(b)&&k.enums!==
void 0)return b=f,m();if(k.integer&&!Bl(b)||k.min!==void 0&&(b<k.min||k.strictMin&&b===k.min)||k.max!==void 0&&(b>k.max||k.strictMax&&b===k.max))return null;m={name:a,value:b,strValue:""+b+(n?n:""),units:n,bypass:c};m.pfValue=k.unitless||n!=="px"&&n!=="em"?b:n!=="px"&&n?this.getEmSizeInPixels()*b:b;if(n==="ms"||n==="s")m.pfValue=n==="ms"?b:1E3*b;if(n==="deg"||n==="rad")m.pfValue=n==="rad"?b:Math.PI*b/180;n==="%"&&(m.pfValue=b/100);return m}if(k.propList){m=[];n=""+b;if(n!=="none"){n=n.split(/\s*,\s*|\s+/);
for(f=0;f<n.length;f++)h=n[f].trim(),this.properties[h]?m.push(h):mb("`"+h+"` is not a valid property name");if(m.length===0)return null}return{name:a,value:m,strValue:m.length===0?"none":m.join(" "),bypass:c}}if(k.color)return(m=Ai(b))?{name:a,value:m,pfValue:m,strValue:"rgb("+m[0]+","+m[1]+","+m[2]+")",bypass:c}:null;if(k.regex||k.regexes){if(k.enums&&(m=m()))return m;m=k.regexes?k.regexes:[k.regex];for(n=0;n<m.length;n++)if(f=(new RegExp(m[n])).exec(b))return{name:a,value:k.singleRegexMatchValue?
f[1]:f,strValue:""+b,bypass:c};return null}return k.string?{name:a,value:""+b,strValue:""+b,bypass:c}:k.enums?m():null}}].forEach(function(a){Ra(Sb,a)});Jb.types=Sb.types;Jb.properties=Sb.properties;Jb.propertyGroups=Sb.propertyGroups;Jb.propertyGroupNames=Sb.propertyGroupNames;Jb.propertyGroupKeys=Sb.propertyGroupKeys;var Tc={autolock:function(a){if(a!==void 0)this._private.autolock=a?!0:!1;else return this._private.autolock;return this},autoungrabify:function(a){if(a!==void 0)this._private.autoungrabify=
a?!0:!1;else return this._private.autoungrabify;return this},autounselectify:function(a){if(a!==void 0)this._private.autounselectify=a?!0:!1;else return this._private.autounselectify;return this},selectionType:function(a){var b=this._private;b.selectionType==null&&(b.selectionType="single");if(a!==void 0){if(a==="additive"||a==="single")b.selectionType=a}else return b.selectionType;return this},panningEnabled:function(a){if(a!==void 0)this._private.panningEnabled=a?!0:!1;else return this._private.panningEnabled;
return this},userPanningEnabled:function(a){if(a!==void 0)this._private.userPanningEnabled=a?!0:!1;else return this._private.userPanningEnabled;return this},zoomingEnabled:function(a){if(a!==void 0)this._private.zoomingEnabled=a?!0:!1;else return this._private.zoomingEnabled;return this},userZoomingEnabled:function(a){if(a!==void 0)this._private.userZoomingEnabled=a?!0:!1;else return this._private.userZoomingEnabled;return this},boxSelectionEnabled:function(a){if(a!==void 0)this._private.boxSelectionEnabled=
a?!0:!1;else return this._private.boxSelectionEnabled;return this},pan:function(){var a=arguments,b=this._private.pan;switch(a.length){case 0:return b;case 1:if(Qa(a[0])){var c=a[0];return b[c]}if(hb(a[0])){if(!this._private.panningEnabled)return this;a=a[0];c=a.x;a=a.y;Ba(c)&&(b.x=c);Ba(a)&&(b.y=a);this.emit("pan viewport")}break;case 2:if(!this._private.panningEnabled)return this;c=a[0];a=a[1];c!=="x"&&c!=="y"||!Ba(a)||(b[c]=a);this.emit("pan viewport")}this.notify("viewport");return this},panBy:function(a,
b){var c=arguments,d=this._private.pan;if(!this._private.panningEnabled)return this;switch(c.length){case 1:if(hb(a)){var e=c[0];c=e.x;e=e.y;Ba(c)&&(d.x+=c);Ba(e)&&(d.y+=e);this.emit("pan viewport")}break;case 2:c=a,e=b,c!=="x"&&c!=="y"||!Ba(e)||(d[c]+=e),this.emit("pan viewport")}this.notify("viewport");return this},gc:function(){this.notify("gc")},fit:function(a,b){if(a=this.getFitViewport(a,b))b=this._private,b.zoom=a.zoom,b.pan=a.pan,this.emit("pan zoom viewport"),this.notify("viewport");return this},
getFitViewport:function(a,b){Ba(a)&&b===void 0&&(b=a,a=void 0);if(this._private.panningEnabled&&this._private.zoomingEnabled){if(Qa(a))a=this.$(a);else{var c=a;if(hb(c)&&Ba(c.x1)&&Ba(c.x2)&&Ba(c.y1)&&Ba(c.y2)){var d=a;d={x1:d.x1,y1:d.y1,x2:d.x2,y2:d.y2};d.w=d.x2-d.x1;d.h=d.y2-d.y1}else Yb(a)||(a=this.mutableElements())}if(!Yb(a)||!a.empty())if(d=d||a.boundingBox(),a=this.width(),c=this.height(),b=Ba(b)?b:0,!isNaN(a)&&!isNaN(c)&&a>0&&c>0&&!isNaN(d.w)&&!isNaN(d.h)&&d.w>0&&d.h>0)return b=Math.min((a-
2*b)/d.w,(c-2*b)/d.h),b=b>this._private.maxZoom?this._private.maxZoom:b,b=b<this._private.minZoom?this._private.minZoom:b,{zoom:b,pan:{x:(a-b*(d.x1+d.x2))/2,y:(c-b*(d.y1+d.y2))/2}}}},zoomRange:function(a,b){var c=this._private;b==null&&(b=a,a=b.min,b=b.max);Ba(a)&&Ba(b)&&a<=b?(c.minZoom=a,c.maxZoom=b):Ba(a)&&b===void 0&&a<=c.maxZoom?c.minZoom=a:Ba(b)&&a===void 0&&b>=c.minZoom&&(c.maxZoom=b);return this},minZoom:function(a){return a===void 0?this._private.minZoom:this.zoomRange({min:a})},maxZoom:function(a){return a===
void 0?this._private.maxZoom:this.zoomRange({max:a})},getZoomedViewport:function(a){var b=this._private,c=b.pan,d=b.zoom,e=!1;b.zoomingEnabled||(e=!0);if(Ba(a))var f=a;else if(hb(a)){f=a.level;if(a.position!=null)var g=fe(a.position,d,c);else a.renderedPosition!=null&&(g=a.renderedPosition);g==null||b.panningEnabled||(e=!0)}f=f>b.maxZoom?b.maxZoom:f;f=f<b.minZoom?b.minZoom:f;return!e&&Ba(f)&&f!==d&&(g==null||Ba(g.x)&&Ba(g.y))?g!=null?(a=f,{zoomed:!0,panned:!0,zoom:a,pan:{x:-a/d*(g.x-c.x)+g.x,y:-a/
d*(g.y-c.y)+g.y}}):{zoomed:!0,panned:!1,zoom:f,pan:c}:null},zoom:function(a){if(a===void 0)return this._private.zoom;a=this.getZoomedViewport(a);var b=this._private;if(a==null||!a.zoomed)return this;b.zoom=a.zoom;a.panned&&(b.pan.x=a.pan.x,b.pan.y=a.pan.y);this.emit("zoom"+(a.panned?" pan":"")+" viewport");this.notify("viewport");return this},viewport:function(a){var b=this._private,c=!0,d=!0,e=[],f=!1,g=!1;if(!a)return this;Ba(a.zoom)||(c=!1);hb(a.pan)||(d=!1);if(!c&&!d)return this;c&&(c=a.zoom,
c<b.minZoom||c>b.maxZoom||!b.zoomingEnabled?f=!0:(b.zoom=c,e.push("zoom")));!d||f&&a.cancelOnFailedZoom||!b.panningEnabled||(a=a.pan,Ba(a.x)&&(b.pan.x=a.x,g=!1),Ba(a.y)&&(b.pan.y=a.y,g=!1),g||e.push("pan"));e.length>0&&(e.push("viewport"),this.emit(e.join(" ")),this.notify("viewport"));return this},center:function(a){if(a=this.getCenterPan(a))this._private.pan=a,this.emit("pan viewport"),this.notify("viewport");return this},getCenterPan:function(a,b){if(this._private.panningEnabled&&(Qa(a)?a=this.mutableElements().filter(a):
Yb(a)||(a=this.mutableElements()),a.length!==0)){a=a.boundingBox();var c=this.width(),d=this.height();b=b===void 0?this._private.zoom:b;return{x:(c-b*(a.x1+a.x2))/2,y:(d-b*(a.y1+a.y2))/2}}},reset:function(){if(!this._private.panningEnabled||!this._private.zoomingEnabled)return this;this.viewport({pan:{x:0,y:0},zoom:1});return this},invalidateSize:function(){this._private.sizeCache=null},size:function(){var a=this._private,b=a.container,c;(c=a.sizeCache)||(b?(c=this.window().getComputedStyle(b),b=
{width:b.clientWidth-parseFloat(c.getPropertyValue("padding-left"))-parseFloat(c.getPropertyValue("padding-right")),height:b.clientHeight-parseFloat(c.getPropertyValue("padding-top"))-parseFloat(c.getPropertyValue("padding-bottom"))}):b={width:1,height:1},c=b);return a.sizeCache=c},width:function(){return this.size().width},height:function(){return this.size().height},extent:function(){var a=this._private.pan,b=this._private.zoom,c=this.renderedExtent();a={x1:(c.x1-a.x)/b,x2:(c.x2-a.x)/b,y1:(c.y1-
a.y)/b,y2:(c.y2-a.y)/b};a.w=a.x2-a.x1;a.h=a.y2-a.y1;return a},renderedExtent:function(){var a=this.width(),b=this.height();return{x1:0,y1:0,x2:a,y2:b,w:a,h:b}},multiClickDebounceTime:function(a){if(a)this._private.multiClickDebounceTime=a;else return this._private.multiClickDebounceTime;return this}};Tc.centre=Tc.center;Tc.autolockNodes=Tc.autolock;Tc.autoungrabifyNodes=Tc.autoungrabify;var Md={data:nb.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,
triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeData:nb.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),scratch:nb.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:nb.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0})};Md.attr=Md.data;Md.removeAttr=
Md.removeData;var Bd=function(a){var b=this;a=Ra({},a);var c=a.container;c&&!Zd(c)&&Zd(c[0])&&(c=c[0]);var d=c?c._cyreg:null;if(d=d||{},d.cy)d.cy.destroy(),d={};var e=d.readies=d.readies||[];c&&(c._cyreg=d);d.cy=b;var f=Gb!==void 0&&c!==void 0&&!a.headless,g=a;g.layout=Ra({name:f?"grid":"null"},g.layout);g.renderer=Ra({name:f?"canvas":"null"},g.renderer);a=function(l,m,n){return m!==void 0?m:n!==void 0?n:l};var h=this._private={container:c,ready:!1,options:g,elements:new Lb(this),listeners:[],aniEles:new Lb(this),
data:g.data||{},scratch:{},layout:null,renderer:null,destroyed:!1,notificationsEnabled:!0,minZoom:1E-50,maxZoom:1E50,zoomingEnabled:a(!0,g.zoomingEnabled),userZoomingEnabled:a(!0,g.userZoomingEnabled),panningEnabled:a(!0,g.panningEnabled),userPanningEnabled:a(!0,g.userPanningEnabled),boxSelectionEnabled:a(!0,g.boxSelectionEnabled),autolock:a(!1,g.autolock,g.autolockNodes),autoungrabify:a(!1,g.autoungrabify,g.autoungrabifyNodes),autounselectify:a(!1,g.autounselectify),styleEnabled:g.styleEnabled===
void 0?f:g.styleEnabled,zoom:Ba(g.zoom)?g.zoom:1,pan:{x:hb(g.pan)&&Ba(g.pan.x)?g.pan.x:0,y:hb(g.pan)&&Ba(g.pan.y)?g.pan.y:0},animation:{current:[],queue:[]},hasCompoundNodes:!1,multiClickDebounceTime:a(250,g.multiClickDebounceTime)};this.createEmitter();this.selectionType(g.selectionType);this.zoomRange({min:g.minZoom,max:g.maxZoom});h.styleEnabled&&b.setStyle([]);c=Ra({},g,g.renderer);b.initRenderer(c);var k=function(l,m,n){b.notifications(!1);var p=b.mutableElements();p.length>0&&p.remove();l!=
null&&(hb(l)||rb(l))&&b.add(l);b.one("layoutready",function(q){b.notifications(!0);b.emit(q);b.one("load",m);b.emitAndNotify("load")}).one("layoutstop",function(){b.one("done",n);b.emit("done")});l=Ra({},b._private.options.layout);l.eles=b.elements();b.layout(l).run()};(function(l,m){if(l.some(Cl))return dd.all(l).then(m);m(l)})([g.style,g.elements],function(l){var m=l[0];l=l[1];h.styleEnabled&&b.style().append(m);k(l,function(){b.startAnimationLoop();h.ready=!0;if(zb(g.ready))b.on("ready",g.ready);
for(var n=0;n<e.length;n++)b.on("ready",e[n]);d&&(d.readies=[]);b.emit("ready")},g.done)})},ze=Bd.prototype;Ra(ze,{instanceString:function(){return"core"},isReady:function(){return this._private.ready},destroyed:function(){return this._private.destroyed},ready:function(a){if(this.isReady())this.emitter().emit("ready",[],a);else this.on("ready",a);return this},destroy:function(){if(!this.destroyed())return this.stopAnimationLoop(),this.destroyRenderer(),this.emit("destroy"),this._private.destroyed=
!0,this},hasElementWithId:function(a){return this._private.elements.hasElementWithId(a)},getElementById:function(a){return this._private.elements.getElementById(a)},hasCompoundNodes:function(){return this._private.hasCompoundNodes},headless:function(){return this._private.renderer.isHeadless()},styleEnabled:function(){return this._private.styleEnabled},addToPool:function(a){this._private.elements.merge(a);return this},removeFromPool:function(a){this._private.elements.unmerge(a);return this},container:function(){return this._private.container||
null},window:function(){if(this._private.container==null)return Gb;var a=this._private.container.ownerDocument;return a===void 0||a==null?Gb:a.defaultView||Gb},mount:function(a){if(a!=null){var b=this._private,c=b.options;!Zd(a)&&Zd(a[0])&&(a=a[0]);this.stopAnimationLoop();this.destroyRenderer();b.container=a;b.styleEnabled=!0;this.invalidateSize();this.initRenderer(Ra({},c,c.renderer,{name:c.renderer.name==="null"?"canvas":c.renderer.name}));this.startAnimationLoop();this.style(c.style);this.emit("mount");
return this}},unmount:function(){this.stopAnimationLoop();this.destroyRenderer();this.initRenderer({name:"null"});this.emit("unmount");return this},options:function(){return mc(this._private.options)},json:function(a){var b=this,c=b._private,d=b.mutableElements();if(hb(a)){b.startBatch();if(a.elements){var e={},f=function(p,q){for(var t=[],u=[],x=0;x<p.length;x++){var v=p[x];if(v.data.id){var w=""+v.data.id,C=b.getElementById(w);e[w]=!0;C.length!==0?u.push({ele:C,json:v}):(q&&(v.group=q),t.push(v))}else mb("cy.json() cannot handle elements without an ID attribute")}b.add(t);
for(p=0;p<u.length;p++)q=u[p],q.ele.json(q.json)};if(rb(a.elements))f(a.elements);else for(var g=["nodes","edges"],h=0;h<g.length;h++){var k=g[h],l=a.elements[k];rb(l)&&f(l,k)}var m=b.collection();d.filter(function(p){return!e[p.id()]}).forEach(function(p){p.isParent()?m.merge(p):p.remove()});m.forEach(function(p){return p.children().move({parent:null})});m.forEach(function(p){return b.getElementById(p.id()).remove()})}a.style&&b.style(a.style);a.zoom!=null&&a.zoom!==c.zoom&&b.zoom(a.zoom);a.pan&&
(a.pan.x!==c.pan.x||a.pan.y!==c.pan.y)&&b.pan(a.pan);a.data&&b.data(a.data);c="minZoom maxZoom zoomingEnabled userZoomingEnabled panningEnabled userPanningEnabled boxSelectionEnabled autolock autoungrabify autounselectify multiClickDebounceTime".split(" ");for(d=0;d<c.length;d++)if(f=c[d],a[f]!=null)b[f](a[f]);b.endBatch();return this}var n={};a?n.elements=this.elements().map(function(p){return p.json()}):(n.elements={},d.forEach(function(p){var q=p.group();n.elements[q]||(n.elements[q]=[]);n.elements[q].push(p.json())}));
this._private.styleEnabled&&(n.style=b.style().json());n.data=mc(b.data());a=c.options;n.zoomingEnabled=c.zoomingEnabled;n.userZoomingEnabled=c.userZoomingEnabled;n.zoom=c.zoom;n.minZoom=c.minZoom;n.maxZoom=c.maxZoom;n.panningEnabled=c.panningEnabled;n.userPanningEnabled=c.userPanningEnabled;n.pan=mc(c.pan);n.boxSelectionEnabled=c.boxSelectionEnabled;n.renderer=mc(a.renderer);n.hideEdgesOnViewport=a.hideEdgesOnViewport;n.textureOnViewport=a.textureOnViewport;n.wheelSensitivity=a.wheelSensitivity;
n.motionBlur=a.motionBlur;n.multiClickDebounceTime=a.multiClickDebounceTime;return n}});ze.$id=ze.getElementById;[{add:function(a){if(Yb(a))if(a._private.cy===this)a=a.restore();else{for(var b=[],c=0;c<a.length;c++)b.push(a[c].json());a=new Lb(this,b)}else if(rb(a))a=new Lb(this,a);else if(hb(a)&&(rb(a.nodes)||rb(a.edges))){b=[];c=["nodes","edges"];for(var d=0,e=c.length;d<e;d++){var f=c[d],g=a[f];if(rb(g))for(var h=0,k=g.length;h<k;h++){var l=Ra({group:f},g[h]);b.push(l)}}a=new Lb(this,b)}else a=
(new de(this,a)).collection();return a},remove:function(a){Yb(a)||Qa(a)&&(a=this.$(a));return a.remove()}},Sm,ek,nf,xe,{notify:function(a,b){var c=this._private;this.batching()?(c.batchNotifications=c.batchNotifications||{},a=c.batchNotifications[a]=c.batchNotifications[a]||this.collection(),b!=null&&a.merge(b)):c.notificationsEnabled&&(c=this.renderer(),!this.destroyed()&&c&&c.notify(a,b))},notifications:function(a){var b=this._private;if(a===void 0)return b.notificationsEnabled;b.notificationsEnabled=
a?!0:!1;return this},noNotifications:function(a){this.notifications(!1);a();this.notifications(!0)},batching:function(){return this._private.batchCount>0},startBatch:function(){var a=this._private;a.batchCount==null&&(a.batchCount=0);a.batchCount===0&&(a.batchStyleEles=this.collection(),a.batchNotifications={});a.batchCount++;return this},endBatch:function(){var a=this._private;if(a.batchCount===0)return this;a.batchCount--;if(a.batchCount===0){a.batchStyleEles.updateStyle();var b=this.renderer();
Object.keys(a.batchNotifications).forEach(function(c){var d=a.batchNotifications[c];d.empty()?b.notify(c):b.notify(c,d)})}return this},batch:function(a){this.startBatch();a();this.endBatch();return this},batchData:function(a){var b=this;return this.batch(function(){for(var c=Object.keys(a),d=0;d<c.length;d++){var e=c[d],f=a[e];b.getElementById(e).data(f)}})}},of,ye,{style:function(a){a&&this.setStyle(a).update();return this._private.style},setStyle:function(a){var b=this._private;wc(a)==="stylesheet"?
b.style=a.generateStyle(this):rb(a)?b.style=Jb.fromJson(this,a):Qa(a)?b.style=Jb.fromString(this,a):b.style=Jb(this);return b.style},updateStyle:function(){this.mutableElements().updateStyle()}},Tc,Md].forEach(function(a){Ra(ze,a)});var Vk={fit:!0,directed:!1,padding:30,circle:!1,grid:!1,spacingFactor:1.75,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,roots:void 0,depthSort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(a,b){return!0},ready:void 0,
stop:void 0,transform:function(a,b){return b}},Wk={maximal:!1,acyclic:!1},qd=function(a){return a.scratch("breadthfirst")},fk=function(a,b){return a.scratch("breadthfirst",b)};ei.prototype.run=function(){var a=this.options,b=a.cy,c=a.eles,d=c.nodes().filter(function(Z){return Z.isChildless()}),e=a.directed,f=a.acyclic||a.maximal||a.maximalAdjustments>0,g=!!a.boundingBox,h=b.extent(),k=Vb(g?a.boundingBox:{x1:h.x1,y1:h.y1,w:h.w,h:h.h});if(Yb(a.roots))var l=a.roots;else if(rb(a.roots)){h=[];for(var m=
0;m<a.roots.length;m++){var n=b.getElementById(a.roots[m]);h.push(n)}l=b.collection(h)}else if(Qa(a.roots))l=b.$(a.roots);else if(e)l=d.roots();else{var p=c.components();l=b.collection();b=function(){var Z=p[q],fa=Z.maxDegree(!1);Z=Z.filter(function(sa){return sa.degree(!1)===fa});l=l.add(Z)};for(var q=0;q<p.length;q++)b()}var t=[],u={},x=function(Z,fa){t[fa]==null&&(t[fa]=[]);var sa=t[fa].length;t[fa].push(Z);fk(Z,{index:sa,depth:fa})},v=function(Z,fa){var sa=qd(Z);t[sa.depth][sa.index]=null;Z.isChildless()&&
x(Z,fa)};c.bfs({roots:l,directed:a.directed,visit:function(Z,fa,sa,Ea,ya){Z=Z[0];fa=Z.id();Z.isChildless()&&x(Z,ya);u[fa]=!0}});b=[];for(h=0;h<d.length;h++)m=d[h],u[m.id()]||b.push(m);var w=function(Z){for(var fa=t[Z],sa=0;sa<fa.length;sa++){var Ea=fa[sa];Ea==null?(fa.splice(sa,1),sa--):fk(Ea,{depth:Z,index:sa})}};h=function(Z,fa){for(var sa=qd(Z),Ea=Z.incomers().filter(function(Ha){return Ha.isNode()&&c.has(Ha)}),ya=-1,aa=Z.id(),na=0;na<Ea.length;na++){var Ga=qd(Ea[na]);ya=Math.max(ya,Ga.depth)}if(sa.depth<=
ya){if(!a.acyclic&&fa[aa])return null;sa=ya+1;v(Z,sa);fa[aa]=sa;return!0}return!1};if(e&&f){var C=[];e={};f=function(Z){return C.push(Z)};for(d.forEach(function(Z){return C.push(Z)});C.length>0;)if(m=C.shift(),n=h(m,e))m.outgoers().filter(function(Z){return Z.isNode()&&c.has(Z)}).forEach(f);else if(n===null){mb("Detected double maximal shift for node `"+m.id()+"`.  Bailing maximal adjustment due to cycle.  Use `options.maximal: true` only on DAGs.");break}}var y=0;if(a.avoidOverlap)for(e=0;e<d.length;e++)f=
d[e].layoutDimensions(a),y=Math.max(y,f.w,f.h);var B={},M=function(Z){if(B[Z.id()])return B[Z.id()];for(var fa=qd(Z).depth,sa=Z.neighborhood(),Ea=0,ya=0,aa=0;aa<sa.length;aa++){var na=sa[aa];if(!na.isEdge()&&!na.isParent()&&d.has(na)){var Ga=qd(na);if(Ga!=null&&(na=Ga.index,Ga=Ga.depth,na!=null&&Ga!=null)){var Ha=t[Ga].length;Ga<fa&&(Ea+=na/Ha,ya++)}}}ya=Math.max(1,ya);Ea/=ya;ya===0&&(Ea=0);return B[Z.id()]=Ea};e=function(Z,fa){var sa=M(Z),Ea=M(fa);sa-=Ea;sa===0?(Z=Z.id(),fa=fa.id(),fa=Z<fa?-1:Z>
fa?1:0):fa=sa;return fa};a.depthSort!==void 0&&(e=a.depthSort);var Q=t.length;for(f=0;f<Q;f++)t[f].sort(e),w(f);e=[];for(f=0;f<b.length;f++)e.push(b[f]);b=function(){for(var Z=0;Z<Q;Z++)w(Z)};e.length&&(t.unshift(e),Q=t.length,b());for(b=0;b<Q;b++);var ja=k.x1+k.w/2,da=k.y1+k.h/2,Da=d.reduce(function(Z,fa){fa=fa.boundingBox({includeLabels:a.nodeDimensionsIncludeLabels});return{w:Z.w===-1?fa.w:(Z.w+fa.w)/2,h:Z.h===-1?fa.h:(Z.h+fa.h)/2}},{w:-1,h:-1}),pa=Math.max(Q===1?0:g?(k.h-a.padding*2-Da.h)/(Q-
1):(k.h-a.padding*2-Da.h)/(Q+1),y),ra=t.reduce(function(Z,fa){return Math.max(Z,fa.length)},0);c.nodes().layoutPositions(this,a,function(Z){var fa=qd(Z);Z=fa.depth;fa=fa.index;if(a.circle){var sa=Math.min(k.w/2/Q,k.h/2/Q);sa=Math.max(sa,y);sa=sa*Z+sa-(Q>0&&t[0].length<=3?sa/2:0);fa*=2*Math.PI/t[Z].length;Z===0&&t[0].length===1&&(sa=1);return{x:ja+sa*Math.cos(fa),y:da+sa*Math.sin(fa)}}sa=t[Z].length;return{x:ja+(fa+1-(sa+1)/2)*Math.max(sa===1?0:g?(k.w-a.padding*2-Da.w)/((a.grid?ra:sa)-1):(k.w-a.padding*
2-Da.w)/((a.grid?ra:sa)+1),y),y:da+(Z+1-(Q+1)/2)*pa}});return this};var Xk={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,radius:void 0,startAngle:1.5*Math.PI,sweep:void 0,clockwise:!0,sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(a,b){return!0},ready:void 0,stop:void 0,transform:function(a,b){return b}};fi.prototype.run=function(){var a=this.options,b=a.cy,c=a.eles,d=a.counterclockwise!==void 0?
!a.counterclockwise:a.clockwise,e=c.nodes().not(":parent");a.sort&&(e=e.sort(a.sort));for(var f=Vb(a.boundingBox?a.boundingBox:{x1:0,y1:0,w:b.width(),h:b.height()}),g=f.x1+f.w/2,h=f.y1+f.h/2,k=(a.sweep===void 0?2*Math.PI-2*Math.PI/e.length:a.sweep)/Math.max(1,e.length-1),l,m=b=0;m<e.length;m++){var n=e[m].layoutDimensions(a);b=Math.max(b,n.w,n.h)}l=Ba(a.radius)?a.radius:e.length<=1?0:Math.min(f.h,f.w)/2-b;e.length>1&&a.avoidOverlap&&(b*=1.75,e=Math.cos(k)-Math.cos(0),f=Math.sin(k)-Math.sin(0),l=Math.max(Math.sqrt(b*
b/(e*e+f*f)),l));c.nodes().layoutPositions(this,a,function(p,q){p=a.startAngle+q*k*(d?1:-1);return{x:g+l*Math.cos(p),y:h+l*Math.sin(p)}});return this};var Yk={fit:!0,padding:30,startAngle:1.5*Math.PI,sweep:void 0,clockwise:!0,equidistant:!1,minNodeSpacing:10,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,height:void 0,width:void 0,spacingFactor:void 0,concentric:function(a){return a.degree()},levelWidth:function(a){return a.maxDegree()/4},animate:!1,animationDuration:500,animationEasing:void 0,
animateFilter:function(a,b){return!0},ready:void 0,stop:void 0,transform:function(a,b){return b}};gi.prototype.run=function(){var a=this.options,b=a.counterclockwise!==void 0?!a.counterclockwise:a.clockwise,c=a.cy,d=a.eles,e=d.nodes().not(":parent"),f=Vb(a.boundingBox?a.boundingBox:{x1:0,y1:0,w:c.width(),h:c.height()});c=f.x1+f.w/2;for(var g=f.y1+f.h/2,h=[],k=0,l=0;l<e.length;l++){var m=e[l],n=void 0;n=a.concentric(m);h.push({value:n,node:m});m._private.scratch.concentric=n}e.updateStyle();for(l=
0;l<e.length;l++)m=e[l].layoutDimensions(a),k=Math.max(k,m.w,m.h);h.sort(function(t,u){return u.value-t.value});l=a.levelWidth(e);e=[[]];m=e[0];for(n=0;n<h.length;n++){var p=h[n];m.length>0&&Math.abs(m[0].value-p.value)>=l&&(m=[],e.push(m));m.push(p)}h=k+a.minNodeSpacing;a.avoidOverlap||(h=Math.min(h,(Math.min(f.w,f.h)/2-h)/(e.length+(e.length>0&&e[0].length>1)?1:0)));for(k=f=0;k<e.length;k++)l=e[k],n=l.dTheta=(a.sweep===void 0?2*Math.PI-2*Math.PI/l.length:a.sweep)/Math.max(1,l.length-1),l.length>
1&&a.avoidOverlap&&(m=Math.cos(n)-Math.cos(0),n=Math.sin(n)-Math.sin(0),f=Math.max(Math.sqrt(h*h/(m*m+n*n)),f)),l.r=f,f+=h;if(a.equidistant){for(k=h=f=0;k<e.length;k++)f=Math.max(f,e[k].r-h);for(k=h=0;k<e.length;k++)l=e[k],k===0&&(h=l.r),l.r=h,h+=f}var q={};for(f=0;f<e.length;f++)for(h=e[f],k=h.dTheta,l=h.r,m=0;m<h.length;m++)n=a.startAngle+(b?1:-1)*k*m,n={x:c+l*Math.cos(n),y:g+l*Math.sin(n)},q[h[m].node.id()]=n;d.nodes().layoutPositions(this,a,function(t){t=t.id();return q[t]});return this};var gk,
Zk={ready:function(){},stop:function(){},animate:!0,animationEasing:void 0,animationDuration:void 0,animateFilter:function(a,b){return!0},animationThreshold:250,refresh:20,fit:!0,padding:30,boundingBox:void 0,nodeDimensionsIncludeLabels:!1,randomize:!1,componentSpacing:40,nodeRepulsion:function(a){return 2048},nodeOverlap:4,idealEdgeLength:function(a){return 32},edgeElasticity:function(a){return 32},nestingFactor:1.2,gravity:1,numIter:1E3,initialTemp:1E3,coolingFactor:.99,minTemp:1};Vd.prototype.run=
function(){var a=this.options,b=a.cy,c=this;c.stopped=!1;a.animate!==!0&&a.animate!==!1||c.emit({type:"layoutstart",layout:c});gk=!0===a.debug?!0:!1;var d=Vm(b,c,a);gk&&Wm(d);a.randomize&&Xm(d);var e=lc(),f=function(){Ym(d,b,a);!0===a.fit&&b.fit(a.padding)},g=function(n){if(c.stopped||n>=a.numIter)return!1;for(n=0;n<d.graphSet.length;n++)for(var p=d.graphSet[n],q=p.length,t=0;t<q;t++)for(var u=d.layoutNodes[d.idToIndex[p[t]]],x=t+1;x<q;x++){var v=u,w=d.layoutNodes[d.idToIndex[p[x]]],C=d,y=a;if(v.cmptId===
w.cmptId||C.isCompound){var B=w.positionX-v.positionX;C=w.positionY-v.positionY;0===B&&0===C&&(B=-1+2*Math.random(),C=-1+2*Math.random());var M=B>0?v.maxX-w.minX:w.maxX-v.minX;var Q=C>0?v.maxY-w.minY:w.maxY-v.minY;M=M>=0&&Q>=0?Math.sqrt(M*M+Q*Q):0;M>0?(M*=y.nodeOverlap,y=Math.sqrt(B*B+C*C),B=M*B/y,C=M*C/y):(y=Ae(v,B,C),B=Ae(w,-1*B,-1*C),C=B.x-y.x,Q=B.y-y.y,B=C*C+Q*Q,y=Math.sqrt(B),M=(v.nodeRepulsion+w.nodeRepulsion)/B,B=M*C/y,C=M*Q/y);v.isLocked||(v.offsetX-=B,v.offsetY-=C);w.isLocked||(w.offsetX+=
B,w.offsetY+=C)}}for(n=0;n<d.edgeSize;n++)if(t=d.layoutEdges[n],p=d.layoutNodes[d.idToIndex[t.sourceId]],q=d.layoutNodes[d.idToIndex[t.targetId]],u=q.positionX-p.positionX,v=q.positionY-p.positionY,0!==u||0!==v)x=Ae(p,u,v),v=Ae(q,-1*u,-1*v),u=v.x-x.x,x=v.y-x.y,v=Math.sqrt(u*u+x*x),t=Math.pow(t.idealLength-v,2)/t.elasticity,0!==v?(u=t*u/v,t=t*x/v):t=u=0,p.isLocked||(p.offsetX+=u,p.offsetY+=t),q.isLocked||(q.offsetX-=u,q.offsetY-=t);if(a.gravity!==0)for(n=0;n<d.graphSet.length;n++)for(p=d.graphSet[n],
q=p.length,0===n?(t=d.clientHeight/2,u=d.clientWidth/2):(u=d.layoutNodes[d.idToIndex[d.layoutNodes[d.idToIndex[p[0]]].parentId]],t=u.positionX,u=u.positionY),x=0;x<q;x++)v=d.layoutNodes[d.idToIndex[p[x]]],v.isLocked||(w=t-v.positionX,B=u-v.positionY,C=Math.sqrt(w*w+B*B),C>1&&(B=a.gravity*B/C,v.offsetX+=a.gravity*w/C,v.offsetY+=B));n=[];p=0;q=-1;n.push.apply(n,d.graphSet[0]);for(q+=d.graphSet[0].length;p<=q;)if(t=n[p++],t=d.layoutNodes[d.idToIndex[t]],u=t.children,0<u.length&&!t.isLocked){x=t.offsetX;
v=t.offsetY;for(w=0;w<u.length;w++)C=d.layoutNodes[d.idToIndex[u[w]]],C.offsetX+=x,C.offsetY+=v,n[++q]=u[w];t.offsetX=0;t.offsetY=0}for(n=0;n<d.nodeSize;n++)p=d.layoutNodes[n],0<p.children.length&&(p.maxX=void 0,p.minX=void 0,p.maxY=void 0,p.minY=void 0);for(n=0;n<d.nodeSize;n++)p=d.layoutNodes[n],0<p.children.length||p.isLocked||(q=p.offsetX,t=p.offsetY,u=d.temperature,x=Math.sqrt(q*q+t*t),q=x>u?{x:u*q/x,y:u*t/x}:{x:q,y:t},p.positionX+=q.x,p.positionY+=q.y,p.offsetX=0,p.offsetY=0,p.minX=p.positionX-
p.width,p.maxX=p.positionX+p.width,p.minY=p.positionY-p.height,p.maxY=p.positionY+p.height,hk(p,d));for(n=0;n<d.nodeSize;n++)p=d.layoutNodes[n],0<p.children.length&&!p.isLocked&&(p.positionX=(p.maxX+p.minX)/2,p.positionY=(p.maxY+p.minY)/2,p.width=p.maxX-p.minX,p.height=p.maxY-p.minY);d.temperature*=a.coolingFactor;return d.temperature<a.minTemp?!1:!0},h=function(){if(a.animate===!0||a.animate===!1)f(),c.one("layoutstop",a.stop),c.emit({type:"layoutstop",layout:c});else{var n=a.eles.nodes(),p=ik(d,
a,n);n.layoutPositions(c,a,p)}},k=0,l=!0;if(a.animate===!0){var m=function(){for(var n=0;l&&n<a.refresh;)l=g(k),k++,n++;l?(lc()-e>=a.animationThreshold&&f(),ae(m)):(jk(d,a),h())};m()}else{for(;l;)l=g(k),k++;jk(d,a);h()}return this};Vd.prototype.stop=function(){this.stopped=!0;this.thread&&this.thread.stop();this.emit("layoutstop");return this};Vd.prototype.destroy=function(){this.thread&&this.thread.stop();return this};var Vm=function(a,b,c){b=c.eles.edges();var d=c.eles.nodes(),e=Vb(c.boundingBox?
c.boundingBox:{x1:0,y1:0,w:a.width(),h:a.height()});a={isCompound:a.hasCompoundNodes(),layoutNodes:[],idToIndex:{},nodeSize:d.size(),graphSet:[],indexToGraph:[],layoutEdges:[],edgeSize:b.size(),temperature:c.initialTemp,clientWidth:e.w,clientHeight:e.h,boundingBox:e};var f=c.eles.components(),g={};for(e=0;e<f.length;e++)for(var h=f[e],k=0;k<h.length;k++){var l=h[k];g[l.id()]=e}for(e=0;e<a.nodeSize;e++)k=d[e],f=k.layoutDimensions(c),l={},l.isLocked=k.locked(),l.id=k.data("id"),l.parentId=k.data("parent"),
l.cmptId=g[k.id()],l.children=[],l.positionX=k.position("x"),l.positionY=k.position("y"),l.offsetX=0,l.offsetY=0,l.height=f.w,l.width=f.h,l.maxX=l.positionX+l.width/2,l.minX=l.positionX-l.width/2,l.maxY=l.positionY+l.height/2,l.minY=l.positionY-l.height/2,l.padLeft=parseFloat(k.style("padding")),l.padRight=parseFloat(k.style("padding")),l.padTop=parseFloat(k.style("padding")),l.padBottom=parseFloat(k.style("padding")),l.nodeRepulsion=zb(c.nodeRepulsion)?c.nodeRepulsion(k):c.nodeRepulsion,a.layoutNodes.push(l),
a.idToIndex[l.id]=e;d=[];g=0;f=-1;l=[];for(e=0;e<a.nodeSize;e++)k=a.layoutNodes[e],h=k.parentId,null!=h?a.layoutNodes[a.idToIndex[h]].children.push(k.id):(d[++f]=k.id,l.push(k.id));for(a.graphSet.push(l);g<=f;)if(e=d[g++],l=a.layoutNodes[a.idToIndex[e]],l=l.children,l.length>0)for(a.graphSet.push(l),e=0;e<l.length;e++)d[++f]=l[e];for(e=0;e<a.graphSet.length;e++)for(d=a.graphSet[e],k=0;k<d.length;k++)a.indexToGraph[a.idToIndex[d[k]]]=e;for(e=0;e<a.edgeSize;e++){l=b[e];d={};d.id=l.data("id");d.sourceId=
l.data("source");d.targetId=l.data("target");k=zb(c.idealEdgeLength)?c.idealEdgeLength(l):c.idealEdgeLength;g=zb(c.edgeElasticity)?c.edgeElasticity(l):c.edgeElasticity;l=a.idToIndex[d.sourceId];f=a.idToIndex[d.targetId];if(a.indexToGraph[l]!=a.indexToGraph[f]){h=kk(d.sourceId,d.targetId,0,a);h=2>h.count?0:h.graph;h=a.graphSet[h];var m=0;for(l=a.layoutNodes[l];-1===h.indexOf(l.id);)l=a.layoutNodes[a.idToIndex[l.parentId]],m++;for(l=a.layoutNodes[f];-1===h.indexOf(l.id);)l=a.layoutNodes[a.idToIndex[l.parentId]],
m++;k*=m*c.nestingFactor}d.idealLength=k;d.elasticity=g;a.layoutEdges.push(d)}return a},kk=function(a,b,c,d){var e=d.graphSet[c];if(-1<e.indexOf(a)&&-1<e.indexOf(b))return{count:2,graph:c};for(var f=0,g=0;g<e.length;g++){var h=d.layoutNodes[d.idToIndex[e[g]]].children;if(0!==h.length&&(h=kk(a,b,d.indexToGraph[d.idToIndex[h[0]]],d),0!==h.count))if(1===h.count){if(f++,2===f)break}else return h}return{count:f,graph:c}},Wm,Xm=function(a,b){b=a.clientWidth;for(var c=a.clientHeight,d=0;d<a.nodeSize;d++){var e=
a.layoutNodes[d];0!==e.children.length||e.isLocked||(e.positionX=Math.random()*b,e.positionY=Math.random()*c)}},ik=function(a,b,c){var d=a.boundingBox,e=Infinity,f=-Infinity,g=Infinity,h=-Infinity;if(b.boundingBox){c.forEach(function(m){m=a.layoutNodes[a.idToIndex[m.data("id")]];e=Math.min(e,m.positionX);f=Math.max(f,m.positionX);g=Math.min(g,m.positionY);h=Math.max(h,m.positionY)});var k=f-e;var l=h-g}return function(m,n){m=a.layoutNodes[a.idToIndex[m.data("id")]];return b.boundingBox?{x:d.x1+(m.positionX-
e)/k*d.w,y:d.y1+(m.positionY-g)/l*d.h}:{x:m.positionX,y:m.positionY}}},Ym=function(a,b,c){b=c.layout;var d=c.eles.nodes(),e=ik(a,c,d);d.positions(e);!0!==a.ready&&(a.ready=!0,b.one("layoutready",c.ready),b.emit({type:"layoutready",layout:this}))},Ae=function(a,b,c){var d=a.positionX,e=a.positionY,f=a.height||1;a=a.width||1;var g=c/b,h=f/a,k={};if(0===b&&0<c||0===b&&0>c)return k.x=d,k.y=e+f/2,k;if(0<b&&-1*h<=g&&g<=h)return k.x=d+a/2,k.y=e+a*c/2/b,k;if(0>b&&-1*h<=g&&g<=h)return k.x=d-a/2,k.y=e-a*c/
2/b,k;if(0<c&&(g<=-1*h||g>=h))return k.x=d+f*b/2/c,k.y=e+f/2,k;0>c&&(g<=-1*h||g>=h)&&(k.x=d-f*b/2/c,k.y=e-f/2);return k},hk=function(a,b){var c=a.parentId;if(null!=c){c=b.layoutNodes[b.idToIndex[c]];var d=!1;if(null==c.maxX||a.maxX+c.padRight>c.maxX)c.maxX=a.maxX+c.padRight,d=!0;if(null==c.minX||a.minX-c.padLeft<c.minX)c.minX=a.minX-c.padLeft,d=!0;if(null==c.maxY||a.maxY+c.padBottom>c.maxY)c.maxY=a.maxY+c.padBottom,d=!0;if(null==c.minY||a.minY-c.padTop<c.minY)c.minY=a.minY-c.padTop,d=!0;if(d)return hk(c,
b)}},jk=function(a,b){for(var c=a.layoutNodes,d=[],e=0;e<c.length;e++){var f=c[e],g=f.cmptId;(d[g]=d[g]||[]).push(f)}var h=0;for(e=0;e<d.length;e++)if(c=d[e]){c.x1=Infinity;c.x2=-Infinity;c.y1=Infinity;c.y2=-Infinity;for(f=0;f<c.length;f++)g=c[f],c.x1=Math.min(c.x1,g.positionX-g.width/2),c.x2=Math.max(c.x2,g.positionX+g.width/2),c.y1=Math.min(c.y1,g.positionY-g.height/2),c.y2=Math.max(c.y2,g.positionY+g.height/2);c.w=c.x2-c.x1;c.h=c.y2-c.y1;h+=c.w*c.h}d.sort(function(p,q){return q.w*q.h-p.w*p.h});
var k=0,l=0,m=0,n=0;a=Math.sqrt(h)*a.clientWidth/a.clientHeight;for(e=0;e<d.length;e++)if(c=d[e]){for(f=0;f<c.length;f++)g=c[f],g.isLocked||(g.positionX+=k-c.x1,g.positionY+=l-c.y1);k+=c.w+b.componentSpacing;m+=c.w+b.componentSpacing;n=Math.max(n,c.h);m>a&&(l+=n+b.componentSpacing,n=m=k=0)}},$k={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,avoidOverlapPadding:10,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,condense:!1,rows:void 0,cols:void 0,position:function(a){},sort:void 0,animate:!1,
animationDuration:500,animationEasing:void 0,animateFilter:function(a,b){return!0},ready:void 0,stop:void 0,transform:function(a,b){return b}};hi.prototype.run=function(){var a=this.options,b=a.cy,c=a.eles,d=c.nodes().not(":parent");a.sort&&(d=d.sort(a.sort));var e=Vb(a.boundingBox?a.boundingBox:{x1:0,y1:0,w:b.width(),h:b.height()});if(e.h===0||e.w===0)c.nodes().layoutPositions(this,a,function(v){return{x:e.x1,y:e.y1}});else{b=d.size();c=Math.sqrt(b*e.h/e.w);var f=Math.round(c),g=Math.round(e.w/e.h*
c);c=function(v){if(v==null)return Math.min(f,g);Math.min(f,g)==f?f=v:g=v};var h=function(v){if(v==null)return Math.max(f,g);Math.max(f,g)==f?f=v:g=v},k=a.rows,l=a.cols!=null?a.cols:a.columns;if(k!=null&&l!=null)f=k,g=l;else if(k!=null&&l==null)f=k,g=Math.ceil(b/f);else if(k==null&&l!=null)g=l,f=Math.ceil(b/g);else if(g*f>b)k=c(),l=h(),(k-1)*l>=b?c(k-1):(l-1)*k>=b&&h(l-1);else for(;g*f<b;)k=c(),l=h(),(l+1)*k>=b?h(l+1):c(k+1);var m=e.w/g,n=e.h/f;a.condense&&(n=m=0);if(a.avoidOverlap)for(b=0;b<d.length;b++){c=
d[b];h=c._private.position;if(h.x==null||h.y==null)h.x=0,h.y=0;c=c.layoutDimensions(a);h=a.avoidOverlapPadding;k=c.h+h;m=Math.max(m,c.w+h);n=Math.max(n,k)}var p={},q=0,t=0,u=function(){t++;t>=g&&(t=0,q++)},x={};for(b=0;b<d.length;b++)if(c=d[b],(h=a.position(c))&&(h.row!==void 0||h.col!==void 0)){h={row:h.row,col:h.col};if(h.col===void 0)for(h.col=0;p["c-"+h.row+"-"+h.col];)h.col++;else if(h.row===void 0)for(h.row=0;p["c-"+h.row+"-"+h.col];)h.row++;x[c.id()]=h;p["c-"+h.row+"-"+h.col]=!0}d.layoutPositions(this,
a,function(v,w){if(v.locked()||v.isParent())return!1;if(w=x[v.id()])v=w.col*m+m/2+e.x1,w=w.row*n+n/2+e.y1;else{for(;p["c-"+q+"-"+t];)u();v=t*m+m/2+e.x1;w=q*n+n/2+e.y1;p["c-"+q+"-"+t]=!0;u()}return{x:v,y:w}})}return this};var al={ready:function(){},stop:function(){}};He.prototype.run=function(){var a=this.options,b=a.eles;a.cy;this.emit("layoutstart");b.nodes().positions(function(){return{x:0,y:0}});this.one("layoutready",a.ready);this.emit("layoutready");this.one("layoutstop",a.stop);this.emit("layoutstop");
return this};He.prototype.stop=function(){return this};var bl={positions:void 0,zoom:void 0,pan:void 0,fit:!0,padding:30,spacingFactor:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(a,b){return!0},ready:void 0,stop:void 0,transform:function(a,b){return b}};ii.prototype.run=function(){var a=this.options,b=a.eles.nodes(),c=zb(a.positions);b.layoutPositions(this,a,function(d,e){a.positions==null?(e=d.position(),e={x:e.x,y:e.y}):c?e=a.positions(d):(e=a.positions[d._private.data.id],
e=e==null?null:e);return d.locked()||e==null?!1:e});return this};var cl={fit:!0,padding:30,boundingBox:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(a,b){return!0},ready:void 0,stop:void 0,transform:function(a,b){return b}};ji.prototype.run=function(){var a=this.options,b=a.cy,c=a.eles,d=Vb(a.boundingBox?a.boundingBox:{x1:0,y1:0,w:b.width(),h:b.height()});c.nodes().layoutPositions(this,a,function(e,f){return{x:d.x1+Math.round(Math.random()*d.w),y:d.y1+Math.round(Math.random()*
d.h)}});return this};var Zm=[{name:"breadthfirst",impl:ei},{name:"circle",impl:fi},{name:"concentric",impl:gi},{name:"cose",impl:Vd},{name:"grid",impl:hi},{name:"null",impl:He},{name:"preset",impl:ii},{name:"random",impl:ji}],lk=function(){},mk=function(){throw Error("A headless instance can not render images");};ki.prototype={recalculateRenderedStyle:lk,notify:function(){this.notifications++},init:lk,isHeadless:function(){return!0},png:mk,jpg:mk};var qf={calculateArrowAngles:function(a){a=a._private.rscratch;
var b=a.edgeType==="haystack",c=a.edgeType==="bezier",d=a.edgeType==="multibezier",e=a.edgeType==="segments",f=a.edgeType==="compound",g=a.edgeType==="self";if(b){var h=a.haystackPts[0];var k=a.haystackPts[1];var l=a.haystackPts[2];var m=a.haystackPts[3]}else h=a.arrowStartX,k=a.arrowStartY,l=a.arrowEndX,m=a.arrowEndY;var n=a.midX;var p=a.midY;if(e){var q=h-a.segpts[0];var t=k-a.segpts[1]}else if(d||f||g||c){var u=a.allpts;n=Hb(u[0],u[2],u[4],.1);u=Hb(u[1],u[3],u[5],.1);q=h-n;t=k-u}else q=h-n,t=k-
p;a.srcArrowAngle=Math.atan2(t,q)-Math.PI/2;n=a.midX;p=a.midY;b&&(n=(h+l)/2,p=(k+m)/2);q=l-h;t=m-k;if(e)u=a.allpts,u.length/2%2===0?(b=u.length/2,h=b-2,q=u[b]-u[h],t=u[b+1]-u[h+1]):a.isRound?(q=a.midVector[1],t=-a.midVector[0]):(b=u.length/2-1,h=b-2,q=u[b]-u[h],t=u[b+1]-u[h+1]);else if(d||f||g){u=a.allpts;if(a.ctrlpts.length/2%2===0){k=u.length/2-1;t=k+2;var x=t+2;q=Hb(u[k],u[t],u[x],0);b=Hb(u[k+1],u[t+1],u[x+1],0);h=Hb(u[k],u[t],u[x],1E-4);u=Hb(u[k+1],u[t+1],u[x+1],1E-4)}else t=u.length/2-1,k=t-
2,x=t+2,q=Hb(u[k],u[t],u[x],.4999),b=Hb(u[k+1],u[t+1],u[x+1],.4999),h=Hb(u[k],u[t],u[x],.5),u=Hb(u[k+1],u[t+1],u[x+1],.5);q=h-q;t=u-b}a.midtgtArrowAngle=Math.atan2(t,q)-Math.PI/2;a.midDispX=q;a.midDispY=t;q*=-1;t*=-1;e&&(u=a.allpts,u.length/2%2===0||a.isRound||(b=u.length/2-1,h=b+2,q=-(u[h]-u[b]),t=-(u[h+1]-u[b+1])));a.midsrcArrowAngle=Math.atan2(t,q)-Math.PI/2;e?(q=l-a.segpts[a.segpts.length-2],t=m-a.segpts[a.segpts.length-1]):d||f||g||c?(u=a.allpts,c=u.length,n=Hb(u[c-6],u[c-4],u[c-2],.9),u=Hb(u[c-
5],u[c-3],u[c-1],.9),q=l-n,t=m-u):(q=l-n,t=m-p);a.tgtArrowAngle=Math.atan2(t,q)-Math.PI/2}};qf.getArrowWidth=qf.getArrowHeight=function(a,b){var c=this.arrowWidthCache=this.arrowWidthCache||{},d=c[a+", "+b];if(d)return d;d=Math.max(Math.pow(a*13.37,.9),29)*b;return c[a+", "+b]=d};var Je,Ke,ic={},ac={},oi,pi,Lc,Wd,pc,Mc,Kc,jc,yd,Xd,qi,ri,Le,Me,mi,ni=function(a,b,c){c.x=b.x-a.x;c.y=b.y-a.y;c.len=Math.sqrt(c.x*c.x+c.y*c.y);c.nx=c.x/c.len;c.ny=c.y/c.len;c.ang=Math.atan2(c.ny,c.nx)},$m=Math.sqrt(.02),
tc={recalculateNodeLabelProjection:function(a){var b=a.pstyle("label").strValue;if(!xc(b)){var c=a._private;var d=a.width();var e=a.height();var f=a.padding(),g=a.position(),h=a.pstyle("text-halign").strValue,k=a.pstyle("text-valign").strValue;b=c.rscratch;c=c.rstyle;switch(h){case "left":d=g.x-d/2-f;break;case "right":d=g.x+d/2+f;break;default:d=g.x}switch(k){case "top":e=g.y-e/2-f;break;case "bottom":e=g.y+e/2+f;break;default:e=g.y}b.labelX=d;b.labelY=e;c.labelX=d;c.labelY=e;this.calculateLabelAngles(a);
this.applyLabelDimensions(a)}}},rf=function(a,b){b=Math.atan(b/a);a===0&&b<0&&(b*=-1);return b};tc.recalculateEdgeLabelProjections=function(a){var b=a._private,c=b.rscratch,d=this,e={mid:a.pstyle("label").strValue,source:a.pstyle("source-label").strValue,target:a.pstyle("target-label").strValue};if(e.mid||e.source||e.target){var f={x:c.midX,y:c.midY};var g=function(l,m,n){qc(b.rscratch,l,m,n);qc(b.rstyle,l,m,n)};g("labelX",null,f.x);g("labelY",null,f.y);var h=rf(c.midDispX,c.midDispY);g("labelAutoAngle",
null,h);var k=function(){function l(x,v,w,C,y){var B=Pc(v,w),M=x.segments[x.segments.length-1];x.segments.push({p0:v,p1:w,t0:C,t1:y,startDist:M?M.startDist+M.length:0,length:B});x.length+=B}if(k.cache)return k.cache;for(var m=[],n=0;n+5<c.allpts.length;n+=4)m.push({p0:{x:c.allpts[n],y:c.allpts[n+1]},p1:{x:c.allpts[n+2],y:c.allpts[n+3]},p2:{x:c.allpts[n+4],y:c.allpts[n+5]},startDist:0,length:0,segments:[]});n=b.rstyle.bezierPts;for(var p=d.bezierProjPcts.length,q=0;q<m.length;q++){var t=m[q],u=m[q-
1];u&&(t.startDist=u.startDist+u.length);l(t,t.p0,n[q*p],0,d.bezierProjPcts[0]);for(u=0;u<p-1;u++)l(t,n[q*p+u],n[q*p+u+1],d.bezierProjPcts[u],d.bezierProjPcts[u+1]);l(t,n[q*p+p-1],t.p2,d.bezierProjPcts[p-1],1)}return k.cache=m};h=function(l){var m=l==="source";if(e[l]){var n=a.pstyle(l+"-text-offset").pfValue;switch(c.edgeType){case "self":case "compound":case "bezier":case "multibezier":for(var p=k(),q,t=0,u=0,x=0;x<p.length;x++){var v=p[m?x:p.length-1-x];for(var w=0;w<v.segments.length;w++){var C=
v.segments[m?w:v.segments.length-1-w],y=x===p.length-1&&w===v.segments.length-1;t=u;u+=C.length;if(u>=n||y){q={cp:v,segment:C};break}}if(q)break}p=q.cp;q=q.segment;n=(n-t)/q.length;t=q.t1-q.t0;q=m?q.t0+t*n:q.t1-t*n;q=xd(0,q,1);f=id(p.p0,p.p1,p.p2,q);m=p.p0;n=p.p1;t=p.p2;p=xd(0,q-.001,1);q=xd(0,q+.001,1);p=id(m,n,t,p);m=id(m,n,t,q);v=rf(m.x-p.x,m.y-p.y);break;case "straight":case "segments":case "haystack":q=0;v=c.allpts.length;for(w=0;w+3<v&&!(m?(t={x:c.allpts[w],y:c.allpts[w+1]},p={x:c.allpts[w+
2],y:c.allpts[w+3]}):(t={x:c.allpts[v-2-w],y:c.allpts[v-1-w]},p={x:c.allpts[v-4-w],y:c.allpts[v-3-w]}),u=Pc(t,p),x=q,q+=u,q>=n);w+=2);q=xd(0,(n-x)/u,1);m=t;n=p;u=void 0;x=n.x-m.x;v=n.y-m.y;n=Pc(m,n);u=u!=null?u:(q==null?0:q)*n;f={x:m.x+x/n*u,y:m.y+v/n*u};v=rf(p.x-t.x,p.y-t.y)}g("labelX",l,f.x);g("labelY",l,f.y);g("labelAutoAngle",l,v)}};h("source");h("target");this.applyLabelDimensions(a)}};tc.applyLabelDimensions=function(a){this.applyPrefixedLabelDimensions(a);a.isEdge()&&(this.applyPrefixedLabelDimensions(a,
"source"),this.applyPrefixedLabelDimensions(a,"target"))};tc.applyPrefixedLabelDimensions=function(a,b){var c=a._private,d=this.getLabelText(a,b),e=Jc(d,a._private.labelDimsKey);if(Bb(c.rscratch,"prefixedLabelDimsKey",b)!==e){qc(c.rscratch,"prefixedLabelDimsKey",b,e);d=this.calculateLabelDimensions(a,d);e=a.pstyle("line-height").pfValue;a=a.pstyle("text-wrap").strValue;var f=Bb(c.rscratch,"labelWrapCachedLines",b)||[],g=a!=="wrap"?1:Math.max(f.length,1),h=d.height/g;a=h*e;f=d.width;d=d.height+(g-
1)*(e-1)*h;qc(c.rstyle,"labelWidth",b,f);qc(c.rscratch,"labelWidth",b,f);qc(c.rstyle,"labelHeight",b,d);qc(c.rscratch,"labelHeight",b,d);qc(c.rscratch,"labelLineHeight",b,a)}};tc.getLabelText=function(a,b){var c=a._private,d=a.pstyle((b?b+"-":"")+"label").strValue,e=a.pstyle("text-transform").value,f=function(C,y){return y?(qc(c.rscratch,C,b,y),y):Bb(c.rscratch,C,b)};if(!d)return"";e!="none"&&(e=="uppercase"?d=d.toUpperCase():e=="lowercase"&&(d=d.toLowerCase()));e=a.pstyle("text-wrap").value;if(e===
"wrap"){e=f("labelKey");if(e!=null&&f("labelWrapKey")===e)return f("labelWrapCachedText");d=d.split("\n");for(var g=a.pstyle("text-max-width").pfValue,h=a.pstyle("text-overflow-wrap").value==="anywhere",k=[],l=/[\s\u200b]+|$/g,m=0;m<d.length;m++){var n=d[m],p=this.calculateLabelDimensions(a,n).width;h&&(n=n.split("").join(""));if(p>g){var q=n.matchAll(l);p="";var t=0;q=I(q);var u;try{for(q.s();!(u=q.n()).done;){var x=u.value,v=x[0],w=n.substring(t,x.index);t=x.index+v.length;this.calculateLabelDimensions(a,
p.length===0?w:p+w+v).width<=g?p+=w+v:(p&&k.push(p),p=w+v)}}catch(C){q.e(C)}finally{q.f()}p.match(/^[\s\u200b]+$/)||k.push(p)}else k.push(n)}f("labelWrapCachedLines",k);d=f("labelWrapCachedText",k.join("\n"));f("labelWrapKey",e)}else if(e==="ellipsis"){f=a.pstyle("text-max-width").pfValue;u="";x=!1;if(this.calculateLabelDimensions(a,d).width<f)return d;for(v=0;v<d.length&&!(this.calculateLabelDimensions(a,u+d[v]+"").width>f);v++)u+=d[v],v===d.length-1&&(x=!0);x||(u+="");return u}return d};tc.getLabelJustification=
function(a){var b=a.pstyle("text-justification").strValue,c=a.pstyle("text-halign").strValue;if(b==="auto")if(a.isNode())switch(c){case "left":return"right";case "right":return"left";default:return"center"}else return"center";else return b};tc.calculateLabelDimensions=function(a,b){var c=this.cy.window().document,d=a.pstyle("font-style").strValue,e=a.pstyle("font-size").pfValue,f=a.pstyle("font-family").strValue,g=a.pstyle("font-weight").strValue,h=this.labelCalcCanvas;a=this.labelCalcCanvasContext;
h||(h=this.labelCalcCanvas=c.createElement("canvas"),a=this.labelCalcCanvasContext=h.getContext("2d"),c=h.style,c.position="absolute",c.left="-9999px",c.top="-9999px",c.zIndex="-1",c.visibility="hidden",c.pointerEvents="none");a.font="".concat(d," ").concat(g," ").concat(e,"px ").concat(f);f=d=0;b=b.split("\n");for(c=0;c<b.length;c++)g=a.measureText(b[c]),h=e,d=Math.max(Math.ceil(g.width),d),f+=h;return{width:d+0,height:f+0}};tc.calculateLabelAngle=function(a,b){var c=a._private.rscratch,d=a.isEdge();
a=a.pstyle((b?b+"-":"")+"text-rotation");b=a.strValue;return b==="none"?0:d&&b==="autorotate"?c.labelAutoAngle:b==="autorotate"?0:a.pfValue};tc.calculateLabelAngles=function(a){var b=a.isEdge(),c=a._private.rscratch;c.labelAngle=this.calculateLabelAngle(a);b&&(c.sourceLabelAngle=this.calculateLabelAngle(a,"source"),c.targetLabelAngle=this.calculateLabelAngle(a,"target"))};var nk={},ok=!1;nk.getNodeShape=function(a){var b=a.pstyle("shape").value;return b==="cutrectangle"&&(a.width()<28||a.height()<
28)?(ok||(mb("The `cutrectangle` node shape can not be used at small sizes so `rectangle` is used instead"),ok=!0),"rectangle"):a.isParent()?b==="rectangle"||b==="roundrectangle"||b==="round-rectangle"||b==="cutrectangle"||b==="cut-rectangle"||b==="barrel"?b:"rectangle":b==="polygon"?(a=a.pstyle("shape-polygon-points").value,this.nodeShapes.makePolygon(a).name):b};var pk={};[{projectIntoViewport:function(a,b){var c=this.cy,d=this.findContainerClientCoords(),e=d[0],f=d[1];d=d[4];var g=c.pan();c=c.zoom();
return[((a-e)/d-g.x)/c,((b-f)/d-g.y)/c]},findContainerClientCoords:function(){if(this.containerBB)return this.containerBB;var a=this.container,b=a.getBoundingClientRect(),c=this.cy.window().getComputedStyle(a),d=function(n){return parseFloat(c.getPropertyValue(n))},e=d("padding-left"),f=d("padding-right"),g=d("padding-top"),h=d("padding-bottom"),k=d("border-left-width"),l=d("border-right-width"),m=d("border-top-width");d("border-bottom-width");d=a.clientWidth;return this.containerBB=[b.left+e+k,b.top+
g+m,d-(e+f),a.clientHeight-(g+h),b.width/(d+(k+l))]},invalidateContainerClientCoordsCache:function(){this.containerBB=null},findNearestElement:function(a,b,c,d){return this.findNearestElements(a,b,c,d)[0]},findNearestElements:function(a,b,c,d){function e(y,B){if(y.isNode()){if(C)return;C=y;n.push(y)}if(y.isEdge()&&(B==null||B<v))if(w){if(w.pstyle("z-compound-depth").value===y.pstyle("z-compound-depth").value&&w.pstyle("z-compound-depth").value===y.pstyle("z-compound-depth").value)for(var M=0;M<n.length;M++)if(n[M].isEdge()){w=
n[M]=y;v=B!=null?B:v;break}}else n.push(y),w=y,v=B!=null?B:v}function f(y){var B=y.outerWidth()+2*u,M=y.outerHeight()+2*u,Q=B/2,ja=M/2,da=y.position(),Da=y.pstyle("corner-radius").value==="auto"?"auto":y.pstyle("corner-radius").pfValue,pa=y._private.rscratch;if(da.x-Q<=a&&a<=da.x+Q&&da.y-ja<=b&&b<=da.y+ja&&l.nodeShapes[k.getNodeShape(y)].checkPoint(a,b,0,B,M,da.x,da.y,Da,pa))return e(y,0),!0}function g(y){var B=y._private,M=B.rscratch,Q=y.pstyle("width").pfValue,ja=y.pstyle("arrow-scale").value,da=
Q/2+t,Da=da*da,pa=da*2;da=B.source;var ra=B.target;if(M.edgeType==="segments"||M.edgeType==="straight"||M.edgeType==="haystack")for(var Z=M.allpts,fa=0;fa+3<Z.length;fa+=2){var sa=a,Ea=b,ya=Z[fa],aa=Z[fa+1],na=Z[fa+2],Ga=Z[fa+3],Ha=pa,Ma=Math.max(ya,na),cb=Math.min(aa,Ga);aa=Math.max(aa,Ga);if(sa=Math.min(ya,na)-Ha<=sa&&sa<=Ma+Ha&&cb-Ha<=Ea&&Ea<=aa+Ha){var sb=a;sa=b;Ha=Z[fa];Ma=Z[fa+1];Ea=Z[fa+2];ya=Z[fa+3];na=[sb-Ha,sa-Ma];cb=[Ea-Ha,ya-Ma];Ha=cb[0]*cb[0]+cb[1]*cb[1];Ma=na[0]*na[0]+na[1]*na[1];na=
na[0]*cb[0]+na[1]*cb[1];cb=na*na/Ha;sb=na<0?Ma:cb>Ha?(sb-Ea)*(sb-Ea)+(sa-ya)*(sa-ya):Ma-cb;sa=Da>sb}if(sa)return e(y,sb),!0}else if(M.edgeType==="bezier"||M.edgeType==="multibezier"||M.edgeType==="self"||M.edgeType==="compound")for(Z=M.allpts,fa=0;fa+5<M.allpts.length;fa+=4){sa=a;Ea=b;ya=Z[fa];aa=Z[fa+1];na=Z[fa+2];Ga=Z[fa+3];Ha=Z[fa+4];var Na=Z[fa+5];Ma=Math.max(ya,Ha,na)+pa;cb=Math.min(aa,Na,Ga)-pa;aa=Math.max(aa,Na,Ga)+pa;sa=sa<Math.min(ya,Ha,na)-pa||sa>Ma||Ea<cb||Ea>aa?!1:!0;if(sa){sb=a;sa=b;
Ea=Z[fa];ya=Z[fa+1];na=Z[fa+2];Ha=Z[fa+3];Ma=Z[fa+4];cb=Z[fa+5];aa=[];var bb=1*Ea*Ea-4*Ea*na+2*Ea*Ma+4*na*na-4*na*Ma+Ma*Ma+ya*ya-4*ya*Ha+2*ya*cb+4*Ha*Ha-4*Ha*cb+cb*cb;var Ya=9*Ea*na-3*Ea*Ea-3*Ea*Ma-6*na*na+3*na*Ma+9*ya*Ha-3*ya*ya-3*ya*cb-6*Ha*Ha+3*Ha*cb;var vb=3*Ea*Ea-6*Ea*na+Ea*Ma-Ea*sb+2*na*na+2*na*sb-Ma*sb+3*ya*ya-6*ya*Ha+ya*cb-ya*sa+2*Ha*Ha+2*Ha*sa-cb*sa;var Ub=1*Ea*na-Ea*Ea+Ea*sb-na*sb+ya*Ha-ya*ya+ya*sa-Ha*sa;Ga=aa;bb===0&&(bb=1E-5);Ya/=bb;vb/=bb;Na=(3*vb-Ya*Ya)/9;bb=-(Ub/bb*27)+Ya*(9*vb-Ya*
Ya*2);bb/=54;vb=Na*Na*Na+bb*bb;Ga[1]=0;Ya/=3;vb>0?(Na=bb+Math.sqrt(vb),Na=Na<0?-Math.pow(-Na,1/3):Math.pow(Na,1/3),bb-=Math.sqrt(vb),bb=bb<0?-Math.pow(-bb,1/3):Math.pow(bb,1/3),Ga[0]=-Ya+Na+bb,Ga[4]=Ga[2]=-(Ya+(Na+bb)/2),Ya=Math.sqrt(3)*(-bb+Na)/2,Ga[3]=Ya,Ga[5]=-Ya):(Ga[5]=Ga[3]=0,vb===0?(Na=bb<0?-Math.pow(-bb,1/3):Math.pow(bb,1/3),Ga[0]=-Ya+2*Na,Ga[4]=Ga[2]=-(Na+Ya)):(Na=-Na,bb=Math.acos(bb/Math.sqrt(Na*Na*Na)),Na=2*Math.sqrt(Na),Ga[0]=-Ya+Na*Math.cos(bb/3),Ga[2]=-Ya+Na*Math.cos((bb+2*Math.PI)/
3),Ga[4]=-Ya+Na*Math.cos((bb+4*Math.PI)/3)));Ga=[];for(Na=0;Na<6;Na+=2)Math.abs(aa[Na+1])<1E-7&&aa[Na]>=0&&aa[Na]<=1&&Ga.push(aa[Na]);Ga.push(1);Ga.push(0);aa=-1;for(Na=0;Na<Ga.length;Na++)bb=Math.pow(1-Ga[Na],2)*Ea+2*(1-Ga[Na])*Ga[Na]*na+Ga[Na]*Ga[Na]*Ma,Ya=Math.pow(1-Ga[Na],2)*ya+2*(1-Ga[Na])*Ga[Na]*Ha+Ga[Na]*Ga[Na]*cb,Ya=Math.pow(bb-sb,2)+Math.pow(Ya-sa,2),aa>=0?Ya<aa&&(aa=Ya):aa=Ya;sa=Da>(sb=aa)}if(sa)return e(y,sb),!0}da=da||B.source;ra=ra||B.target;B=k.getArrowWidth(Q,ja);M=[{name:"source",
x:M.arrowStartX,y:M.arrowStartY,angle:M.srcArrowAngle},{name:"target",x:M.arrowEndX,y:M.arrowEndY,angle:M.tgtArrowAngle},{name:"mid-source",x:M.midX,y:M.midY,angle:M.midsrcArrowAngle},{name:"mid-target",x:M.midX,y:M.midY,angle:M.midtgtArrowAngle}];for(fa=0;fa<M.length;fa++)if(Q=M[fa],ja=l.arrowShapes[y.pstyle(Q.name+"-arrow-shape").value],Da=y.pstyle("width").pfValue,ja.roughCollide(a,b,B,Q.angle,{x:Q.x,y:Q.y},Da,t)&&ja.collide(a,b,B,Q.angle,{x:Q.x,y:Q.y},Da,t))return e(y),!0;q&&n.length>0&&(f(da),
f(ra))}function h(y,B){var M=y._private,Q=x;var ja=B?B+"-":"";y.boundingBox();var da=M.labelBounds[B||"main"],Da=y.pstyle(ja+"label").value;if(y.pstyle("text-events").strValue==="yes"&&Da){var pa=Bb(M.rscratch,"labelX",B),ra=Bb(M.rscratch,"labelY",B),Z=Bb(M.rscratch,"labelAngle",B);B=y.pstyle(ja+"text-margin-x").pfValue;ja=y.pstyle(ja+"text-margin-y").pfValue;var fa=da.x1-Q-B;M=da.x2+Q-B;Da=da.y1-Q-ja;Q=da.y2+Q-ja;if(Z){var sa=Math.cos(Z),Ea=Math.sin(Z);Z=function(ya,aa){ya-=pa;aa-=ra;return{x:ya*
sa-aa*Ea+pa,y:ya*Ea+aa*sa+ra}};da=Z(fa,Da);fa=Z(fa,Q);Da=Z(M,Da);M=Z(M,Q);if(Wb(a,b,[da.x+B,da.y+ja,Da.x+B,Da.y+ja,M.x+B,M.y+ja,fa.x+B,fa.y+ja]))return e(y),!0}else if(jd(da,a,b))return e(y),!0}}var k=this,l=this,m=l.getCachedZSortedEles(),n=[],p=l.cy.zoom(),q=l.cy.hasCompoundNodes(),t=(d?24:8)/p,u=(d?8:2)/p,x=(d?8:2)/p,v=Infinity,w,C;c&&(m=m.interactive);for(c=m.length-1;c>=0;c--)d=m[c],d.isNode()?f(d)||h(d):g(d)||h(d)||h(d,"source")||h(d,"target");return n},getAllInBox:function(a,b,c,d){function e(m,
n){var p=m._private,q=g;m.boundingBox();var t=p.labelBounds.main,u=Bb(p.rscratch,"labelX",n),x=Bb(p.rscratch,"labelY",n);n=Bb(p.rscratch,"labelAngle",n);p=m.pstyle("text-margin-x").pfValue;var v=m.pstyle("text-margin-y").pfValue;m=t.x1-q-p;p=t.x2+q-p;var w=t.y1-q-v;q=t.y2+q-v;if(n){var C=Math.cos(n),y=Math.sin(n);t=function(B,M){B-=u;M-=x;return{x:B*C-M*y+u,y:B*y+M*C+x}};return[t(m,w),t(p,w),t(p,q),t(m,q)]}return[{x:m,y:w},{x:p,y:w},{x:p,y:q},{x:m,y:q}]}var f=this.getCachedZSortedEles().interactive,
g=2/this.cy.zoom(),h=[],k=Math.max(a,c),l=Math.min(b,d);d=Math.max(b,d);a=Math.min(a,c);c=k;b=l;a=Vb({x1:a,y1:b,x2:c,y2:d});for(b=0;b<f.length;b++)if(c=f[b],c.isNode())k=c.pstyle("text-events").strValue==="yes",l=c.pstyle("box-select-labels").strValue==="yes",k=c.boundingBox({includeNodes:!0,includeEdges:!1,includeLabels:l&&k}),Ze(a,k)&&(k=e(c),fb(k,[{x:a.x1,y:a.y1},{x:a.x2,y:a.y1},{x:a.x2,y:a.y2},{x:a.x1,y:a.y2}])&&h.push(c));else if(k=c._private,l=k.rscratch,l.startX==null||l.startY==null||jd(a,
l.startX,l.startY))if(l.endX==null||l.endY==null||jd(a,l.endX,l.endY))if(l.edgeType==="bezier"||l.edgeType==="multibezier"||l.edgeType==="self"||l.edgeType==="compound"||l.edgeType==="segments"||l.edgeType==="haystack"){k=k.rstyle.bezierPts||k.rstyle.linePts||k.rstyle.haystackPts;l=!0;for(d=0;d<k.length;d++)if(!bm(a,k[d])){l=!1;break}l&&h.push(c)}else l.edgeType!=="haystack"&&l.edgeType!=="straight"||h.push(c);return h}},qf,{findMidptPtsEtc:function(a,b){var c=b.posPts,d=b.intersectionPts,e=b.vectorNormInverse,
f=a.pstyle("source-endpoint");b=a.pstyle("target-endpoint");var g=f.units!=null&&b.units!=null;switch(a.pstyle("edge-distances").value){case "node-position":var h=c;break;case "intersection":h=d;break;case "endpoints":g?(c=this.manualEndptToPx(a.source()[0],f),d=W(c,2),c=d[0],d=d[1],a=this.manualEndptToPx(a.target()[0],b),a=W(a,2),b=a[0],e=a[1],a={x1:c,y1:d,x2:b,y2:e},d=e-d,b-=c,c=Math.sqrt(b*b+d*d),e={x:-d/c,y:b/c},h=a):(mb("Edge ".concat(a.id()," has edge-distances:endpoints specified without manual endpoints specified via source-endpoint and target-endpoint.  Falling back on edge-distances:intersection (default).")),
h=d)}return{midptPts:h,vectorNormInverse:e}},findHaystackPoints:function(a){for(var b=0;b<a.length;b++){var c=a[b],d=c._private,e=d.rscratch;if(!e.haystack){var f=Math.random()*2*Math.PI;e.source={x:Math.cos(f),y:Math.sin(f)};f=Math.random()*2*Math.PI;e.target={x:Math.cos(f),y:Math.sin(f)}}var g=d.source,h=d.target;d=g.position();f=h.position();var k=g.width(),l=h.width();g=g.height();h=h.height();var m=c.pstyle("haystack-radius").value/2;e.haystackPts=e.allpts=[e.source.x*k*m+d.x,e.source.y*g*m+
d.y,e.target.x*l*m+f.x,e.target.y*h*m+f.y];e.midX=(e.allpts[0]+e.allpts[2])/2;e.midY=(e.allpts[1]+e.allpts[3])/2;e.edgeType="haystack";e.haystack=!0;this.storeEdgeProjections(c);this.calculateArrowAngles(c);this.recalculateEdgeLabelProjections(c);this.calculateLabelAngles(c)}},findSegmentsPoints:function(a,b){var c=a._private.rscratch,d=a.pstyle("segment-weights"),e=a.pstyle("segment-distances"),f=a.pstyle("segment-radii"),g=a.pstyle("radius-type"),h=Math.min(d.pfValue.length,e.pfValue.length),k=
f.pfValue[f.pfValue.length-1],l=g.pfValue[g.pfValue.length-1];c.edgeType="segments";c.segpts=[];c.radii=[];c.isArcRadius=[];for(var m=0;m<h;m++){var n=d.pfValue[m],p=e.pfValue[m],q=1-n,t=this.findMidptPtsEtc(a,b),u=t.midptPts;t=t.vectorNormInverse;c.segpts.push(u.x1*q+u.x2*n+t.x*p,u.y1*q+u.y2*n+t.y*p);c.radii.push(f.pfValue[m]!==void 0?f.pfValue[m]:k);c.isArcRadius.push((g.pfValue[m]!==void 0?g.pfValue[m]:l)==="arc-radius")}},findLoopPoints:function(a,b,c,d){c=a._private.rscratch;var e=b.dirCounts;
b=b.srcPos;var f=a.pstyle("control-point-distances"),g=f?f.pfValue[0]:void 0;f=a.pstyle("loop-direction").pfValue;var h=a.pstyle("loop-sweep").pfValue;a=a.pstyle("control-point-step-size").pfValue;c.edgeType="self";d&&(a=g);g=f-Math.PI/2;d=g-h/2;g+=h/2;f=String(f+"_"+h);e=e[f]===void 0?e[f]=0:++e[f];c.ctrlpts=[b.x+Math.cos(d)*1.4*a*(e/3+1),b.y+Math.sin(d)*1.4*a*(e/3+1),b.x+Math.cos(g)*1.4*a*(e/3+1),b.y+Math.sin(g)*1.4*a*(e/3+1)]},findCompoundLoopPoints:function(a,b,c,d){var e=a._private.rscratch;
e.edgeType="compound";var f=b.srcPos,g=b.tgtPos,h=b.srcW,k=b.srcH,l=b.tgtW;b=b.tgtH;var m=a.pstyle("control-point-step-size").pfValue;a=(a=a.pstyle("control-point-distances"))?a.pfValue[0]:void 0;d&&(c=0,m=a);d=Math.min(f.x-h/2,g.x-l/2);f=Math.min(f.y-k/2,g.y-b/2);e.ctrlpts=[d,f-1.7995514309304248*m*(c/3+1)*Math.max(.5,Math.log(h*.01)),d-1.7995514309304248*m*(c/3+1)*Math.max(.5,Math.log(l*.01)),f]},findStraightEdgePoints:function(a){a._private.rscratch.edgeType="straight"},findBezierPoints:function(a,
b,c,d,e){var f=a._private.rscratch,g=a.pstyle("control-point-step-size").pfValue,h=a.pstyle("control-point-distances"),k=a.pstyle("control-point-weights"),l=h&&k?Math.min(h.value.length,k.value.length):1,m=h?h.pfValue[0]:void 0,n=k.value[0];f.edgeType=d?"multibezier":"bezier";f.ctrlpts=[];for(var p=0;p<l;p++){var q=(.5-b.eles.length/2+c)*g*(e?-1:1);var t=q>0?1:q<0?-1:0;d&&(m=h?h.pfValue[p]:g,n=k.value[p]);t=d?m:m!==void 0?t*m:void 0;q=t!==void 0?t:q;t=1-n;var u=n,x=this.findMidptPtsEtc(a,b),v=x.midptPts;
x=x.vectorNormInverse;f.ctrlpts.push(v.x1*t+v.x2*u+x.x*q,v.y1*t+v.y2*u+x.y*q)}},findTaxiPoints:function(a,b){var c=a._private.rscratch;c.edgeType="segments";var d=b.posPts,e=b.srcW,f=b.srcH,g=b.tgtW;b=b.tgtH;var h=a.pstyle("edge-distances").value!=="node-position",k=a.pstyle("taxi-direction").value,l=k,m=a.pstyle("taxi-turn"),n=m.units==="%",p=m.pfValue,q=p<0,t=a.pstyle("taxi-turn-min-distance").pfValue,u=h?(f+b)/2:0;m=d.x2-d.x1;var x=d.y2-d.y1,v=function(B,M){return B>0?Math.max(B-M,0):Math.min(B+
M,0)},w=v(m,h?(e+g)/2:0);u=v(x,u);var C=!1;if(l==="auto")k=Math.abs(w)>Math.abs(u)?"horizontal":"vertical";else if(l==="upward"||l==="downward")k="vertical",C=!0;else if(l==="leftward"||l==="rightward")k="horizontal",C=!0;var y=(k=k==="vertical")?u:w;w=k?x:m;u=w>0?1:w<0?-1:0;v=!1;C&&(n||q)||!(l==="downward"&&w<0||l==="upward"&&w>0||l==="leftward"&&w>0||l==="rightward"&&w<0)||(u*=-1,y=u*Math.abs(y),v=!0);l=n?(p<0?1+p:p)*y:(p<0?y:0)+p*u;p=function(B){return Math.abs(B)<t||Math.abs(B)>=Math.abs(y)};
n=p(l);p=p(Math.abs(y)-Math.abs(l));!n&&!p||v?k?(e=d.y1+l+(h?f/2*u:0),c.segpts=[d.x1,e,d.x2,e]):(e=d.x1+l+(h?e/2*u:0),c.segpts=[e,d.y1,e,d.y2]):k?(e=Math.abs(m)<=g/2,Math.abs(w)<=f/2?(e=(d.x1+d.x2)/2,c.segpts=[e,d.y1,e,d.y2]):e?(e=(d.y1+d.y2)/2,c.segpts=[d.x1,e,d.x2,e]):c.segpts=[d.x1,d.y2]):(f=Math.abs(x)<=b/2,Math.abs(w)<=e/2?(e=(d.y1+d.y2)/2,c.segpts=[d.x1,e,d.x2,e]):f?(e=(d.x1+d.x2)/2,c.segpts=[e,d.y1,e,d.y2]):c.segpts=[d.x2,d.y1]);c.isRound&&(d=a.pstyle("taxi-radius").value,a=a.pstyle("radius-type").value[0]===
"arc-radius",c.radii=Array(c.segpts.length/2).fill(d),c.isArcRadius=Array(c.segpts.length/2).fill(a))},tryToCorrectInvalidPoints:function(a,b){var c=a._private.rscratch;if(c.edgeType==="bezier"){var d=b.srcPos,e=b.tgtPos,f=b.srcW,g=b.srcH,h=b.tgtW,k=b.tgtH,l=b.srcShape,m=b.tgtShape,n=b.srcCornerRadius,p=b.tgtCornerRadius,q=b.srcRs,t=b.tgtRs,u=!Ba(c.startX)||!Ba(c.startY),x=!Ba(c.arrowStartX)||!Ba(c.arrowStartY),v=!Ba(c.endX)||!Ba(c.endY),w=!Ba(c.arrowEndX)||!Ba(c.arrowEndY);b=3*(this.getArrowWidth(a.pstyle("width").pfValue,
a.pstyle("arrow-scale").value)*this.arrowShapeWidth);var C=Pc({x:c.ctrlpts[0],y:c.ctrlpts[1]},{x:c.startX,y:c.startY}),y=C<b,B=Pc({x:c.ctrlpts[0],y:c.ctrlpts[1]},{x:c.endX,y:c.endY}),M=B<b,Q=!1;if(u||x||y){Q=!0;u=c.ctrlpts[0]-d.x;x=c.ctrlpts[1]-d.y;var ja=Math.sqrt(u*u+x*x);u/=ja;x/=ja;ja=Math.max(f,g);d=l.intersectLine(d.x,d.y,f,g,c.ctrlpts[0]+u*2*ja,c.ctrlpts[1]+x*2*ja,0,n,q);y?(c.ctrlpts[0]+=u*(b-C),c.ctrlpts[1]+=x*(b-C)):(c.ctrlpts[0]=d[0]+u*b,c.ctrlpts[1]=d[1]+x*b)}if(v||w||M)Q=!0,d=c.ctrlpts[0]-
e.x,l=c.ctrlpts[1]-e.y,n=Math.sqrt(d*d+l*l),d/=n,l/=n,f=Math.max(f,g),e=m.intersectLine(e.x,e.y,h,k,c.ctrlpts[0]+d*2*f,c.ctrlpts[1]+l*2*f,0,p,t),M?(c.ctrlpts[0]+=d*(b-B),c.ctrlpts[1]+=l*(b-B)):(c.ctrlpts[0]=e[0]+d*b,c.ctrlpts[1]=e[1]+l*b);Q&&this.findEndpoints(a)}},storeAllpts:function(a){a=a._private.rscratch;if(a.edgeType==="multibezier"||a.edgeType==="bezier"||a.edgeType==="self"||a.edgeType==="compound"){a.allpts=[];a.allpts.push(a.startX,a.startY);for(var b=0;b+1<a.ctrlpts.length;b+=2)a.allpts.push(a.ctrlpts[b],
a.ctrlpts[b+1]),b+3<a.ctrlpts.length&&a.allpts.push((a.ctrlpts[b]+a.ctrlpts[b+2])/2,(a.ctrlpts[b+1]+a.ctrlpts[b+3])/2);a.allpts.push(a.endX,a.endY);a.ctrlpts.length/2%2===0?(b=a.allpts.length/2-1,a.midX=a.allpts[b],a.midY=a.allpts[b+1]):(b=a.allpts.length/2-3,a.midX=Hb(a.allpts[b],a.allpts[b+2],a.allpts[b+4],.5),a.midY=Hb(a.allpts[b+1],a.allpts[b+3],a.allpts[b+5],.5))}else if(a.edgeType==="straight")a.allpts=[a.startX,a.startY,a.endX,a.endY],a.midX=(a.startX+a.endX+a.arrowStartX+a.arrowEndX)/4,a.midY=
(a.startY+a.endY+a.arrowStartY+a.arrowEndY)/4;else if(a.edgeType==="segments"){a.allpts=[];a.allpts.push(a.startX,a.startY);a.allpts.push.apply(a.allpts,a.segpts);a.allpts.push(a.endX,a.endY);if(a.isRound)for(a.roundCorners=[],b=2;b+3<a.allpts.length;b+=2){var c=a.radii[b/2-1];a.roundCorners.push(Ie({x:a.allpts[b-2],y:a.allpts[b-1]},{x:a.allpts[b],y:a.allpts[b+1],radius:c},{x:a.allpts[b+2],y:a.allpts[b+3]},c,a.isArcRadius[b/2-1]))}if(a.segpts.length%4===0)b=a.segpts.length/2,c=b-2,a.midX=(a.segpts[c]+
a.segpts[b])/2,a.midY=(a.segpts[c+1]+a.segpts[b+1])/2;else{var d=a.segpts.length/2-1;if(a.isRound){b=a.segpts[d];c=a.segpts[d+1];var e=a.roundCorners[d/2];if(e.radius===0)e=a.segpts[d+2],d=a.segpts[d+3],a.midX=b,a.midY=c,a.midVector=[c-d,e-b];else{b=[b-e.cx,c-e.cy];var f=e.radius/Math.sqrt(Math.pow(b[0],2)+Math.pow(b[1],2));b=b.map(function(g){return g*f});a.midX=e.cx+b[0];a.midY=e.cy+b[1];a.midVector=b}}else a.midX=a.segpts[d],a.midY=a.segpts[d+1]}}},checkForInvalidEdgeWarning:function(a){var b=
a[0]._private.rscratch;b.nodesOverlap||Ba(b.startX)&&Ba(b.startY)&&Ba(b.endX)&&Ba(b.endY)?b.loggedErr=!1:b.loggedErr||(b.loggedErr=!0,mb("Edge `"+a.id()+"` has invalid endpoints and so it is impossible to draw.  Adjust your edge style (e.g. control points) accordingly or use an alternative edge type.  This is expected behaviour when the source node and the target node overlap."))},findEdgeControlPoints:function(a){var b=this;if(a&&a.length!==0){for(var c=this,d=c.cy.hasCompoundNodes(),e=new rc,f=
function(x,v){return[].concat(D(x),[v?1:0]).join("-")},g=[],h=[],k=0;k<a.length;k++){var l=a[k],m=l._private,n=l.pstyle("curve-style").value;if(!l.removed()&&l.takesUpSpace())if(n==="haystack")h.push(l);else{var p=n==="unbundled-bezier"||n.endsWith("segments")||n==="straight"||n==="straight-triangle"||n.endsWith("taxi");n=n==="unbundled-bezier"||n==="bezier";var q=m.target;m=m.source.poolIndex();q=q.poolIndex();m=[m,q].sort();q=f(m,p);var t=e.get(q);t==null&&(t={eles:[]},g.push({pairId:m,edgeIsUnbundled:p}),
e.set(q,t));t.eles.push(l);p&&(t.hasUnbundled=!0);n&&(t.hasBezier=!0)}}a=function(){var x=g[u];x=f(x.pairId,x.edgeIsUnbundled);var v=e.get(x);v.hasUnbundled||(x=v.eles[0].parallelEdges().filter(function(gc){return gc.isBundledBezier()}),We(v.eles),x.forEach(function(gc){return v.eles.push(gc)}),v.eles.sort(function(gc,Uc){return gc.poolIndex()-Uc.poolIndex()}));var w=v.eles[0];x=w.source();w=w.target();if(x.poolIndex()>w.poolIndex()){var C=x;x=w;w=C}C=v.srcPos=x.position();var y=v.tgtPos=w.position(),
B=v.srcW=x.outerWidth(),M=v.srcH=x.outerHeight(),Q=v.tgtW=w.outerWidth(),ja=v.tgtH=w.outerHeight(),da=v.srcShape=c.nodeShapes[b.getNodeShape(x)],Da=v.tgtShape=c.nodeShapes[b.getNodeShape(w)],pa=v.srcCornerRadius=x.pstyle("corner-radius").value==="auto"?"auto":x.pstyle("corner-radius").pfValue,ra=v.tgtCornerRadius=w.pstyle("corner-radius").value==="auto"?"auto":w.pstyle("corner-radius").pfValue,Z=v.tgtRs=w._private.rscratch,fa=v.srcRs=x._private.rscratch;v.dirCounts={north:0,west:0,south:0,east:0,
northwest:0,southwest:0,northeast:0,southeast:0};for(var sa=0;sa<v.eles.length;sa++){var Ea=v.eles[sa],ya=Ea[0]._private.rscratch,aa=Ea.pstyle("curve-style").value,na=aa==="unbundled-bezier"||aa.endsWith("segments")||aa.endsWith("taxi"),Ga=!x.same(Ea.source());if(!v.calculatedIntersection&&x!==w&&(v.hasBezier||v.hasUnbundled)){v.calculatedIntersection=!0;var Ha=da.intersectLine(C.x,C.y,B,M,y.x,y.y,0,pa,fa);var Ma=v.srcIntn=Ha,cb=Da.intersectLine(y.x,y.y,Q,ja,C.x,C.y,0,ra,Z),sb=v.tgtIntn=cb,Na=v.intersectionPts=
{x1:Ha[0],x2:cb[0],y1:Ha[1],y2:cb[1]},bb=v.posPts={x1:C.x,x2:y.x,y1:C.y,y2:y.y},Ya=cb[1]-Ha[1],vb=cb[0]-Ha[0],Ub=Math.sqrt(vb*vb+Ya*Ya);Ba(Ub)&&Ub>=$m||(Ub=Math.sqrt(Math.max(vb*vb,.01)+Math.max(Ya*Ya,.01)));Ya=v.vector={x:vb,y:Ya};vb=v.vectorNorm={x:Ya.x/Ub,y:Ya.y/Ub};var Zb={x:-vb.y,y:vb.x};v.nodesOverlap=!Ba(Ub)||Da.checkPoint(Ha[0],Ha[1],0,Q,ja,y.x,y.y,ra,Z)||da.checkPoint(cb[0],cb[1],0,B,M,C.x,C.y,pa,fa);v.vectorNormInverse=Zb;Ha={nodesOverlap:v.nodesOverlap,dirCounts:v.dirCounts,calculatedIntersection:!0,
hasBezier:v.hasBezier,hasUnbundled:v.hasUnbundled,eles:v.eles,srcPos:y,srcRs:Z,tgtPos:C,tgtRs:fa,srcW:Q,srcH:ja,tgtW:B,tgtH:M,srcIntn:sb,tgtIntn:Ma,srcShape:Da,tgtShape:da,posPts:{x1:bb.x2,y1:bb.y2,x2:bb.x1,y2:bb.y1},intersectionPts:{x1:Na.x2,y1:Na.y2,x2:Na.x1,y2:Na.y1},vector:{x:-Ya.x,y:-Ya.y},vectorNorm:{x:-vb.x,y:-vb.y},vectorNormInverse:{x:-Zb.x,y:-Zb.y}}}Ma=Ga?Ha:v;ya.nodesOverlap=Ma.nodesOverlap;ya.srcIntn=Ma.srcIntn;ya.tgtIntn=Ma.tgtIntn;ya.isRound=aa.startsWith("round");d&&(x.isParent()||
x.isChild()||w.isParent()||w.isChild())&&(x.parents().anySame(w)||w.parents().anySame(x)||x.same(w)&&x.isParent())?b.findCompoundLoopPoints(Ea,Ma,sa,na):x===w?b.findLoopPoints(Ea,Ma,sa,na):aa.endsWith("segments")?b.findSegmentsPoints(Ea,Ma):aa.endsWith("taxi")?b.findTaxiPoints(Ea,Ma):aa==="straight"||!na&&v.eles.length%2===1&&sa===Math.floor(v.eles.length/2)?b.findStraightEdgePoints(Ea):b.findBezierPoints(Ea,Ma,sa,na,Ga);b.findEndpoints(Ea);b.tryToCorrectInvalidPoints(Ea,Ma);b.checkForInvalidEdgeWarning(Ea);
b.storeAllpts(Ea);b.storeEdgeProjections(Ea);b.calculateArrowAngles(Ea);b.recalculateEdgeLabelProjections(Ea);b.calculateLabelAngles(Ea)}};for(var u=0;u<g.length;u++)a();this.findHaystackPoints(h)}},getSegmentPoints:function(a){var b=a[0]._private.rscratch;this.recalculateRenderedStyle(a);if(b.edgeType==="segments")return si(b.segpts)},getControlPoints:function(a){var b=a[0]._private.rscratch;this.recalculateRenderedStyle(a);a=b.edgeType;if(a==="bezier"||a==="multibezier"||a==="self"||a==="compound")return si(b.ctrlpts)},
getEdgeMidpoint:function(a){var b=a[0]._private.rscratch;this.recalculateRenderedStyle(a);return{x:b.midX,y:b.midY}}},{manualEndptToPx:function(a,b){var c=a.position(),d=a.outerWidth(),e=a.outerHeight(),f=a._private.rscratch;if(b.value.length===2)return a=[b.pfValue[0],b.pfValue[1]],b.units[0]==="%"&&(a[0]*=d),b.units[1]==="%"&&(a[1]*=e),a[0]+=c.x,a[1]+=c.y,a;b=b.pfValue[0];b=-Math.PI/2+b;var g=2*Math.max(d,e);b=[c.x+Math.cos(b)*g,c.y+Math.sin(b)*g];return this.nodeShapes[this.getNodeShape(a)].intersectLine(c.x,
c.y,d,e,b[0],b[1],0,a.pstyle("corner-radius").value==="auto"?"auto":a.pstyle("corner-radius").pfValue,f)},findEndpoints:function(a){var b=a.source()[0],c=a.target()[0],d=b.position(),e=c.position(),f=a.pstyle("target-arrow-shape").value,g=a.pstyle("source-arrow-shape").value,h=a.pstyle("target-distance-from-node").pfValue,k=a.pstyle("source-distance-from-node").pfValue,l=b._private.rscratch;var m=c._private.rscratch;var n=a.pstyle("curve-style").value,p=a._private.rscratch,q=p.edgeType,t=q==="self"||
q==="compound",u=q==="bezier"||q==="multibezier"||t,x=q!=="bezier",v=q==="straight"||q==="segments",w=q==="segments";q=u||x||v;var C=t||n==="taxi";n=a.pstyle("source-endpoint");t=C?"outside-to-node":n.value;var y=b.pstyle("corner-radius").value==="auto"?"auto":b.pstyle("corner-radius").pfValue,B=a.pstyle("target-endpoint");C=C?"outside-to-node":B.value;var M=c.pstyle("corner-radius").value==="auto"?"auto":c.pstyle("corner-radius").pfValue;p.srcManEndpt=n;p.tgtManEndpt=B;if(u){var Q=[p.ctrlpts[0],
p.ctrlpts[1]];var ja=x?[p.ctrlpts[p.ctrlpts.length-2],p.ctrlpts[p.ctrlpts.length-1]]:Q}else v&&(Q=w?p.segpts.slice(0,2):[e.x,e.y],ja=w?p.segpts.slice(p.segpts.length-2):[d.x,d.y]);if(C==="inside-to-node")m=[e.x,e.y];else if(B.units)m=this.manualEndptToPx(c,B);else if(C==="outside-to-line")m=p.tgtIntn;else{if(C==="outside-to-node"||C==="outside-to-node-or-label")var da=ja;else if(C==="outside-to-line"||C==="outside-to-line-or-label")da=[d.x,d.y];m=this.nodeShapes[this.getNodeShape(c)].intersectLine(e.x,
e.y,c.outerWidth(),c.outerHeight(),da[0],da[1],0,M,m);if(C==="outside-to-node-or-label"||C==="outside-to-line-or-label")w=c._private.rscratch,x=w.labelX,u=w.labelY,v=w.labelWidth/2,w=w.labelHeight/2,B=c.pstyle("text-valign").value,B==="top"?u-=w:B==="bottom"&&(u+=w),c=c.pstyle("text-halign").value,c==="left"?x-=v:c==="right"&&(x+=v),da=Hd(da[0],da[1],[x-v,u-w,x+v,u-w,x+v,u+w,x-v,u+w],e.x,e.y),da.length>0&&(c=Oc(d,hd(m)),x=Oc(d,hd(da)),u=c,x<c&&(m=da,u=x),da.length>2&&Oc(d,{x:da[2],y:da[3]})<u&&(m=
[da[2],da[3]]))}da=ke(m,ja,this.arrowShapes[f].spacing(a)+h);f=ke(m,ja,this.arrowShapes[f].gap(a)+h);p.endX=f[0];p.endY=f[1];p.arrowEndX=da[0];p.arrowEndY=da[1];if(t==="inside-to-node")m=[d.x,d.y];else if(n.units)m=this.manualEndptToPx(b,n);else if(t==="outside-to-line")m=p.srcIntn;else{if(t==="outside-to-node"||t==="outside-to-node-or-label")var Da=Q;else if(t==="outside-to-line"||t==="outside-to-line-or-label")Da=[e.x,e.y];m=this.nodeShapes[this.getNodeShape(b)].intersectLine(d.x,d.y,b.outerWidth(),
b.outerHeight(),Da[0],Da[1],0,y,l);if(t==="outside-to-node-or-label"||t==="outside-to-line-or-label")ja=b._private.rscratch,l=ja.labelX,f=ja.labelY,h=ja.labelWidth/2,ja=ja.labelHeight/2,n=b.pstyle("text-valign").value,n==="top"?f-=ja:n==="bottom"&&(f+=ja),b=b.pstyle("text-halign").value,b==="left"?l-=h:b==="right"&&(l+=h),d=Hd(Da[0],Da[1],[l-h,f-ja,l+h,f-ja,l+h,f+ja,l-h,f+ja],d.x,d.y),d.length>0&&(Da=Oc(e,hd(m)),b=Oc(e,hd(d)),l=Da,b<Da&&(m=[d[0],d[1]],l=b),d.length>2&&Oc(e,{x:d[2],y:d[3]})<l&&(m=
[d[2],d[3]]))}e=ke(m,Q,this.arrowShapes[g].spacing(a)+k);a=ke(m,Q,this.arrowShapes[g].gap(a)+k);p.startX=a[0];p.startY=a[1];p.arrowStartX=e[0];p.arrowStartY=e[1];q&&(Ba(p.startX)&&Ba(p.startY)&&Ba(p.endX)&&Ba(p.endY)?p.badLine=!1:p.badLine=!0)},getSourceEndpoint:function(a){var b=a[0]._private.rscratch;this.recalculateRenderedStyle(a);switch(b.edgeType){case "haystack":return{x:b.haystackPts[0],y:b.haystackPts[1]};default:return{x:b.arrowStartX,y:b.arrowStartY}}},getTargetEndpoint:function(a){var b=
a[0]._private.rscratch;this.recalculateRenderedStyle(a);switch(b.edgeType){case "haystack":return{x:b.haystackPts[2],y:b.haystackPts[3]};default:return{x:b.arrowEndX,y:b.arrowEndY}}}},{storeEdgeProjections:function(a){var b=a._private,c=b.rscratch,d=c.edgeType;b.rstyle.bezierPts=null;b.rstyle.linePts=null;b.rstyle.haystackPts=null;if(d==="multibezier"||d==="bezier"||d==="self"||d==="compound")for(b.rstyle.bezierPts=[],d=0;d+5<c.allpts.length;d+=4){var e=a,f=c.allpts.slice(d,d+6);e=e._private.rstyle.bezierPts;
for(var g=0;g<this.bezierProjPcts.length;g++){var h=this.bezierProjPcts[g];e.push({x:Hb(f[0],f[2],f[4],h),y:Hb(f[1],f[3],f[5],h)})}}else if(d==="segments")for(f=b.rstyle.linePts=[],d=0;d+1<c.allpts.length;d+=2)f.push({x:c.allpts[d],y:c.allpts[d+1]});else d==="haystack"&&(c=c.haystackPts,b.rstyle.haystackPts=[{x:c[0],y:c[1]},{x:c[2],y:c[3]}]);b.rstyle.arrowWidth=this.getArrowWidth(a.pstyle("width").pfValue,a.pstyle("arrow-scale").value)*this.arrowShapeWidth},recalculateEdgeProjections:function(a){this.findEdgeControlPoints(a)}},
tc,nk,{registerCalculationListeners:function(){var a=this.cy,b=a.collection(),c=this,d=function(f){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;b.merge(f);if(g)for(g=0;g<f.length;g++){var h=f[g]._private.rstyle;h.clean=!1;h.cleanConnected=!1}};c.binder(a).on("bounds.* dirty.*",function(f){d(f.target)}).on("style.* background.*",function(f){d(f.target,!1)});var e=function(f){if(f){var g=c.onUpdateEleCalcsFns;b.cleanStyle();for(var h=0;h<b.length;h++){var k=b[h],l=k._private.rstyle;
k.isNode()&&!l.cleanConnected&&(d(k.connectedEdges()),l.cleanConnected=!0)}if(g)for(h=0;h<g.length;h++)(0,g[h])(f,b);c.recalculateRenderedStyle(b);b=a.collection()}};c.flushRenderedStyleQueue=function(){e(!0)};c.beforeRender(e,c.beforeRenderPriorities.eleCalcs)},onUpdateEleCalcs:function(a){(this.onUpdateEleCalcsFns=this.onUpdateEleCalcsFns||[]).push(a)},recalculateRenderedStyle:function(a,b){var c=function(l){return l._private.rstyle.cleanConnected};if(a.length!==0){var d=[],e=[];if(!this.destroyed){b===
void 0&&(b=!0);for(var f=0;f<a.length;f++){var g=a[f],h=g._private,k=h.rstyle;!g.isEdge()||c(g.source())&&c(g.target())||(k.clean=!1);g.isEdge()&&g.isBundledBezier()&&g.parallelEdges().some(function(l){return!l._private.rstyle.clean&&l.isBundledBezier()})&&(k.clean=!1);b&&k.clean||g.removed()||g.pstyle("display").value==="none"||(h.group==="nodes"?e.push(g):d.push(g),k.clean=!0)}for(a=0;a<e.length;a++)b=e[a],c=b._private.rstyle,f=b.position(),this.recalculateNodeLabelProjection(b),c.nodeX=f.x,c.nodeY=
f.y,c.nodeW=b.pstyle("width").pfValue,c.nodeH=b.pstyle("height").pfValue;this.recalculateEdgeProjections(d);for(e=0;e<d.length;e++)b=d[e]._private,a=b.rstyle,b=b.rscratch,a.srcX=b.arrowStartX,a.srcY=b.arrowStartY,a.tgtX=b.arrowEndX,a.tgtY=b.arrowEndY,a.midX=b.midX,a.midY=b.midY,a.labelAngle=b.labelAngle,a.sourceLabelAngle=b.sourceLabelAngle,a.targetLabelAngle=b.targetLabelAngle}}}},{updateCachedGrabbedEles:function(){var a=this.cachedZSortedEles;if(a){a.drag=[];a.nondrag=[];for(var b=[],c=0;c<a.length;c++){var d=
a[c],e=d._private.rscratch;d.grabbed()&&!d.isParent()?b.push(d):e.inDragLayer?a.drag.push(d):a.nondrag.push(d)}for(c=0;c<b.length;c++)d=b[c],a.drag.push(d)}},invalidateCachedZSortedEles:function(){this.cachedZSortedEles=null},getCachedZSortedEles:function(a){a||!this.cachedZSortedEles?(a=this.cy.mutableElements().toArray(),a.sort(ak),a.interactive=a.filter(function(b){return b.interactive()}),this.cachedZSortedEles=a,this.updateCachedGrabbedEles()):a=this.cachedZSortedEles;return a}}].forEach(function(a){Ra(pk,
a)});var qk={timeToRender:function(){return this.redrawTotalTime/this.redrawCount},redraw:function(a){a=a||bj;this.averageRedrawTime===void 0&&(this.averageRedrawTime=0);this.lastRedrawTime===void 0&&(this.lastRedrawTime=0);this.lastDrawTime===void 0&&(this.lastDrawTime=0);this.requestedFrame=!0;this.renderOptions=a},beforeRender:function(a,b){if(!this.destroyed){b==null&&Ab("Priority is not optional for beforeRender");var c=this.beforeRenderCallbacks;c.push({fn:a,priority:b});c.sort(function(d,e){return e.priority-
d.priority})}}},rk=function(a,b,c){a=a.beforeRenderCallbacks;for(var d=0;d<a.length;d++)a[d].fn(b,c)};qk.startRenderLoop=function(){var a=this,b=a.cy;if(!a.renderLoopStarted){a.renderLoopStarted=!0;var c=function(d){if(!a.destroyed){if(!b.batching())if(a.requestedFrame&&!a.skipFrame){rk(a,!0,d);d=lc();a.render(a.renderOptions);var e=a.lastDrawTime=lc();a.averageRedrawTime===void 0&&(a.averageRedrawTime=e-d);a.redrawCount===void 0&&(a.redrawCount=0);a.redrawCount++;a.redrawTotalTime===void 0&&(a.redrawTotalTime=
0);d=e-d;a.redrawTotalTime+=d;a.lastRedrawTime=d;a.averageRedrawTime=a.averageRedrawTime/2+d/2;a.requestedFrame=!1}else rk(a,!1,d);a.skipFrame=!1;ae(c)}};ae(c)}};var sk=function(a){this.init(a)},rd=sk.prototype;rd.clientFunctions="redrawHint render renderTo matchCanvasSize nodeShapeImpl arrowShapeImpl".split(" ");rd.init=function(a){this.options=a;this.cy=a.cy;var b=this.container=a.cy.container(),c=this.cy.window();if(c){var d=c.document,e=d.head,f=d.getElementById("__________cytoscape_stylesheet")!=
null;b.className.indexOf("__________cytoscape_container")<0&&(b.className=(b.className||"")+" __________cytoscape_container");f||(d=d.createElement("style"),d.id="__________cytoscape_stylesheet",d.textContent=".__________cytoscape_container { position: relative; }",e.insertBefore(d,e.children[0]));c.getComputedStyle(b).getPropertyValue("position")==="static"&&mb("A Cytoscape container has style position:static and so can not use UI extensions properly")}this.selection=[void 0,void 0,void 0,void 0,
0];this.bezierProjPcts=[.05,.225,.4,.5,.6,.775,.95];this.hoverData={down:null,last:null,downTime:null,triggerMode:null,dragging:!1,initialPan:[null,null],capture:!1};this.dragData={possibleDragElements:[]};this.touchData={start:null,capture:!1,startPosition:[null,null,null,null,null,null],singleTouchStartTime:null,singleTouchMoved:!0,now:[null,null,null,null,null,null],earlier:[null,null,null,null,null,null]};this.redraws=0;this.showFps=a.showFps;this.debug=a.debug;this.webgl=a.webgl;this.hideEdgesOnViewport=
a.hideEdgesOnViewport;this.textureOnViewport=a.textureOnViewport;this.wheelSensitivity=a.wheelSensitivity;this.motionBlurEnabled=a.motionBlur;this.forcedPixelRatio=Ba(a.pixelRatio)?a.pixelRatio:null;this.motionBlur=a.motionBlur;this.motionBlurOpacity=a.motionBlurOpacity;this.motionBlurTransparency=1-this.motionBlurOpacity;this.mbPxRBlurry=this.motionBlurPxRatio=1;this.minMbLowQualFrames=4;this.fullQualityMb=!1;this.clearedForMotionBlur=[];this.desktopTapThreshold=a.desktopTapThreshold;this.desktopTapThreshold2=
a.desktopTapThreshold*a.desktopTapThreshold;this.touchTapThreshold=a.touchTapThreshold;this.touchTapThreshold2=a.touchTapThreshold*a.touchTapThreshold;this.tapholdDuration=500;this.bindings=[];this.beforeRenderCallbacks=[];this.beforeRenderPriorities={animations:400,eleCalcs:300,eleTxrDeq:200,lyrTxrDeq:150,lyrTxrSkip:100};this.registerNodeShapes();this.registerArrowShapes();this.registerCalculationListeners()};rd.notify=function(a,b){b=this.cy;if(!this.destroyed)if(a==="init")this.load();else if(a===
"destroy")this.destroy();else{(a==="add"||a==="remove"||a==="move"&&b.hasCompoundNodes()||a==="load"||a==="zorder"||a==="mount")&&this.invalidateCachedZSortedEles();a==="viewport"&&this.redrawHint("select",!0);a==="gc"&&this.redrawHint("gc",!0);if(a==="load"||a==="resize"||a==="mount")this.invalidateContainerClientCoordsCache(),this.matchCanvasSize(this.container);this.redrawHint("eles",!0);this.redrawHint("drag",!0);this.startRenderLoop();this.redraw()}};rd.destroy=function(){this.destroyed=!0;this.cy.stopAnimationLoop();
for(var a=0;a<this.bindings.length;a++){var b=this.bindings[a],c=b.target;(c.off||c.removeEventListener).apply(c,b.args)}this.bindings=[];this.beforeRenderCallbacks=[];this.onUpdateEleCalcsFns=[];this.removeObserver&&this.removeObserver.disconnect();this.styleObserver&&this.styleObserver.disconnect();this.resizeObserver&&this.resizeObserver.disconnect();if(this.labelCalcDiv)try{document.body.removeChild(this.labelCalcDiv)}catch(d){}};rd.isHeadless=function(){return!1};[{arrowShapeWidth:.3,registerArrowShapes:function(){var a=
this.arrowShapes={},b=this,c=function(k,l,m,n,p,q,t){n=p.x+m/2+t;q=p.y-m/2-t;var u=p.y+m/2+t;return p.x-m/2-t<=k&&k<=n&&q<=l&&l<=u},d=function(k,l,m,n,p){return{x:(k*Math.cos(n)-l*Math.sin(n))*m+p.x,y:(k*Math.sin(n)+l*Math.cos(n))*m+p.y}},e=function(k,l,m,n){for(var p=[],q=0;q<k.length;q+=2)p.push(d(k[q],k[q+1],l,m,n));return p},f=function(k){for(var l=[],m=0;m<k.length;m++){var n=k[m];l.push(n.x,n.y)}return l},g=function(k){return k.pstyle("width").pfValue*k.pstyle("arrow-scale").pfValue*2},h=function(k,
l){Qa(l)&&(l=a[l]);a[k]=Ra({name:k,points:[-.15,-.3,.15,-.3,.15,.3,-.15,.3],collide:function(m,n,p,q,t,u){p=f(e(this.points,p+2*u,q,t));return Wb(m,n,p)},roughCollide:c,draw:function(m,n,p,q){n=e(this.points,n,p,q);b.arrowShapeImpl("polygon")(m,n)},spacing:function(m){return 0},gap:g},l)};h("none",{collide:ce,roughCollide:ce,draw:Ve,spacing:Zi,gap:Zi});h("triangle",{points:[-.15,-.3,0,0,.15,-.3]});h("arrow","triangle");h("triangle-backcurve",{points:a.triangle.points,controlPoint:[0,-.15],roughCollide:c,
draw:function(k,l,m,n,p){p=e(this.points,l,m,n);var q=this.controlPoint;l=d(q[0],q[1],l,m,n);b.arrowShapeImpl(this.name)(k,p,l)},gap:function(k){return g(k)*.8}});h("triangle-tee",{points:[0,0,.15,-.3,-.15,-.3,0,0],pointsTee:[-.15,-.4,-.15,-.5,.15,-.5,.15,-.4],collide:function(k,l,m,n,p,q,t){q=f(e(this.points,m+2*t,n,p));m=f(e(this.pointsTee,m+2*t,n,p));return Wb(k,l,q)||Wb(k,l,m)},draw:function(k,l,m,n,p){p=e(this.points,l,m,n);l=e(this.pointsTee,l,m,n);b.arrowShapeImpl(this.name)(k,p,l)}});h("circle-triangle",
{radius:.15,pointsTr:[0,-.15,.15,-.45,-.15,-.45,0,-.15],collide:function(k,l,m,n,p,q,t){q=Math.pow(p.x-k,2)+Math.pow(p.y-l,2)<=Math.pow((m+2*t)*this.radius,2);m=f(e(this.points,m+2*t,n,p));return Wb(k,l,m)||q},draw:function(k,l,m,n,p){m=e(this.pointsTr,l,m,n);b.arrowShapeImpl(this.name)(k,m,n.x,n.y,this.radius*l)},spacing:function(k){return b.getArrowWidth(k.pstyle("width").pfValue,k.pstyle("arrow-scale").value)*this.radius}});h("triangle-cross",{points:[0,0,.15,-.3,-.15,-.3,0,0],baseCrossLinePts:[-.15,
-.4,-.15,-.4,.15,-.4,.15,-.4],crossLinePts:function(k,l){var m=this.baseCrossLinePts.slice();k=l/k;m[3]-=k;m[5]-=k;return m},collide:function(k,l,m,n,p,q,t){var u=f(e(this.points,m+2*t,n,p));m=f(e(this.crossLinePts(m,q),m+2*t,n,p));return Wb(k,l,u)||Wb(k,l,m)},draw:function(k,l,m,n,p){var q=e(this.points,l,m,n);l=e(this.crossLinePts(l,p),l,m,n);b.arrowShapeImpl(this.name)(k,q,l)}});h("vee",{points:[-.15,-.3,0,0,.15,-.3,0,-.15],gap:function(k){return g(k)*.525}});h("circle",{radius:.15,collide:function(k,
l,m,n,p,q,t){return Math.pow(p.x-k,2)+Math.pow(p.y-l,2)<=Math.pow((m+2*t)*this.radius,2)},draw:function(k,l,m,n,p){b.arrowShapeImpl(this.name)(k,n.x,n.y,this.radius*l)},spacing:function(k){return b.getArrowWidth(k.pstyle("width").pfValue,k.pstyle("arrow-scale").value)*this.radius}});h("tee",{points:[-.15,0,-.15,-.1,.15,-.1,.15,0],spacing:function(k){return 1},gap:function(k){return 1}});h("square",{points:[-.15,0,.15,0,.15,-.3,-.15,-.3]});h("diamond",{points:[-.15,-.15,0,-.3,.15,-.15,0,0],gap:function(k){return k.pstyle("width").pfValue*
k.pstyle("arrow-scale").value}});h("chevron",{points:[0,0,-.15,-.15,-.1,-.2,0,-.1,.1,-.2,.15,-.15],gap:function(k){return.95*k.pstyle("width").pfValue*k.pstyle("arrow-scale").value}})}},pk,{getCachedImage:function(a,b,c){var d=this.imageCache=this.imageCache||{},e=d[a];if(e)return e.image.complete||e.image.addEventListener("load",c),e.image;e=d[a]=d[a]||{};var f=e.image=new Image;f.addEventListener("load",c);f.addEventListener("error",function(){f.error=!0});a.substring(0,5).toLowerCase()!=="data:"&&
(f.crossOrigin=b==="null"?null:b);f.src=a;return f}},{registerBinding:function(a,b,c,d){var e=Array.prototype.slice.apply(arguments,[1]);if(Array.isArray(a)){for(var f=[],g=0;g<a.length;g++){var h=a[g];h!==void 0&&(h=this.binder(h),f.push(h.on.apply(h,e)))}return f}h=this.binder(a);return h.on.apply(h,e)},binder:function(a){var b=this,c=b.cy.window(),d;(d=a===c||a===c.document||a===c.document.body)||(d=typeof HTMLElement==="undefined"?!1:a instanceof HTMLElement);var e=d;if(b.supportsPassiveEvents==
null){var f=!1;try{var g=Object.defineProperty({},"passive",{get:function(){return f=!0}});c.addEventListener("test",null,g)}catch(h){}b.supportsPassiveEvents=f}c=function(h,k,l){var m=Array.prototype.slice.call(arguments);e&&b.supportsPassiveEvents&&(m[2]={capture:l!=null?l:!1,passive:!1,once:!1});b.bindings.push({target:a,args:m});(a.addEventListener||a.on).apply(a,m);return this};return{on:c,addEventListener:c,addListener:c,bind:c}},nodeIsDraggable:function(a){return a&&a.isNode()&&!a.locked()&&
a.grabbable()},nodeIsGrabbable:function(a){return this.nodeIsDraggable(a)&&a.interactive()},load:function(){var a=this,b=a.cy.window(),c=function(z){return z.selected()},d=function(z,K,R,ba){z==null&&(z=a.cy);for(var S=0;S<K.length;S++)z.emit({originalEvent:R,type:K[S],position:ba})},e=function(z,K){var R=!0;if(a.cy.hasCompoundNodes()&&z&&z.pannable())for(var ba=0;K&&ba<K.length;ba++){if(z=K[ba],z.isNode()&&z.isParent()&&!z.pannable()){R=!1;break}}else R=!0;return R},f=function(z){z[0]._private.rscratch.inDragLayer=
!0},g=function(z,K){K=K.addToList;K.has(z)||!z.grabbable()||z.locked()||(K.merge(z),z[0]._private.grabbed=!0)},h=function(z,K){!z.cy().hasCompoundNodes()||K.inDragLayer==null&&K.addToList==null||(z=z.descendants(),K.inDragLayer&&(z.forEach(f),z.connectedEdges().forEach(f)),K.addToList&&g(z,K))},k=function(z,K){K=K||{};var R=z.cy().hasCompoundNodes();K.inDragLayer&&(z.forEach(f),z.neighborhood().stdFilter(function(ba){return!R||ba.isEdge()}).forEach(f));K.addToList&&z.forEach(function(ba){g(ba,K)});
h(z,K);m(z,{inDragLayer:K.inDragLayer});a.updateCachedGrabbedEles()},l=function(z){z&&(a.getCachedZSortedEles().forEach(function(K){K[0]._private.grabbed=!1;K[0]._private.rscratch.inDragLayer=!1;K[0]._private.rscratch.isGrabTarget=!1}),a.updateCachedGrabbedEles())},m=function(z,K){if((K.inDragLayer!=null||K.addToList!=null)&&z.cy().hasCompoundNodes()){var R=z.ancestors().orphans();R.same(z)||(z=R.descendants().spawnSelf().merge(R).unmerge(z).unmerge(z.descendants()),R=z.connectedEdges(),K.inDragLayer&&
(R.forEach(f),z.forEach(f)),K.addToList&&z.forEach(function(ba){g(ba,K)}))}},n=function(){document.activeElement!=null&&document.activeElement.blur!=null&&document.activeElement.blur()},p=typeof MutationObserver!=="undefined",q=typeof ResizeObserver!=="undefined";p?(a.removeObserver=new MutationObserver(function(z){for(var K=0;K<z.length;K++){var R=z[K].removedNodes;if(R)for(var ba=0;ba<R.length;ba++)if(R[ba]===a.container){a.destroy();break}}}),a.container.parentNode&&a.removeObserver.observe(a.container.parentNode,
{childList:!0})):a.registerBinding(a.container,"DOMNodeRemoved",function(z){a.destroy()});var t=Dd(function(){a.cy.resize()},100);p&&(a.styleObserver=new MutationObserver(t),a.styleObserver.observe(a.container,{attributes:!0}));a.registerBinding(b,"resize",t);q&&(a.resizeObserver=new ResizeObserver(t),a.resizeObserver.observe(a.container));var u=function(){a.invalidateContainerClientCoordsCache()};(function(z,K){for(;z!=null;)K(z),z=z.parentNode})(a.container,function(z){a.registerBinding(z,"transitionend",
u);a.registerBinding(z,"animationend",u);a.registerBinding(z,"scroll",u)});a.registerBinding(a.container,"contextmenu",function(z){z.preventDefault()});var x=function(z){var K=a.findContainerClientCoords(),R=K[0],ba=K[1],S=K[2];K=K[3];for(var oa=z.touches?z.touches:[z],wa=!1,ia=0;ia<oa.length;ia++){var Ia=oa[ia];if(R<=Ia.clientX&&Ia.clientX<=R+S&&ba<=Ia.clientY&&Ia.clientY<=ba+K){wa=!0;break}}if(!wa)return!1;R=a.container;z=z.target.parentNode;for(ba=!1;z;){if(z===R){ba=!0;break}z=z.parentNode}return ba?
!0:!1};a.registerBinding(a.container,"mousedown",function(z){if(x(z)&&(a.hoverData.which!==1||z.which===1)){z.preventDefault();n();a.hoverData.capture=!0;a.hoverData.which=z.which;var K=a.cy,R=[z.clientX,z.clientY],ba=a.projectIntoViewport(R[0],R[1]),S=a.selection,oa=a.findNearestElements(ba[0],ba[1],!0,!1),wa=oa[0],ia=a.dragData.possibleDragElements;a.hoverData.mdownPos=ba;a.hoverData.mdownGPos=R;R=function(){a.hoverData.tapholdCancelled=!1;clearTimeout(a.hoverData.tapholdTimeout);a.hoverData.tapholdTimeout=
setTimeout(function(){if(!a.hoverData.tapholdCancelled){var lb=a.hoverData.down;lb?lb.emit({originalEvent:z,type:"taphold",position:{x:ba[0],y:ba[1]}}):K.emit({originalEvent:z,type:"taphold",position:{x:ba[0],y:ba[1]}})}},a.tapholdDuration)};if(z.which==3)a.hoverData.cxtStarted=!0,oa={originalEvent:z,type:"cxttapstart",position:{x:ba[0],y:ba[1]}},wa?(wa.activate(),wa.emit(oa),a.hoverData.down=wa):K.emit(oa),a.hoverData.downTime=(new Date).getTime(),a.hoverData.cxtDragged=!1;else if(z.which==1){wa&&
wa.activate();if(wa!=null&&a.nodeIsGrabbable(wa)){var Ia=function(lb){return{originalEvent:z,type:lb,position:{x:ba[0],y:ba[1]}}},Ta=function(lb){lb.emit(Ia("grab"))};wa[0]._private.rscratch.isGrabTarget=!0;if(wa.selected()){ia=a.dragData.possibleDragElements=K.collection();var $a=K.$(function(lb){return lb.isNode()&&lb.selected()&&a.nodeIsGrabbable(lb)});k($a,{addToList:ia});wa.emit(Ia("grabon"));$a.forEach(Ta)}else ia=a.dragData.possibleDragElements=K.collection(),k(wa,{addToList:ia}),wa.emit(Ia("grabon")).emit(Ia("grab"));
a.redrawHint("eles",!0);a.redrawHint("drag",!0)}a.hoverData.down=wa;a.hoverData.downs=oa;a.hoverData.downTime=(new Date).getTime();d(wa,["mousedown","tapstart","vmousedown"],z,{x:ba[0],y:ba[1]});wa==null?(S[4]=1,a.data.bgActivePosistion={x:ba[0],y:ba[1]},a.redrawHint("select",!0),a.redraw()):wa.pannable()&&(S[4]=1);R()}S[0]=S[2]=ba[0];S[1]=S[3]=ba[1]}},!1);p=function(z){if((z=z.getRootNode())&&z.nodeType===11&&z.host!==void 0)return z}(a.container);a.registerBinding([b,p],"mousemove",function(z){if(a.hoverData.capture||
x(z)){var K=!1,R=a.cy,ba=R.zoom();K=[z.clientX,z.clientY];var S=a.projectIntoViewport(K[0],K[1]),oa=a.hoverData.mdownPos,wa=a.hoverData.mdownGPos,ia=a.selection,Ia=null;a.hoverData.draggingEles||a.hoverData.dragging||a.hoverData.selecting||(Ia=a.findNearestElement(S[0],S[1],!0,!1));var Ta=a.hoverData.last,$a=a.hoverData.down,lb=[S[0]-ia[2],S[1]-ia[3]],jb=a.dragData.possibleDragElements;if(wa){var ob=K[0]-wa[0];K=K[1]-wa[1];a.hoverData.isOverThresholdDrag=ob=ob*ob+K*K>=a.desktopTapThreshold2}wa=z.shiftKey||
z.metaKey||z.ctrlKey;ob&&(a.hoverData.tapholdCancelled=!0);var wb=function(){var oc=a.hoverData.dragDelta=a.hoverData.dragDelta||[];oc.length===0?(oc.push(lb[0]),oc.push(lb[1])):(oc[0]+=lb[0],oc[1]+=lb[1])};K=!0;d(Ia,["mousemove","vmousemove","tapdrag"],z,{x:S[0],y:S[1]});var Kb=function(){a.data.bgActivePosistion=void 0;a.hoverData.selecting||R.emit({originalEvent:z,type:"boxstart",position:{x:S[0],y:S[1]}});ia[4]=1;a.hoverData.selecting=!0;a.redrawHint("select",!0);a.redraw()};a.hoverData.which===
3?ob&&(jb={originalEvent:z,type:"cxtdrag",position:{x:S[0],y:S[1]}},$a?$a.emit(jb):R.emit(jb),a.hoverData.cxtDragged=!0,a.hoverData.cxtOver&&Ia===a.hoverData.cxtOver||(a.hoverData.cxtOver&&a.hoverData.cxtOver.emit({originalEvent:z,type:"cxtdragout",position:{x:S[0],y:S[1]}}),(a.hoverData.cxtOver=Ia)&&Ia.emit({originalEvent:z,type:"cxtdragover",position:{x:S[0],y:S[1]}}))):a.hoverData.dragging?(K=!0,R.panningEnabled()&&R.userPanningEnabled()&&(a.hoverData.justStartedPan?(jb=a.hoverData.mdownPos,jb=
{x:(S[0]-jb[0])*ba,y:(S[1]-jb[1])*ba},a.hoverData.justStartedPan=!1):jb={x:lb[0]*ba,y:lb[1]*ba},R.panBy(jb),R.emit("dragpan"),a.hoverData.dragged=!0),S=a.projectIntoViewport(z.clientX,z.clientY)):ia[4]!=1||$a!=null&&!$a.pannable()?($a&&$a.pannable()&&$a.active()&&$a.unactivate(),$a&&$a.grabbed()||Ia==Ta||(Ta&&d(Ta,["mouseout","tapdragout"],z,{x:S[0],y:S[1]}),Ia&&d(Ia,["mouseover","tapdragover"],z,{x:S[0],y:S[1]}),a.hoverData.last=Ia),$a&&(ob?R.boxSelectionEnabled()&&wa?($a&&$a.grabbed()&&(l(jb),$a.emit("freeon"),
jb.emit("free"),a.dragData.didDrag&&($a.emit("dragfreeon"),jb.emit("dragfree"))),Kb()):$a&&$a.grabbed()&&a.nodeIsDraggable($a)&&((Ia=!a.dragData.didDrag)&&a.redrawHint("eles",!0),a.dragData.didDrag=!0,a.hoverData.draggingEles||k(jb,{inDragLayer:!0}),ba={x:0,y:0},Ba(lb[0])&&Ba(lb[1])&&(ba.x+=lb[0],ba.y+=lb[1],Ia&&(Ia=a.hoverData.dragDelta)&&Ba(Ia[0])&&Ba(Ia[1])&&(ba.x+=Ia[0],ba.y+=Ia[1])),a.hoverData.draggingEles=!0,jb.silentShift(ba).emit("position drag"),a.redrawHint("drag",!0),a.redraw()):wb()),
K=!0):ob&&(a.hoverData.dragging||!R.boxSelectionEnabled()||!wa&&R.panningEnabled()&&R.userPanningEnabled()?!a.hoverData.selecting&&R.panningEnabled()&&R.userPanningEnabled()&&e($a,a.hoverData.downs)&&(a.hoverData.dragging=!0,a.hoverData.justStartedPan=!0,ia[4]=0,a.data.bgActivePosistion=hd(oa),a.redrawHint("select",!0),a.redraw()):Kb(),$a&&$a.pannable()&&$a.active()&&$a.unactivate());ia[2]=S[0];ia[3]=S[1];if(K)return z.stopPropagation&&z.stopPropagation(),z.preventDefault&&z.preventDefault(),!1}},
!1);var v,w,C;a.registerBinding(b,"mouseup",function(z){if((a.hoverData.which!==1||z.which===1||!a.hoverData.capture)&&a.hoverData.capture){a.hoverData.capture=!1;var K=a.cy,R=a.projectIntoViewport(z.clientX,z.clientY),ba=a.selection,S=a.findNearestElement(R[0],R[1],!0,!1),oa=a.dragData.possibleDragElements,wa=a.hoverData.down,ia=z.shiftKey||z.metaKey||z.ctrlKey;a.data.bgActivePosistion&&(a.redrawHint("select",!0),a.redraw());a.hoverData.tapholdCancelled=!0;a.data.bgActivePosistion=void 0;wa&&wa.unactivate();
a.hoverData.which===3?(oa={originalEvent:z,type:"cxttapend",position:{x:R[0],y:R[1]}},wa?wa.emit(oa):K.emit(oa),a.hoverData.cxtDragged||(oa={originalEvent:z,type:"cxttap",position:{x:R[0],y:R[1]}},wa?wa.emit(oa):K.emit(oa)),a.hoverData.cxtDragged=!1,a.hoverData.which=null):a.hoverData.which===1&&(d(S,["mouseup","tapend","vmouseup"],z,{x:R[0],y:R[1]}),a.dragData.didDrag||a.hoverData.dragged||a.hoverData.selecting||a.hoverData.isOverThresholdDrag||(d(wa,["click","tap","vclick"],z,{x:R[0],y:R[1]}),w=
!1,z.timeStamp-C<=K.multiClickDebounceTime()?(v&&clearTimeout(v),w=!0,C=null,d(wa,["dblclick","dbltap","vdblclick"],z,{x:R[0],y:R[1]})):(v=setTimeout(function(){w||d(wa,["oneclick","onetap","voneclick"],z,{x:R[0],y:R[1]})},K.multiClickDebounceTime()),C=z.timeStamp)),wa!=null||a.dragData.didDrag||a.hoverData.selecting||a.hoverData.dragged||z.shiftKey||z.metaKey||z.ctrlKey||(K.$(c).unselect(["tapunselect"]),oa.length>0&&a.redrawHint("eles",!0),a.dragData.possibleDragElements=oa=K.collection()),S!=wa||
a.dragData.didDrag||a.hoverData.selecting||S==null||!S._private.selectable||(a.hoverData.dragging||(K.selectionType()==="additive"||ia?S.selected()?S.unselect(["tapunselect"]):S.select(["tapselect"]):ia||(K.$(c).unmerge(S).unselect(["tapunselect"]),S.select(["tapselect"]))),a.redrawHint("eles",!0)),a.hoverData.selecting&&(S=K.collection(a.getAllInBox(ba[0],ba[1],ba[2],ba[3])),a.redrawHint("select",!0),S.length>0&&a.redrawHint("eles",!0),K.emit({type:"boxend",originalEvent:z,position:{x:R[0],y:R[1]}}),
K.selectionType()!=="additive"&&(ia||K.$(c).unmerge(S).unselect()),S.emit("box").stdFilter(function(Ia){return Ia.selectable()&&!Ia.selected()}).select().emit("boxselect"),a.redraw()),a.hoverData.dragging&&(a.hoverData.dragging=!1,a.redrawHint("select",!0),a.redrawHint("eles",!0),a.redraw()),ba[4]||(a.redrawHint("drag",!0),a.redrawHint("eles",!0),K=wa&&wa.grabbed(),l(oa),K&&(wa.emit("freeon"),oa.emit("free"),a.dragData.didDrag&&(wa.emit("dragfreeon"),oa.emit("dragfree")))));ba[4]=0;a.hoverData.down=
null;a.hoverData.cxtStarted=!1;a.hoverData.draggingEles=!1;a.hoverData.selecting=!1;a.hoverData.isOverThresholdDrag=!1;a.dragData.didDrag=!1;a.hoverData.dragged=!1;a.hoverData.dragDelta=[];a.hoverData.mdownPos=null;a.hoverData.mdownGPos=null;a.hoverData.which=null}},!1);var y=[],B,M=1E5,Q=function(z,K){for(var R=0;R<z.length;R++)if(z[R]%K!==0)return!1;return!0},ja=function(z){for(var K=Math.abs(z[0]),R=1;R<z.length;R++)if(Math.abs(z[R])!==K)return!1;return!0},da=function(z){var K=!1,R=z.deltaY;R==
null&&(z.wheelDeltaY!=null?R=z.wheelDeltaY/4:z.wheelDelta!=null&&(R=z.wheelDelta/4));if(B==null)if(y.length>=4){B=Q(y,5);if(!B){var ba=Math.abs(y[0]);B=ja(y)&&ba>5}if(B)for(ba=0;ba<y.length;ba++)M=Math.min(Math.abs(y[ba]),M)}else y.push(R),K=!0;else B&&(M=Math.min(Math.abs(R),M));if(!a.scrollingPage){ba=a.cy;var S=ba.zoom(),oa=ba.pan(),wa=a.projectIntoViewport(z.clientX,z.clientY);S=[wa[0]*S+oa.x,wa[1]*S+oa.y];a.hoverData.draggingEles||a.hoverData.dragging||a.hoverData.cxtStarted||a.selection[4]!==
0?z.preventDefault():ba.panningEnabled()&&ba.userPanningEnabled()&&ba.zoomingEnabled()&&ba.userZoomingEnabled()&&(z.preventDefault(),a.data.wheelZooming=!0,clearTimeout(a.data.wheelTimeout),a.data.wheelTimeout=setTimeout(function(){a.data.wheelZooming=!1;a.redrawHint("eles",!0);a.redraw()},150),K&&Math.abs(R)>5&&(R=(R>0?1:R<0?-1:0)*5),K=R/-250,B&&(K/=M,K*=3),K*=a.wheelSensitivity,z.deltaMode===1&&(K*=33),K=ba.zoom()*Math.pow(10,K),z.type==="gesturechange"&&(K=a.gestureStartZoom*z.scale),ba.zoom({level:K,
renderedPosition:{x:S[0],y:S[1]}}),ba.emit(z.type==="gesturechange"?"pinchzoom":"scrollzoom"))}};a.registerBinding(a.container,"wheel",da,!0);a.registerBinding(b,"scroll",function(z){a.scrollingPage=!0;clearTimeout(a.scrollingPageTimeout);a.scrollingPageTimeout=setTimeout(function(){a.scrollingPage=!1},250)},!0);a.registerBinding(a.container,"gesturestart",function(z){a.gestureStartZoom=a.cy.zoom();a.hasTouchStarted||z.preventDefault()},!0);a.registerBinding(a.container,"gesturechange",function(z){a.hasTouchStarted||
da(z)},!0);a.registerBinding(a.container,"mouseout",function(z){var K=a.projectIntoViewport(z.clientX,z.clientY);a.cy.emit({originalEvent:z,type:"mouseout",position:{x:K[0],y:K[1]}})},!1);a.registerBinding(a.container,"mouseover",function(z){var K=a.projectIntoViewport(z.clientX,z.clientY);a.cy.emit({originalEvent:z,type:"mouseover",position:{x:K[0],y:K[1]}})},!1);var Da,pa,ra,Z,fa,sa,Ea,ya,aa,na,Ga,Ha,Ma,cb;a.registerBinding(a.container,"touchstart",cb=function(z){a.hasTouchStarted=!0;if(x(z)){n();
a.touchData.capture=!0;a.data.bgActivePosistion=void 0;var K=a.cy,R=a.touchData.now,ba=a.touchData.earlier;if(z.touches[0]){var S=a.projectIntoViewport(z.touches[0].clientX,z.touches[0].clientY);R[0]=S[0];R[1]=S[1]}z.touches[1]&&(S=a.projectIntoViewport(z.touches[1].clientX,z.touches[1].clientY),R[2]=S[0],R[3]=S[1]);z.touches[2]&&(S=a.projectIntoViewport(z.touches[2].clientX,z.touches[2].clientY),R[4]=S[0],R[5]=S[1]);if(z.touches[1]){a.touchData.singleTouchMoved=!0;l(a.dragData.touchDragEles);var oa=
a.findContainerClientCoords();aa=oa[0];na=oa[1];Ga=oa[2];Ha=oa[3];Da=z.touches[0].clientX-aa;pa=z.touches[0].clientY-na;ra=z.touches[1].clientX-aa;Z=z.touches[1].clientY-na;Ma=0<=Da&&Da<=Ga&&0<=ra&&ra<=Ga&&0<=pa&&pa<=Ha&&0<=Z&&Z<=Ha;oa=K.pan();var wa=K.zoom();fa=Math.sqrt((ra-Da)*(ra-Da)+(Z-pa)*(Z-pa));sa=(ra-Da)*(ra-Da)+(Z-pa)*(Z-pa);Ea=[(Da+ra)/2,(pa+Z)/2];ya=[(Ea[0]-oa.x)/wa,(Ea[1]-oa.y)/wa];if(sa<4E4&&!z.touches[2]){ba=a.findNearestElement(R[0],R[1],!0,!0);S=a.findNearestElement(R[2],R[3],!0,
!0);ba&&ba.isNode()?(ba.activate().emit({originalEvent:z,type:"cxttapstart",position:{x:R[0],y:R[1]}}),a.touchData.start=ba):S&&S.isNode()?(S.activate().emit({originalEvent:z,type:"cxttapstart",position:{x:R[0],y:R[1]}}),a.touchData.start=S):K.emit({originalEvent:z,type:"cxttapstart",position:{x:R[0],y:R[1]}});a.touchData.start&&(a.touchData.start._private.grabbed=!1);a.touchData.cxt=!0;a.touchData.cxtDragged=!1;a.data.bgActivePosistion=void 0;a.redraw();return}}if(z.touches[2])K.boxSelectionEnabled()&&
z.preventDefault();else if(!z.touches[1]&&z.touches[0]){wa=a.findNearestElements(R[0],R[1],!0,!0);oa=wa[0];if(oa!=null&&(oa.activate(),a.touchData.start=oa,a.touchData.starts=wa,a.nodeIsGrabbable(oa))){wa=a.dragData.touchDragEles=K.collection();var ia=null;a.redrawHint("eles",!0);a.redrawHint("drag",!0);oa.selected()?(ia=K.$(function(Ta){return Ta.selected()&&a.nodeIsGrabbable(Ta)}),k(ia,{addToList:wa})):k(oa,{addToList:wa});oa[0]._private.rscratch.isGrabTarget=!0;var Ia=function(Ta){return{originalEvent:z,
type:Ta,position:{x:R[0],y:R[1]}}};oa.emit(Ia("grabon"));ia?ia.forEach(function(Ta){Ta.emit(Ia("grab"))}):oa.emit(Ia("grab"))}d(oa,["touchstart","tapstart","vmousedown"],z,{x:R[0],y:R[1]});oa==null&&(a.data.bgActivePosistion={x:S[0],y:S[1]},a.redrawHint("select",!0),a.redraw());a.touchData.singleTouchMoved=!1;a.touchData.singleTouchStartTime=+new Date;clearTimeout(a.touchData.tapholdTimeout);a.touchData.tapholdTimeout=setTimeout(function(){a.touchData.singleTouchMoved!==!1||a.pinching||a.touchData.selecting||
d(a.touchData.start,["taphold"],z,{x:R[0],y:R[1]})},a.tapholdDuration)}if(z.touches.length>=1){K=a.touchData.startPosition=[null,null,null,null,null,null];for(S=0;S<R.length;S++)K[S]=ba[S]=R[S];K=z.touches[0];a.touchData.startGPosition=[K.clientX,K.clientY]}}},!1);var sb;a.registerBinding(b,"touchmove",sb=function(z){var K=a.touchData.capture;if(K||x(z)){var R=a.selection,ba=a.cy,S=a.touchData.now,oa=a.touchData.earlier,wa=ba.zoom();if(z.touches[0]){var ia=a.projectIntoViewport(z.touches[0].clientX,
z.touches[0].clientY);S[0]=ia[0];S[1]=ia[1]}z.touches[1]&&(ia=a.projectIntoViewport(z.touches[1].clientX,z.touches[1].clientY),S[2]=ia[0],S[3]=ia[1]);z.touches[2]&&(ia=a.projectIntoViewport(z.touches[2].clientX,z.touches[2].clientY),S[4]=ia[0],S[5]=ia[1]);ia=a.touchData.startGPosition;if(K&&z.touches[0]&&ia){for(var Ia=[],Ta=0;Ta<S.length;Ta++)Ia[Ta]=S[Ta]-oa[Ta];var $a=z.touches[0].clientX-ia[0],lb=z.touches[0].clientY-ia[1];var jb=$a*$a+lb*lb>=a.touchTapThreshold2}if(K&&a.touchData.cxt){z.preventDefault();
ia=z.touches[0].clientX-aa;Ta=z.touches[0].clientY-na;var ob=z.touches[1].clientX-aa,wb=z.touches[1].clientY-na;ia=(ob-ia)*(ob-ia)+(wb-Ta)*(wb-Ta);if(ia/sa>=2.25||ia>=22500)a.touchData.cxt=!1,a.data.bgActivePosistion=void 0,a.redrawHint("select",!0),ia={originalEvent:z,type:"cxttapend",position:{x:S[0],y:S[1]}},a.touchData.start?(a.touchData.start.unactivate().emit(ia),a.touchData.start=null):ba.emit(ia)}if(K&&a.touchData.cxt){ia={originalEvent:z,type:"cxtdrag",position:{x:S[0],y:S[1]}};a.data.bgActivePosistion=
void 0;a.redrawHint("select",!0);a.touchData.start?a.touchData.start.emit(ia):ba.emit(ia);a.touchData.start&&(a.touchData.start._private.grabbed=!1);a.touchData.cxtDragged=!0;var Kb=a.findNearestElement(S[0],S[1],!0,!0);a.touchData.cxtOver&&Kb===a.touchData.cxtOver||(a.touchData.cxtOver&&a.touchData.cxtOver.emit({originalEvent:z,type:"cxtdragout",position:{x:S[0],y:S[1]}}),(a.touchData.cxtOver=Kb)&&Kb.emit({originalEvent:z,type:"cxtdragover",position:{x:S[0],y:S[1]}}))}else if(K&&z.touches[2]&&ba.boxSelectionEnabled())z.preventDefault(),
a.data.bgActivePosistion=void 0,this.lastThreeTouch=+new Date,a.touchData.selecting||ba.emit({originalEvent:z,type:"boxstart",position:{x:S[0],y:S[1]}}),a.touchData.selecting=!0,a.touchData.didSelect=!0,R[4]=1,R&&R.length!==0&&R[0]!==void 0?(R[2]=(S[0]+S[2]+S[4])/3,R[3]=(S[1]+S[3]+S[5])/3):(R[0]=(S[0]+S[2]+S[4])/3,R[1]=(S[1]+S[3]+S[5])/3,R[2]=(S[0]+S[2]+S[4])/3+1,R[3]=(S[1]+S[3]+S[5])/3+1),a.redrawHint("select",!0),a.redraw();else if(K&&z.touches[1]&&!a.touchData.didSelect&&ba.zoomingEnabled()&&ba.panningEnabled()&&
ba.userZoomingEnabled()&&ba.userPanningEnabled()){z.preventDefault();a.data.bgActivePosistion=void 0;a.redrawHint("select",!0);if(R=a.dragData.touchDragEles)for(a.redrawHint("drag",!0),Ta=0;Ta<R.length;Ta++)wa=R[Ta]._private,wa.grabbed=!1,wa.rscratch.inDragLayer=!1;wa=a.touchData.start;ia=z.touches[0].clientX-aa;Ta=z.touches[0].clientY-na;ob=z.touches[1].clientX-aa;wb=z.touches[1].clientY-na;Ia=Math.sqrt((ob-ia)*(ob-ia)+(wb-Ta)*(wb-Ta));jb=Ia/fa;if(Ma){$a=(ia-Da+(ob-ra))/2;lb=(Ta-pa+(wb-Z))/2;Kb=
ba.zoom();jb*=Kb;R=ba.pan();var oc=ya[0]*Kb+R.x,tk=ya[1]*Kb+R.y;$a={x:-jb/Kb*(oc-R.x-$a)+oc,y:-jb/Kb*(tk-R.y-lb)+tk};wa&&wa.active()&&(R=a.dragData.touchDragEles,l(R),a.redrawHint("drag",!0),a.redrawHint("eles",!0),wa.unactivate().emit("freeon"),R.emit("free"),a.dragData.didDrag&&(wa.emit("dragfreeon"),R.emit("dragfree")));ba.viewport({zoom:jb,pan:$a,cancelOnFailedZoom:!0});ba.emit("pinchzoom");fa=Ia;Da=ia;pa=Ta;ra=ob;Z=wb;a.pinching=!0}z.touches[0]&&(ia=a.projectIntoViewport(z.touches[0].clientX,
z.touches[0].clientY),S[0]=ia[0],S[1]=ia[1]);z.touches[1]&&(ia=a.projectIntoViewport(z.touches[1].clientX,z.touches[1].clientY),S[2]=ia[0],S[3]=ia[1]);z.touches[2]&&(ia=a.projectIntoViewport(z.touches[2].clientX,z.touches[2].clientY),S[4]=ia[0],S[5]=ia[1])}else if(z.touches[0]&&!a.touchData.didSelect){ia=a.touchData.start;Ta=a.touchData.last;a.hoverData.draggingEles||a.swipePanning||(Kb=a.findNearestElement(S[0],S[1],!0,!0));K&&ia!=null&&z.preventDefault();K&&ia!=null&&a.nodeIsDraggable(ia)&&(jb?
(R=a.dragData.touchDragEles,(wb=!a.dragData.didDrag)&&k(R,{inDragLayer:!0}),a.dragData.didDrag=!0,ob={x:0,y:0},Ba(Ia[0])&&Ba(Ia[1])&&(ob.x+=Ia[0],ob.y+=Ia[1],wb&&(a.redrawHint("eles",!0),(wb=a.touchData.dragDelta)&&Ba(wb[0])&&Ba(wb[1])&&(ob.x+=wb[0],ob.y+=wb[1]))),a.hoverData.draggingEles=!0,R.silentShift(ob).emit("position drag"),a.redrawHint("drag",!0),a.touchData.startPosition[0]==oa[0]&&a.touchData.startPosition[1]==oa[1]&&a.redrawHint("eles",!0),a.redraw()):(wb=a.touchData.dragDelta=a.touchData.dragDelta||
[],wb.length===0?(wb.push(Ia[0]),wb.push(Ia[1])):(wb[0]+=Ia[0],wb[1]+=Ia[1])));d(ia||Kb,["touchmove","tapdrag","vmousemove"],z,{x:S[0],y:S[1]});ia&&ia.grabbed()||Kb==Ta||(Ta&&Ta.emit({originalEvent:z,type:"tapdragout",position:{x:S[0],y:S[1]}}),Kb&&Kb.emit({originalEvent:z,type:"tapdragover",position:{x:S[0],y:S[1]}}));a.touchData.last=Kb;if(K)for(Ta=0;Ta<S.length;Ta++)S[Ta]&&a.touchData.startPosition[Ta]&&jb&&(a.touchData.singleTouchMoved=!0);K&&(ia==null||ia.pannable())&&ba.panningEnabled()&&ba.userPanningEnabled()&&
(e(ia,a.touchData.starts)&&(z.preventDefault(),a.data.bgActivePosistion||(a.data.bgActivePosistion=hd(a.touchData.startPosition)),a.swipePanning?(ba.panBy({x:Ia[0]*wa,y:Ia[1]*wa}),ba.emit("dragpan")):jb&&(a.swipePanning=!0,ba.panBy({x:$a*wa,y:lb*wa}),ba.emit("dragpan"),ia&&(ia.unactivate(),a.redrawHint("select",!0),a.touchData.start=null))),ia=a.projectIntoViewport(z.touches[0].clientX,z.touches[0].clientY),S[0]=ia[0],S[1]=ia[1])}for(Ta=0;Ta<S.length;Ta++)oa[Ta]=S[Ta];K&&z.touches.length>0&&!a.hoverData.draggingEles&&
!a.swipePanning&&a.data.bgActivePosistion!=null&&(a.data.bgActivePosistion=void 0,a.redrawHint("select",!0),a.redraw())}},!1);var Na;a.registerBinding(b,"touchcancel",Na=function(z){z=a.touchData.start;a.touchData.capture=!1;z&&z.unactivate()});var bb,Ya,vb,Ub;a.registerBinding(b,"touchend",bb=function(z){var K=a.touchData.start;if(a.touchData.capture){z.touches.length===0&&(a.touchData.capture=!1);z.preventDefault();var R=a.selection;a.swipePanning=!1;a.hoverData.draggingEles=!1;var ba=a.cy,S=ba.zoom(),
oa=a.touchData.now,wa=a.touchData.earlier;if(z.touches[0]){var ia=a.projectIntoViewport(z.touches[0].clientX,z.touches[0].clientY);oa[0]=ia[0];oa[1]=ia[1]}z.touches[1]&&(ia=a.projectIntoViewport(z.touches[1].clientX,z.touches[1].clientY),oa[2]=ia[0],oa[3]=ia[1]);z.touches[2]&&(ia=a.projectIntoViewport(z.touches[2].clientX,z.touches[2].clientY),oa[4]=ia[0],oa[5]=ia[1]);K&&K.unactivate();if(a.touchData.cxt)wa={originalEvent:z,type:"cxttapend",position:{x:oa[0],y:oa[1]}},K?K.emit(wa):ba.emit(wa),a.touchData.cxtDragged||
(wa={originalEvent:z,type:"cxttap",position:{x:oa[0],y:oa[1]}},K?K.emit(wa):ba.emit(wa)),a.touchData.start&&(a.touchData.start._private.grabbed=!1),a.touchData.cxt=!1,a.touchData.start=null,a.redraw();else{!z.touches[2]&&ba.boxSelectionEnabled()&&a.touchData.selecting&&(a.touchData.selecting=!1,ia=ba.collection(a.getAllInBox(R[0],R[1],R[2],R[3])),R[0]=void 0,R[1]=void 0,R[2]=void 0,R[3]=void 0,R[4]=0,a.redrawHint("select",!0),ba.emit({type:"boxend",originalEvent:z,position:{x:oa[0],y:oa[1]}}),ia.emit("box").stdFilter(function(Ia){return Ia.selectable()&&
!Ia.selected()}).select().emit("boxselect"),ia.nonempty()&&a.redrawHint("eles",!0),a.redraw());K!=null&&K.unactivate();z.touches[2]?(a.data.bgActivePosistion=void 0,a.redrawHint("select",!0)):z.touches[1]||z.touches[0]||z.touches[0]||(a.data.bgActivePosistion=void 0,a.redrawHint("select",!0),R=a.dragData.touchDragEles,K!=null?(ia=K._private.grabbed,l(R),a.redrawHint("drag",!0),a.redrawHint("eles",!0),ia&&(K.emit("freeon"),R.emit("free"),a.dragData.didDrag&&(K.emit("dragfreeon"),R.emit("dragfree"))),
d(K,["touchend","tapend","vmouseup","tapdragout"],z,{x:oa[0],y:oa[1]}),K.unactivate(),a.touchData.start=null):(R=a.findNearestElement(oa[0],oa[1],!0,!0),d(R,["touchend","tapend","vmouseup","tapdragout"],z,{x:oa[0],y:oa[1]})),R=a.touchData.startPosition[0]-oa[0],ia=a.touchData.startPosition[1]-oa[1],S*=(R*R+ia*ia)*S,a.touchData.singleTouchMoved||(K||ba.$(":selected").unselect(["tapunselect"]),d(K,["tap","vclick"],z,{x:oa[0],y:oa[1]}),Ya=!1,z.timeStamp-Ub<=ba.multiClickDebounceTime()?(vb&&clearTimeout(vb),
Ya=!0,Ub=null,d(K,["dbltap","vdblclick"],z,{x:oa[0],y:oa[1]})):(vb=setTimeout(function(){Ya||d(K,["onetap","voneclick"],z,{x:oa[0],y:oa[1]})},ba.multiClickDebounceTime()),Ub=z.timeStamp)),K!=null&&!a.dragData.didDrag&&K._private.selectable&&S<a.touchTapThreshold2&&!a.pinching&&(ba.selectionType()==="single"?(ba.$(c).unmerge(K).unselect(["tapunselect"]),K.select(["tapselect"])):K.selected()?K.unselect(["tapunselect"]):K.select(["tapselect"]),a.redrawHint("eles",!0)),a.touchData.singleTouchMoved=!0);
for(ba=0;ba<oa.length;ba++)wa[ba]=oa[ba];a.dragData.didDrag=!1;z.touches.length===0&&(a.touchData.dragDelta=[],a.touchData.startPosition=[null,null,null,null,null,null],a.touchData.startGPosition=null,a.touchData.didSelect=!1);z.touches.length<2&&(z.touches.length===1&&(a.touchData.startGPosition=[z.touches[0].clientX,z.touches[0].clientY]),a.pinching=!1,a.redrawHint("eles",!0),a.redraw())}}},!1);if(typeof TouchEvent==="undefined"){var Zb=[],gc=function(z){return{clientX:z.clientX,clientY:z.clientY,
force:1,identifier:z.pointerId,pageX:z.pageX,pageY:z.pageY,radiusX:z.width/2,radiusY:z.height/2,screenX:z.screenX,screenY:z.screenY,target:z.target}},Uc=function(z){for(var K=0;K<Zb.length;K++)if(Zb[K].event.pointerId===z.pointerId){Zb.splice(K,1);break}},Nd=function(z){var K=Zb.filter(function(R){return R.event.pointerId===z.pointerId})[0];K.event=z;K.touch=gc(z)},Hc=function(z){z.touches=Zb.map(function(K){return K.touch})},Ua=function(z){return z.pointerType==="mouse"||z.pointerType===4};a.registerBinding(a.container,
"pointerdown",function(z){Ua(z)||(z.preventDefault(),Zb.push({event:z,touch:gc(z)}),Hc(z),cb(z))});a.registerBinding(a.container,"pointerup",function(z){Ua(z)||(Uc(z),Hc(z),bb(z))});a.registerBinding(a.container,"pointercancel",function(z){Ua(z)||(Uc(z),Hc(z),Na(z))});a.registerBinding(a.container,"pointermove",function(z){Ua(z)||(z.preventDefault(),Nd(z),Hc(z),sb(z))})}}},{generatePolygon:function(a,b){return this.nodeShapes[a]={renderer:this,name:a,points:b,draw:function(c,d,e,f,g,h){this.renderer.nodeShapeImpl("polygon",
c,d,e,f,g,this.points)},intersectLine:function(c,d,e,f,g,h,k,l){return Hd(g,h,this.points,c,d,e/2,f/2,k)},checkPoint:function(c,d,e,f,g,h,k,l){return sc(c,d,this.points,h,k,f,g,[0,-1],e)}}},generateEllipse:function(){return this.nodeShapes.ellipse={renderer:this,name:"ellipse",draw:function(a,b,c,d,e,f){this.renderer.nodeShapeImpl(this.name,a,b,c,d,e)},intersectLine:function(a,b,c,d,e,f,g,h){c=(a-e)/(c/2+g);d=(b-f)/(d/2+g);d=Math.sqrt(c*c+d*d);g=d-1;g<0?a=[]:(d=g/d,a=[(a-e)*d+e,(b-f)*d+f]);return a},
checkPoint:function(a,b,c,d,e,f,g,h){return Qc(a,b,d,e,f,g,c)}}},generateRoundPolygon:function(a,b){return this.nodeShapes[a]={renderer:this,name:a,points:b,getOrCreateCorners:function(c,d,e,f,g,h,k){if(h[k]!==void 0&&h[k+"-cx"]===c&&h[k+"-cy"]===d)return h[k];h[k]=Array(b.length/2);h[k+"-cx"]=c;h[k+"-cy"]=d;var l=e/2,m=f/2;g=g==="auto"?Math.min(e/10,f/10,8):g;e=Array(b.length/2);for(f=0;f<b.length/2;f++)e[f]={x:c+l*b[f*2],y:d+m*b[f*2+1]};f=e.length;d=e[f-1];for(c=0;c<f;c++)l=e[c%f],m=e[(c+1)%f],
h[k][c]=Ie(d,l,m,g),d=l;return h[k]},draw:function(c,d,e,f,g,h,k){this.renderer.nodeShapeImpl("round-polygon",c,d,e,f,g,this.points,this.getOrCreateCorners(d,e,f,g,h,k,"drawCorners"))},intersectLine:function(c,d,e,f,g,h,k,l,m){return em(g,h,this.points,c,d,e,f,k,this.getOrCreateCorners(c,d,e,f,l,m,"corners"))},checkPoint:function(c,d,e,f,g,h,k,l,m){a:{e=this.points;f=this.getOrCreateCorners(h,k,f,g,l,m,"corners");g=Array(e.length*2);for(h=0;h<f.length;h++)if(k=f[h],g[h*4]=k.startX,g[h*4+1]=k.startY,
g[h*4+2]=k.stopX,g[h*4+3]=k.stopY,Math.pow(k.cx-c,2)+Math.pow(k.cy-d,2)<=Math.pow(k.radius,2)){c=!0;break a}c=Wb(c,d,g)}return c}}},generateRoundRectangle:function(){return this.nodeShapes["round-rectangle"]=this.nodeShapes.roundrectangle={renderer:this,name:"round-rectangle",points:Tb(4,0),draw:function(a,b,c,d,e,f){this.renderer.nodeShapeImpl(this.name,a,b,c,d,e,this.points,f)},intersectLine:function(a,b,c,d,e,f,g,h){return gj(e,f,a,b,c,d,g,h)},checkPoint:function(a,b,c,d,e,f,g,h){var k=d/2,l=e/
2;h=h==="auto"?Ac(d,e):h;h=Math.min(k,l,h);var m=h*2;return sc(a,b,this.points,f,g,d,e-m,[0,-1],c)||sc(a,b,this.points,f,g,d-m,e,[0,-1],c)||Qc(a,b,m,m,f-k+h,g-l+h,c)||Qc(a,b,m,m,f+k-h,g-l+h,c)||Qc(a,b,m,m,f+k-h,g+l-h,c)||Qc(a,b,m,m,f-k+h,g+l-h,c)?!0:!1}}},generateCutRectangle:function(){return this.nodeShapes["cut-rectangle"]=this.nodeShapes.cutrectangle={renderer:this,name:"cut-rectangle",cornerLength:8,points:Tb(4,0),draw:function(a,b,c,d,e,f){this.renderer.nodeShapeImpl(this.name,a,b,c,d,e,null,
f)},generateCutTrianglePts:function(a,b,c,d,e){e=e==="auto"?this.cornerLength:e;b/=2;var f=a/2;a=c-f;c+=f;f=d-b;d+=b;return{topLeft:[a,f+e,a+e,f,a+e,f+e],topRight:[c-e,f,c,f+e,c-e,f+e],bottomRight:[c,d-e,c-e,d,c-e,d-e],bottomLeft:[a+e,d,a,d-e,a+e,d-e]}},intersectLine:function(a,b,c,d,e,f,g,h){c=this.generateCutTrianglePts(c+2*g,d+2*g,a,b,h);c=[].concat.apply([],[c.topLeft.splice(0,4),c.topRight.splice(0,4),c.bottomRight.splice(0,4),c.bottomLeft.splice(0,4)]);return Hd(e,f,c,a,b)},checkPoint:function(a,
b,c,d,e,f,g,h){h=h==="auto"?this.cornerLength:h;if(sc(a,b,this.points,f,g,d,e-2*h,[0,-1],c)||sc(a,b,this.points,f,g,d-2*h,e,[0,-1],c))return!0;c=this.generateCutTrianglePts(d,e,f,g);return Wb(a,b,c.topLeft)||Wb(a,b,c.topRight)||Wb(a,b,c.bottomRight)||Wb(a,b,c.bottomLeft)}}},generateBarrel:function(){return this.nodeShapes.barrel={renderer:this,name:"barrel",points:Tb(4,0),draw:function(a,b,c,d,e,f){this.renderer.nodeShapeImpl(this.name,a,b,c,d,e)},intersectLine:function(a,b,c,d,e,f,g,h){c=this.generateBarrelBezierPts(c+
2*g,d+2*g,a,b);d=function(k){var l=id({x:k[0],y:k[1]},{x:k[2],y:k[3]},{x:k[4],y:k[5]},.15),m=id({x:k[0],y:k[1]},{x:k[2],y:k[3]},{x:k[4],y:k[5]},.5),n=id({x:k[0],y:k[1]},{x:k[2],y:k[3]},{x:k[4],y:k[5]},.85);return[k[0],k[1],l.x,l.y,m.x,m.y,n.x,n.y,k[4],k[5]]};c=[].concat(d(c.topLeft),d(c.topRight),d(c.bottomRight),d(c.bottomLeft));return Hd(e,f,c,a,b)},generateBarrelBezierPts:function(a,b,c,d){var e=b/2,f=a/2,g=c-f;c+=f;f=d-e;d+=e;var h=bf(a,b);b=h.heightOffset;e=h.widthOffset;a*=h.ctrlPtOffsetPct;
g={topLeft:[g,f+b,g+a,f,g+e,f],topRight:[c-e,f,c-a,f,c,f+b],bottomRight:[c,d-b,c-a,d,c-e,d],bottomLeft:[g+e,d,g+a,d,g,d-b]};g.topLeft.isTop=!0;g.topRight.isTop=!0;g.bottomLeft.isBottom=!0;g.bottomRight.isBottom=!0;return g},checkPoint:function(a,b,c,d,e,f,g,h){h=bf(d,e);var k=h.widthOffset;if(sc(a,b,this.points,f,g,d,e-2*h.heightOffset,[0,-1],c)||sc(a,b,this.points,f,g,d-2*k,e,[0,-1],c))return!0;c=this.generateBarrelBezierPts(d,e,f,g);d=function(l,m,n){var p=n[4],q=n[2],t=n[0],u=n[5],x=n[1];n=Math.max(p,
t);var v=Math.min(u,x);u=Math.max(u,x);return Math.min(p,t)<=l&&l<=n&&v<=m&&m<=u&&(m=[p-2*q+t,2*(q-p),p],l=dm(m[0],m[1],m[2],l).filter(function(w){return 0<=w&&w<=1}),l.length>0)?l[0]:null};e=Object.keys(c);for(f=0;f<e.length;f++)if(g=c[e[f]],h=d(a,b,g),h!=null&&(h=Hb(g[5],g[3],g[1],h),g.isTop&&h<=b||g.isBottom&&b<=h))return!0;return!1}}},generateBottomRoundrectangle:function(){return this.nodeShapes["bottom-round-rectangle"]=this.nodeShapes.bottomroundrectangle={renderer:this,name:"bottom-round-rectangle",
points:Tb(4,0),draw:function(a,b,c,d,e,f){this.renderer.nodeShapeImpl(this.name,a,b,c,d,e,this.points,f)},intersectLine:function(a,b,c,d,e,f,g,h){var k=b-(d/2+g);k=Bc(e,f,a,b,a-(c/2+g),k,a+(c/2+g),k,!1);return k.length>0?k:gj(e,f,a,b,c,d,g,h)},checkPoint:function(a,b,c,d,e,f,g,h){h=h==="auto"?Ac(d,e):h;var k=2*h;if(sc(a,b,this.points,f,g,d,e-k,[0,-1],c)||sc(a,b,this.points,f,g,d-k,e,[0,-1],c))return!0;var l=d/2+2*c,m=e/2+2*c;return Wb(a,b,[f-l,g-m,f-l,g,f+l,g,f+l,g-m])||Qc(a,b,k,k,f+d/2-h,g+e/2-h,
c)||Qc(a,b,k,k,f-d/2+h,g+e/2-h,c)?!0:!1}}},registerNodeShapes:function(){var a=this.nodeShapes={},b=this;this.generateEllipse();this.generatePolygon("triangle",Tb(3,0));this.generateRoundPolygon("round-triangle",Tb(3,0));this.generatePolygon("rectangle",Tb(4,0));a.square=a.rectangle;this.generateRoundRectangle();this.generateCutRectangle();this.generateBarrel();this.generateBottomRoundrectangle();var c=[0,1,1,0,0,-1,-1,0];this.generatePolygon("diamond",c);this.generateRoundPolygon("round-diamond",
c);this.generatePolygon("pentagon",Tb(5,0));this.generateRoundPolygon("round-pentagon",Tb(5,0));this.generatePolygon("hexagon",Tb(6,0));this.generateRoundPolygon("round-hexagon",Tb(6,0));this.generatePolygon("heptagon",Tb(7,0));this.generateRoundPolygon("round-heptagon",Tb(7,0));this.generatePolygon("octagon",Tb(8,0));this.generateRoundPolygon("round-octagon",Tb(8,0));c=Array(20);var d=af(5,0),e=af(5,Math.PI/5),f=.5*(3-Math.sqrt(5));f*=1.57;for(var g=0;g<e.length/2;g++)e[g*2]*=f,e[g*2+1]*=f;for(g=
0;g<5;g++)c[g*4]=d[g*2],c[g*4+1]=d[g*2+1],c[g*4+2]=e[g*2],c[g*4+3]=e[g*2+1];c=hj(c);this.generatePolygon("star",c);this.generatePolygon("vee",[-1,-1,0,-.333,1,-1,0,1]);this.generatePolygon("rhomboid",[-1,-1,.333,-1,1,1,-.333,1]);this.generatePolygon("right-rhomboid",[-.333,-1,1,-1,.333,1,-1,1]);this.nodeShapes.concavehexagon=this.generatePolygon("concave-hexagon",[-1,-.95,-.75,0,-1,.95,1,.95,.75,0,1,-.95]);c=[-1,-1,.25,-1,1,0,.25,1,-1,1];this.generatePolygon("tag",c);this.generateRoundPolygon("round-tag",
c);a.makePolygon=function(h){var k="polygon-"+h.join("$"),l;return(l=this[k])?l:b.generatePolygon(k,h)}}},qk].forEach(function(a){Ra(rd,a)});var sf=1E3/60,uk={setupDequeueing:function(a){return function(){var b=this,c=this.renderer;if(!b.dequeueingSetup){b.dequeueingSetup=!0;var d=Dd(function(){c.redrawHint("eles",!0);c.redrawHint("drag",!0);c.redraw()},a.deqRedrawThreshold);c.beforeRender(function(e,f){var g=lc(),h=c.averageRedrawTime,k=c.lastRedrawTime,l=[],m=c.cy.extent(),n=c.getPixelRatio();for(e||
c.flushRenderedStyleQueue();;){var p=lc(),q=p-g;p-=f;if(k<sf){if(p>=a.deqFastCost*(sf-(e?h:0)))break}else if(e){if(q>=a.deqCost*k||q>=a.deqAvgCost*h)break}else if(p>=a.deqNoDrawCost*sf)break;q=a.deq(b,n,m);if(q.length>0)for(p=0;p<q.length;p++)l.push(q[p]);else break}l.length>0&&(a.onDeqd(b,l),!e&&a.shouldRedraw(b,l,n,m)&&d())},(a.priority||Ve)(b))}}}},an=function(){function a(b){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ce;N(this,a);this.idsByKey=new rc;this.keyForId=new rc;this.cachesByLvl=
new rc;this.lvls=[];this.getKey=b;this.doesEleInvalidateKey=c}return L(a,[{key:"getIdsFor",value:function(b){b==null&&Ab("Can not get id list for null key");var c=this.idsByKey,d=this.idsByKey.get(b);d||(d=new Zc,c.set(b,d));return d}},{key:"addIdForKey",value:function(b,c){b!=null&&this.getIdsFor(b).add(c)}},{key:"deleteIdForKey",value:function(b,c){if(b!=null)this.getIdsFor(b)["delete"](c)}},{key:"getNumberOfIdsForKey",value:function(b){return b==null?0:this.getIdsFor(b).size}},{key:"updateKeyMappingFor",
value:function(b){var c=b.id(),d=this.keyForId.get(c);b=this.getKey(b);this.deleteIdForKey(d,c);this.addIdForKey(b,c);this.keyForId.set(c,b)}},{key:"deleteKeyMappingFor",value:function(b){b=b.id();var c=this.keyForId.get(b);this.deleteIdForKey(c,b);this.keyForId["delete"](b)}},{key:"keyHasChangedFor",value:function(b){var c=b.id();c=this.keyForId.get(c);b=this.getKey(b);return c!==b}},{key:"isInvalid",value:function(b){return this.keyHasChangedFor(b)||this.doesEleInvalidateKey(b)}},{key:"getCachesAt",
value:function(b){var c=this.cachesByLvl,d=this.lvls,e=c.get(b);e||(e=new rc,c.set(b,e),d.push(b));return e}},{key:"getCache",value:function(b,c){return this.getCachesAt(c).get(b)}},{key:"get",value:function(b,c){var d=this.getKey(b);c=this.getCache(d,c);c!=null&&this.updateKeyMappingFor(b);return c}},{key:"getForCachedKey",value:function(b,c){b=this.keyForId.get(b.id());return this.getCache(b,c)}},{key:"hasCache",value:function(b,c){return this.getCachesAt(c).has(b)}},{key:"has",value:function(b,
c){b=this.getKey(b);return this.hasCache(b,c)}},{key:"setCache",value:function(b,c,d){d.key=b;this.getCachesAt(c).set(b,d)}},{key:"set",value:function(b,c,d){var e=this.getKey(b);this.setCache(e,c,d);this.updateKeyMappingFor(b)}},{key:"deleteCache",value:function(b,c){this.getCachesAt(c)["delete"](b)}},{key:"delete",value:function(b,c){b=this.getKey(b);this.deleteCache(b,c)}},{key:"invalidateKey",value:function(b){var c=this;this.lvls.forEach(function(d){return c.deleteCache(b,d)})}},{key:"invalidate",
value:function(b){var c=b.id();c=this.keyForId.get(c);this.deleteKeyMappingFor(b);(b=this.doesEleInvalidateKey(b))&&this.invalidateKey(c);return b||this.getNumberOfIdsForKey(c)===0}}])}(),sd={dequeue:"dequeue",downscale:"downscale",highQuality:"highQuality"},bn=Mb({getKey:null,doesEleInvalidateKey:ce,drawElement:null,getBoundingBox:null,getRotationPoint:null,getRotationOffset:null,isVisible:Yi,allowEdgeTxrCaching:!0,allowParentTxrCaching:!0}),Ad=function(a,b){this.renderer=a;this.onDequeues=[];a=
bn(b);Ra(this,a);this.lookup=new an(a.getKey,a.doesEleInvalidateKey);this.setupDequeueing()},Ib=Ad.prototype;Ib.reasons=sd;Ib.getTextureQueue=function(a){this.eleImgCaches=this.eleImgCaches||{};return this.eleImgCaches[a]=this.eleImgCaches[a]||[]};Ib.getRetiredTextureQueue=function(a){var b=this.eleImgCaches.retired=this.eleImgCaches.retired||{};return b[a]=b[a]||[]};Ib.getElementQueue=function(){return this.eleCacheQueue=this.eleCacheQueue||new Fd(function(a,b){return b.reqs-a.reqs})};Ib.getElementKeyToQueue=
function(){return this.eleKeyToCacheQueue=this.eleKeyToCacheQueue||{}};Ib.getElement=function(a,b,c,d,e){var f=this.renderer,g=f.cy.zoom(),h=this.lookup;if(!b||b.w===0||b.h===0||isNaN(b.w)||isNaN(b.h)||!a.visible()||a.removed()||!this.allowEdgeTxrCaching&&a.isEdge()||!this.allowParentTxrCaching&&a.isParent())return null;d==null&&(d=Math.ceil(Ye(g*c)));if(d<-4)d=-4;else if(g>=7.99||d>3)return null;g=Math.pow(2,d);var k=b.h*g,l=b.w*g;f=f.eleTextBiggerThanMin(a,g);if(!this.isVisible(a,f))return null;
var m=h.get(a,d);m&&m.invalidated&&(m.invalidated=!1,m.texture.invalidatedWidth-=m.width);if(m)return m;m=k<=25?25:k<=50?50:Math.ceil(k/50)*50;if(k>1024||l>1024)return null;var n=this.getTextureQueue(m),p=n[n.length-2];p||(p=n[n.length-1]);p||(p=this.recycleTexture(m,l)||this.addTexture(m,l));p.width-p.usedWidth<l&&(p=this.recycleTexture(m,l)||this.addTexture(m,l));n=e&&e===sd.dequeue;var q=e&&e===sd.highQuality;e=e&&e===sd.downscale;for(var t,u=d+1;u<=3;u++){var x=h.get(a,u);if(x){t=x;break}}var v=
t&&t.level===d+1?t:null;u=function(){p.context.drawImage(v.texture.canvas,v.x,0,v.width,v.height,p.usedWidth,0,l,k)};p.context.setTransform(1,0,0,1,0,0);p.context.clearRect(p.usedWidth,0,l,m);if(v&&v.scaledLabelShown===f)u();else if(t&&t.scaledLabelShown===f)if(q){for(var w=t.level;w>d;w--)v=this.getElement(a,b,c,w,sd.downscale);u()}else return this.queueElement(a,t.level-1),t;else{if(!n&&!q&&!e)for(c=d-1;c>=-4;c--)if(t=h.get(a,c)){w=t;break}if(w&&w.scaledLabelShown===f)return this.queueElement(a,
d),w;p.context.translate(p.usedWidth,0);p.context.scale(g,g);this.drawElement(p.context,a,b,f,!1);p.context.scale(1/g,1/g);p.context.translate(-p.usedWidth,0)}m={x:p.usedWidth,texture:p,level:d,scale:g,width:l,height:k,scaledLabelShown:f};p.usedWidth+=Math.ceil(l+8);p.eleCaches.push(m);h.set(a,d,m);this.checkTextureFullness(p);return m};Ib.invalidateElements=function(a){for(var b=0;b<a.length;b++)this.invalidateElement(a[b])};Ib.invalidateElement=function(a){var b=this.lookup,c=[];if(b.isInvalid(a)){for(var d=
-4;d<=3;d++){var e=b.getForCachedKey(a,d);e&&c.push(e)}if(b.invalidate(a))for(b=0;b<c.length;b++)d=c[b],e=d.texture,e.invalidatedWidth+=d.width,d.invalidated=!0,this.checkTextureUtility(e);this.removeFromQueue(a)}};Ib.checkTextureUtility=function(a){a.invalidatedWidth>=.2*a.width&&this.retireTexture(a)};Ib.checkTextureFullness=function(a){var b=this.getTextureQueue(a.height);a.usedWidth/a.width>.8&&a.fullnessChecks>=10?zc(b,a):a.fullnessChecks++};Ib.retireTexture=function(a){var b=a.height,c=this.getTextureQueue(b),
d=this.lookup;zc(c,a);a.retired=!0;c=a.eleCaches;for(var e=0;e<c.length;e++){var f=c[e];d.deleteCache(f.key,f.level)}We(c);this.getRetiredTextureQueue(b).push(a)};Ib.addTexture=function(a,b){var c={};this.getTextureQueue(a).push(c);c.eleCaches=[];c.height=a;c.width=Math.max(1024,b);c.usedWidth=0;c.invalidatedWidth=0;c.fullnessChecks=0;c.canvas=this.renderer.makeOffscreenCanvas(c.width,c.height);c.context=c.canvas.getContext("2d");return c};Ib.recycleTexture=function(a,b){var c=this.getTextureQueue(a);
a=this.getRetiredTextureQueue(a);for(var d=0;d<a.length;d++){var e=a[d];if(e.width>=b)return e.retired=!1,e.usedWidth=0,e.invalidatedWidth=0,e.fullnessChecks=0,We(e.eleCaches),e.context.setTransform(1,0,0,1,0,0),e.context.clearRect(0,0,e.width,e.height),zc(a,e),c.push(e),e}};Ib.queueElement=function(a,b){var c=this.getElementQueue(),d=this.getElementKeyToQueue(),e=this.getKey(a),f=d[e];f?(f.level=Math.max(f.level,b),f.eles.merge(a),f.reqs++,c.updateItem(f)):(a={eles:a.spawn().merge(a),level:b,reqs:1,
key:e},c.push(a),d[e]=a)};Ib.dequeue=function(a){for(var b=this.getElementQueue(),c=this.getElementKeyToQueue(),d=[],e=this.lookup,f=0;f<1;f++)if(b.size()>0){var g=b.pop(),h=g.key,k=g.eles[0],l=e.hasCache(k,g.level);c[h]=null;l||(d.push(g),h=this.getBoundingBox(k),this.getElement(k,h,a,g.level,sd.dequeue))}else break;return d};Ib.removeFromQueue=function(a){var b=this.getElementQueue(),c=this.getElementKeyToQueue(),d=this.getKey(a),e=c[d];e!=null&&(e.eles.length===1?(e.reqs=Ue,b.updateItem(e),b.pop(),
c[d]=null):e.eles.unmerge(a))};Ib.onDequeue=function(a){this.onDequeues.push(a)};Ib.offDequeue=function(a){zc(this.onDequeues,a)};Ib.setupDequeueing=uk.setupDequeueing({deqRedrawThreshold:100,deqCost:.15,deqAvgCost:.1,deqNoDrawCost:.9,deqFastCost:.9,deq:function(a,b,c){return a.dequeue(b,c)},onDeqd:function(a,b){for(var c=0;c<a.onDequeues.length;c++)(0,a.onDequeues[c])(b)},shouldRedraw:function(a,b,c,d){for(a=0;a<b.length;a++){c=b[a].eles;for(var e=0;e<c.length;e++){var f=c[e].boundingBox();if(Ze(f,
d))return!0}}return!1},priority:function(a){return a.renderer.beforeRenderPriorities.eleTxrDeq}});var Hi=function(a){var b=this;a=b.renderer=a;var c=a.cy;b.layersByLevel={};b.firstGet=!0;b.lastInvalidationTime=lc()-500;b.skipping=!1;b.eleTxrDeqs=c.collection();b.scheduleElementRefinement=Dd(function(){b.refineElementTextures(b.eleTxrDeqs);b.eleTxrDeqs.unmerge(b.eleTxrDeqs)},50);a.beforeRender(function(d,e){b.skipping=e-b.lastInvalidationTime<=250?!0:!1},a.beforeRenderPriorities.lyrTxrSkip);b.layersQueue=
new Fd(function(d,e){return e.reqs-d.reqs});b.setupDequeueing()},Ob=Hi.prototype,vk=0;Ob.makeLayer=function(a,b){var c=Math.pow(2,b),d=Math.ceil(a.w*c),e=Math.ceil(a.h*c),f=this.renderer.makeOffscreenCanvas(d,e);a={id:vk=++vk%9007199254740991,bb:a,level:b,width:d,height:e,canvas:f,context:f.getContext("2d"),eles:[],elesQueue:[],reqs:0};b=a.context;d=-a.bb.x1;e=-a.bb.y1;b.scale(c,c);b.translate(d,e);return a};Ob.getLayers=function(a,b,c){var d=this,e=d.renderer.cy.zoom(),f=d.firstGet;d.firstGet=!1;
if(c==null)if(c=Math.ceil(Ye(e*b)),c<-4)c=-4;else if(e>=3.99||c>2)return null;d.validateLayersElesOrdering(c,a);var g=d.layersByLevel,h=Math.pow(2,c),k=g[c]=g[c]||[],l,m;if(d.levelIsComplete(c,a))return k;(function(){var v=function(C){if(!m)for(var y=c+C;-4<=y&&y<=2;y+=C){var B=y;d.validateLayersElesOrdering(B,a);d.levelIsComplete(B,a)?(m=g[B],B=!0):B=void 0;if(B)break}};v(1);v(-1);for(v=k.length-1;v>=0;v--){var w=k[v];w.invalid&&zc(k,w)}})();e=function(v){v=v||{};var w=v.after;if(!l){l=Vb();for(var C=
0;C<a.length;C++)ej(l,a[C].boundingBox())}C=Math.ceil(l.w*h);var y=Math.ceil(l.h*h);if(C>32767||y>32767||C*y>16E6)return null;C=d.makeLayer(l,c);w!=null?(v=k.indexOf(w)+1,k.splice(v,0,C)):(v.insert===void 0||v.insert)&&k.unshift(C);return C};if(d.skipping&&!f)return null;var n=null,p=a.length/1;f=!f;for(var q=0;q<a.length;q++){var t=a[q],u=t._private.rscratch;u=u.imgLayerCaches=u.imgLayerCaches||{};var x=u[c];if(x)n=x;else{if(!n||n.eles.length>=p||!cm(n.bb,t.boundingBox()))if(n=e({insert:!0,after:n}),
!n)return null;m||f?d.queueLayer(n,t):d.drawEleInLayer(n,t,c,b);n.eles.push(t);u[c]=n}}return m?m:f?null:k};Ob.getEleLevelForLayerLevel=function(a,b){return a};Ob.drawEleInLayer=function(a,b,c,d){var e=this.renderer;a=a.context;var f=b.boundingBox();f.w!==0&&f.h!==0&&b.visible()&&(c=this.getEleLevelForLayerLevel(c,d),e.setImgSmoothing(a,!1),e.drawCachedElement(a,b,null,null,c,!0),e.setImgSmoothing(a,!0))};Ob.levelIsComplete=function(a,b){a=this.layersByLevel[a];if(!a||a.length===0)return!1;for(var c=
0,d=0;d<a.length;d++){var e=a[d];if(e.reqs>0||e.invalid)return!1;c+=e.eles.length}return c!==b.length?!1:!0};Ob.validateLayersElesOrdering=function(a,b){if(a=this.layersByLevel[a])for(var c=0;c<a.length;c++){for(var d=a[c],e=-1,f=0;f<b.length;f++)if(d.eles[0]===b[f]){e=f;break}if(e<0)this.invalidateLayer(d);else for(f=0;f<d.eles.length;f++)if(d.eles[f]!==b[e+f]){this.invalidateLayer(d);break}}};Ob.updateElementsInLayers=function(a,b){for(var c=Cd(a[0]),d=0;d<a.length;d++){var e=c?null:a[d],f=c?a[d]:
a[d].ele,g=f._private.rscratch;g=g.imgLayerCaches=g.imgLayerCaches||{};for(var h=-4;h<=2;h++){var k=g[h];k&&(e&&this.getEleLevelForLayerLevel(k.level)!==e.level||b(k,f,e))}}};Ob.haveLayers=function(){for(var a=!1,b=-4;b<=2;b++){var c=this.layersByLevel[b];if(c&&c.length>0){a=!0;break}}return a};Ob.invalidateElements=function(a){var b=this;a.length!==0&&(b.lastInvalidationTime=lc(),a.length!==0&&b.haveLayers()&&b.updateElementsInLayers(a,function(c,d,e){b.invalidateLayer(c)}))};Ob.invalidateLayer=
function(a){this.lastInvalidationTime=lc();if(!a.invalid){var b=a.level,c=a.eles;zc(this.layersByLevel[b],a);a.elesQueue=[];a.invalid=!0;a.replacement&&(a.replacement.invalid=!0);for(a=0;a<c.length;a++){var d=c[a]._private.rscratch.imgLayerCaches;d&&(d[b]=null)}}};Ob.refineElementTextures=function(a){var b=this;b.updateElementsInLayers(a,function(c,d,e){d=c.replacement;d||(d=c.replacement=b.makeLayer(c.bb,c.level),d.replaces=c,d.eles=c.eles);if(!d.reqs)for(c=0;c<d.eles.length;c++)b.queueLayer(d,d.eles[c])})};
Ob.enqueueElementRefinement=function(a){this.eleTxrDeqs.merge(a);this.scheduleElementRefinement()};Ob.queueLayer=function(a,b){var c=this.layersQueue,d=a.elesQueue,e=d.hasId=d.hasId||{};if(!a.replacement){if(b){if(e[b.id()])return;d.push(b);e[b.id()]=!0}a.reqs?(a.reqs++,c.updateItem(a)):(a.reqs=1,c.push(a))}};Ob.dequeue=function(a){for(var b=this.layersQueue,c=[],d=0;d<1&&b.size()!==0;){var e=b.peek();if(e.replacement)b.pop();else if(e.replaces&&e!==e.replaces.replacement)b.pop();else if(e.invalid)b.pop();
else{var f=e.elesQueue.shift();f&&(this.drawEleInLayer(e,f,e.level,a),d++);c.length===0&&c.push(!0);e.elesQueue.length===0&&(b.pop(),e.reqs=0,e.replaces&&this.applyLayerReplacement(e),this.requestRedraw())}}return c};Ob.applyLayerReplacement=function(a){var b=this.layersByLevel[a.level],c=a.replaces,d=b.indexOf(c);if(!(d<0||c.invalid)){b[d]=a;for(b=0;b<a.eles.length;b++)c=a.eles[b]._private,(c.imgLayerCaches=c.imgLayerCaches||{})[a.level]=a;this.requestRedraw()}};Ob.requestRedraw=Dd(function(){var a=
this.renderer;a.redrawHint("eles",!0);a.redrawHint("drag",!0);a.redraw()},100);Ob.setupDequeueing=uk.setupDequeueing({deqRedrawThreshold:50,deqCost:.15,deqAvgCost:.1,deqNoDrawCost:.9,deqFastCost:.9,deq:function(a,b){return a.dequeue(b)},onDeqd:Ve,shouldRedraw:Yi,priority:function(a){return a.renderer.beforeRenderPriorities.lyrTxrDeq}});var wk={},xk;wk.arrowShapeImpl=function(a){return(xk||(xk={polygon:dl,"triangle-backcurve":el,"triangle-tee":ti,"circle-triangle":fl,"triangle-cross":ti,circle:gl}))[a]};
var td={drawElement:function(a,b,c,d,e,f){b.isNode()?this.drawNode(a,b,c,d,e,f):this.drawEdge(a,b,c,d,e,f)},drawElementOverlay:function(a,b){b.isNode()?this.drawNodeOverlay(a,b):this.drawEdgeOverlay(a,b)},drawElementUnderlay:function(a,b){b.isNode()?this.drawNodeUnderlay(a,b):this.drawEdgeUnderlay(a,b)},drawCachedElementPortion:function(a,b,c,d,e,f,g,h){var k=c.getBoundingBox(b);if(k.w!==0&&k.h!==0)if(d=c.getElement(b,k,d,e,f),d!=null){if(h=h(this,b),h!==0){g=g(this,b);var l=k.x1;f=k.y1;e=k.w;k=k.h;
var m;if(g!==0){var n=c.getRotationPoint(b);var p=n.x;n=n.y;a.translate(p,n);a.rotate(g);(m=this.getImgSmoothing(a))||this.setImgSmoothing(a,!0);c=c.getRotationOffset(b);b=c.x;c=c.y}else b=l,c=f;if(h!==1){var q=a.globalAlpha;a.globalAlpha=q*h}a.drawImage(d.texture.canvas,d.x,0,d.width,d.height,b,c,e,k);h!==1&&(a.globalAlpha=q);g!==0&&(a.rotate(-g),a.translate(-p,-n),m||this.setImgSmoothing(a,!1))}}else c.drawElement(a,b)}},cn=function(){return 0},dn=function(a,b){return a.getTextAngle(b,null)},en=
function(a,b){return a.getTextAngle(b,"source")},fn=function(a,b){return a.getTextAngle(b,"target")},gn=function(a,b){return b.effectiveOpacity()},tf=function(a,b){return b.pstyle("text-opacity").pfValue*b.effectiveOpacity()};td.drawCachedElement=function(a,b,c,d,e,f){var g=this.data,h=g.eleTxrCache,k=g.lblTxrCache,l=g.slbTxrCache;g=g.tlbTxrCache;var m=b.boundingBox();f=f===!0?h.reasons.highQuality:null;m.w===0||m.h===0||!b.visible()||d&&!Ze(m,d)||(d=b.isEdge(),m=b.element()._private.rscratch.badLine,
this.drawElementUnderlay(a,b),this.drawCachedElementPortion(a,b,h,c,e,f,cn,gn),d&&m||this.drawCachedElementPortion(a,b,k,c,e,f,dn,tf),d&&!m&&(this.drawCachedElementPortion(a,b,l,c,e,f,en,tf),this.drawCachedElementPortion(a,b,g,c,e,f,fn,tf)),this.drawElementOverlay(a,b))};td.drawElements=function(a,b){for(var c=0;c<b.length;c++)this.drawElement(a,b[c])};td.drawCachedElements=function(a,b,c,d){for(var e=0;e<b.length;e++)this.drawCachedElement(a,b[e],c,d)};td.drawCachedNodes=function(a,b,c,d){for(var e=
0;e<b.length;e++){var f=b[e];f.isNode()&&this.drawCachedElement(a,f,c,d)}};td.drawLayeredElements=function(a,b,c,d){var e=this.data.lyrTxrCache.getLayers(b,c);if(e)for(b=0;b<e.length;b++)c=e[b],d=c.bb,d.w!==0&&d.h!==0&&a.drawImage(c.canvas,d.x1,d.y1,d.w,d.h);else this.drawCachedElements(a,b,c,d)};var Ic={drawEdge:function(a,b,c){var d=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,e=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,f=arguments.length>5&&arguments[5]!==void 0?arguments[5]:
!0,g=this,h=b._private.rscratch;if(!(f&&!b.visible()||h.badLine||h.allpts==null||isNaN(h.allpts[0]))){if(c){var k=c;a.translate(-k.x1,-k.y1)}var l=f?b.pstyle("opacity").value:1;f=f?b.pstyle("line-opacity").value:1;var m=b.pstyle("curve-style").value,n=b.pstyle("line-style").value,p=b.pstyle("width").pfValue,q=b.pstyle("line-cap").value,t=b.pstyle("line-outline-width").value,u=b.pstyle("line-outline-color").value,x=l*f,v=l*f;l=function(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:
x;m==="straight-triangle"?(g.eleStrokeStyle(a,b,B),g.drawEdgeTrianglePath(b,a,h.allpts)):(a.lineWidth=p,a.lineCap=q,g.eleStrokeStyle(a,b,B),g.drawEdgePath(b,a,h.allpts,n),a.lineCap="butt")};var w=function(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:x;a.lineWidth=p+t;a.lineCap=q;t>0?(g.colorStrokeStyle(a,u[0],u[1],u[2],B),m==="straight-triangle"?g.drawEdgeTrianglePath(b,a,h.allpts):(g.drawEdgePath(b,a,h.allpts,n),a.lineCap="butt")):a.lineCap="butt"};f=function(){g.drawArrowheads(a,
b,arguments.length>0&&arguments[0]!==void 0?arguments[0]:v)};a.lineJoin="round";if(b.pstyle("ghost").value==="yes"){w=b.pstyle("ghost-offset-x").pfValue;var C=b.pstyle("ghost-offset-y").pfValue,y=b.pstyle("ghost-opacity").value;y*=x;a.translate(w,C);l(y);f(y);a.translate(-w,-C)}else w();e&&g.drawEdgeUnderlay(a,b);l();f();e&&g.drawEdgeOverlay(a,b);g.drawElementText(a,b,null,d);c&&a.translate(k.x1,k.y1)}}},yk=function(a){if(!["overlay","underlay"].includes(a))throw Error("Invalid state");return function(b,
c){if(c.visible()){var d=c.pstyle("".concat(a,"-opacity")).value;if(d!==0){var e=this.usePaths(),f=c._private.rscratch,g=2*c.pstyle("".concat(a,"-padding")).pfValue,h=c.pstyle("".concat(a,"-color")).value;b.lineWidth=g;b.lineCap=f.edgeType!=="self"||e?"round":"butt";this.colorStrokeStyle(b,h[0],h[1],h[2],d);this.drawEdgePath(c,b,f.allpts,"solid")}}}};Ic.drawEdgeOverlay=yk("overlay");Ic.drawEdgeUnderlay=yk("underlay");Ic.drawEdgePath=function(a,b,c,d){var e=a._private.rscratch,f=b,g=!1,h=this.usePaths(),
k=a.pstyle("line-dash-pattern").pfValue;a=a.pstyle("line-dash-offset").pfValue;if(h){var l=c.join("$");if(e.pathCacheKey&&e.pathCacheKey===l){var m=b=e.pathCache;g=!0}else m=b=new Path2D,e.pathCacheKey=l,e.pathCache=m}if(f.setLineDash)switch(d){case "dotted":f.setLineDash([1,1]);break;case "dashed":f.setLineDash(k);f.lineDashOffset=a;break;case "solid":f.setLineDash([])}if(!g&&!e.badLine)switch(b.beginPath&&b.beginPath(),b.moveTo(c[0],c[1]),e.edgeType){case "bezier":case "self":case "compound":case "multibezier":for(var n=
2;n+3<c.length;n+=4)b.quadraticCurveTo(c[n],c[n+1],c[n+2],c[n+3]);break;case "straight":case "haystack":for(n=2;n+1<c.length;n+=2)b.lineTo(c[n],c[n+1]);break;case "segments":if(e.isRound){d=I(e.roundCorners);try{for(d.s();!(n=d.n()).done;)li(b,n.value)}catch(p){d.e(p)}finally{d.f()}b.lineTo(c[c.length-2],c[c.length-1])}else for(n=2;n+1<c.length;n+=2)b.lineTo(c[n],c[n+1])}b=f;h?b.stroke(m):b.stroke();b.setLineDash&&b.setLineDash([])};Ic.drawEdgeTrianglePath=function(a,b,c){b.fillStyle=b.strokeStyle;
a=a.pstyle("width").pfValue;for(var d=0;d+1<c.length;d+=2){var e=[c[d+2]-c[d],c[d+3]-c[d+1]],f=Math.sqrt(e[0]*e[0]+e[1]*e[1]);e=[e[1]/f,-e[0]/f];e=[e[0]*a/2,e[1]*a/2];b.beginPath();b.moveTo(c[d]-e[0],c[d+1]-e[1]);b.lineTo(c[d]+e[0],c[d+1]+e[1]);b.lineTo(c[d+2],c[d+3]);b.closePath();b.fill()}};Ic.drawArrowheads=function(a,b,c){var d=b._private.rscratch,e=d.edgeType==="haystack";e||this.drawArrowhead(a,b,"source",d.arrowStartX,d.arrowStartY,d.srcArrowAngle,c);this.drawArrowhead(a,b,"mid-target",d.midX,
d.midY,d.midtgtArrowAngle,c);this.drawArrowhead(a,b,"mid-source",d.midX,d.midY,d.midsrcArrowAngle,c);e||this.drawArrowhead(a,b,"target",d.arrowEndX,d.arrowEndY,d.tgtArrowAngle,c)};Ic.drawArrowhead=function(a,b,c,d,e,f,g){if(!(isNaN(d)||d==null||isNaN(e)||e==null||isNaN(f)||f==null)){var h=b.pstyle(c+"-arrow-shape").value;if(h!=="none"){var k=b.pstyle(c+"-arrow-fill").value==="hollow"?"both":"filled",l=b.pstyle(c+"-arrow-fill").value,m=b.pstyle("width").pfValue,n=b.pstyle(c+"-arrow-width"),p=n.value===
"match-line"?m:n.pfValue;n.units==="%"&&(p*=m);n=b.pstyle("opacity").value;g===void 0&&(g=n);n=a.globalCompositeOperation;if(g!==1||l==="hollow")a.globalCompositeOperation="destination-out",this.colorFillStyle(a,255,255,255,1),this.colorStrokeStyle(a,255,255,255,1),this.drawArrowShape(b,a,k,m,h,p,d,e,f),a.globalCompositeOperation=n;c=b.pstyle(c+"-arrow-color").value;this.colorFillStyle(a,c[0],c[1],c[2],g);this.colorStrokeStyle(a,c[0],c[1],c[2],g);this.drawArrowShape(b,a,l,m,h,p,d,e,f)}}};Ic.drawArrowShape=
function(a,b,c,d,e,f,g,h,k){var l=this.usePaths()&&e!=="triangle-cross",m=!1,n=b,p={x:g,y:h};a=a.pstyle("arrow-scale").value;a=this.getArrowWidth(d,a);var q=this.arrowShapes[e];if(l){var t=this.arrowPathCache=this.arrowPathCache||[];e=Jc(e);b=t[e];if(b!=null){var u=b;m=!0}else u=b=new Path2D,t[e]=u}m||(b.beginPath&&b.beginPath(),l?q.draw(b,1,0,{x:0,y:0},1):q.draw(b,a,k,p,d),b.closePath&&b.closePath());b=n;l&&(b.translate(g,h),b.rotate(k),b.scale(a,a));if(c==="filled"||c==="both")l?b.fill(u):b.fill();
if(c==="hollow"||c==="both")b.lineWidth=f/(l?a:1),b.lineJoin="miter",l?b.stroke(u):b.stroke();l&&(b.scale(1/a,1/a),b.rotate(-k),b.translate(-g,-h))};var Vc={drawNode:function(a,b,c){var d=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,e=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,f=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,g=this,h=b._private,k=h.rscratch,l=b.position();if(Ba(l.x)&&Ba(l.y)&&(!f||b.visible())){var m=f?b.effectiveOpacity():1,n=g.usePaths(),p=
!1;f=b.padding();var q=b.width()+2*f;var t=b.height()+2*f;if(c){var u=c;a.translate(-u.x1,-u.y1)}f=b.pstyle("background-image").value;for(var x=Array(f.length),v=Array(f.length),w=0,C=0;C<f.length;C++){var y=f[C];if(x[C]=y!=null&&y!=="none"){var B=b.cy().style().getIndexedStyle(b,"background-image-crossorigin","value",C);w++;v[C]=g.getCachedImage(y,B,function(){h.backgroundTimestamp=Date.now();b.emitAndNotify("background")})}}var M=b.pstyle("background-blacken").value,Q=b.pstyle("border-width").pfValue,
ja=b.pstyle("background-opacity").value*m,da=b.pstyle("border-color").value,Da=b.pstyle("border-style").value,pa=b.pstyle("border-join").value,ra=b.pstyle("border-cap").value,Z=b.pstyle("border-position").value,fa=b.pstyle("border-dash-pattern").pfValue,sa=b.pstyle("border-dash-offset").pfValue,Ea=b.pstyle("border-opacity").value*m,ya=b.pstyle("outline-width").pfValue,aa=b.pstyle("outline-color").value,na=b.pstyle("outline-style").value,Ga=b.pstyle("outline-opacity").value*m,Ha=b.pstyle("outline-offset").value,
Ma=b.pstyle("corner-radius").value;Ma!=="auto"&&(Ma=b.pstyle("corner-radius").pfValue);f=function(){g.eleFillStyle(a,b,arguments.length>0&&arguments[0]!==void 0?arguments[0]:ja)};C=function(){g.colorStrokeStyle(a,da[0],da[1],da[2],arguments.length>0&&arguments[0]!==void 0?arguments[0]:Ea)};y=function(){g.colorStrokeStyle(a,aa[0],aa[1],aa[2],arguments.length>0&&arguments[0]!==void 0?arguments[0]:Ga)};var cb=function(Ua,z,K,R){var ba=g.nodePathCache=g.nodePathCache||[];Ua=Wi(K==="polygon"?K+","+R.join(","):
K,""+z,""+Ua,""+Ma);K=ba[Ua];z=!1;K!=null?(z=!0,k.pathCache=K):(K=new Path2D,ba[Ua]=k.pathCache=K);return{path:K,cacheHit:z}};B=b.pstyle("shape").strValue;var sb=b.pstyle("shape-polygon-points").pfValue;if(n){a.translate(l.x,l.y);B=cb(q,t,B,sb);var Na=B.path;p=B.cacheHit}B=function(){if(!p){var Ua=l;n&&(Ua={x:0,y:0});g.nodeShapes[g.getNodeShape(b)].draw(Na||a,Ua.x,Ua.y,q,t,Ma,k)}n?a.fill(Na):a.fill()};sb=function(){for(var Ua=arguments.length>0&&arguments[0]!==void 0?arguments[0]:m,z=arguments.length>
1&&arguments[1]!==void 0?arguments[1]:!0,K=h.backgrounding,R=0,ba=0;ba<v.length;ba++){var S=b.cy().style().getIndexedStyle(b,"background-image-containment","value",ba);z&&S==="over"||!z&&S==="inside"?R++:x[ba]&&v[ba].complete&&!v[ba].error&&(R++,g.drawInscribedImage(a,v[ba],b,ba,Ua))}h.backgrounding=R!==w;K!==h.backgrounding&&b.updateStyle(!1)};var bb=function(){var Ua=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:m;g.hasPie(b)&&
(g.drawPie(a,b,z),Ua&&(n||g.nodeShapes[g.getNodeShape(b)].draw(a,l.x,l.y,q,t,Ma,k)))},Ya=function(){var Ua=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:m;g.hasStripe(b)&&(a.save(),n?a.clip(k.pathCache):(g.nodeShapes[g.getNodeShape(b)].draw(a,l.x,l.y,q,t,Ma,k),a.clip()),g.drawStripe(a,b,z),a.restore(),Ua&&(n||g.nodeShapes[g.getNodeShape(b)].draw(a,l.x,l.y,q,t,Ma,k)))},vb=function(){var Ua=(M>0?M:-M)*(arguments.length>0&&arguments[0]!==
void 0?arguments[0]:m),z=M>0?0:255;M!==0&&(g.colorFillStyle(a,z,z,z,Ua),n?a.fill(Na):a.fill())},Ub=function(){if(Q>0){a.lineWidth=Q;a.lineCap=ra;a.lineJoin=pa;if(a.setLineDash)switch(Da){case "dotted":a.setLineDash([1,1]);break;case "dashed":a.setLineDash(fa);a.lineDashOffset=sa;break;case "solid":case "double":a.setLineDash([])}if(Z!=="center"){a.save();a.lineWidth*=2;if(Z==="inside")n?a.clip(Na):a.clip();else{var Ua=new Path2D;Ua.rect(-q/2-Q,-t/2-Q,q+2*Q,t+2*Q);Ua.addPath(Na);a.clip(Ua,"evenodd")}n?
a.stroke(Na):a.stroke();a.restore()}else n?a.stroke(Na):a.stroke();Da==="double"&&(a.lineWidth=Q/3,Ua=a.globalCompositeOperation,a.globalCompositeOperation="destination-out",n?a.stroke(Na):a.stroke(),a.globalCompositeOperation=Ua);a.setLineDash&&a.setLineDash([])}},Zb=function(){if(ya>0){a.lineWidth=ya;a.lineCap="butt";if(a.setLineDash)switch(na){case "dotted":a.setLineDash([1,1]);break;case "dashed":a.setLineDash([4,2]);break;case "solid":case "double":a.setLineDash([])}var Ua=l;n&&(Ua={x:0,y:0});
var z=g.getNodeShape(b),K=Q;Z==="inside"&&(K=0);Z==="outside"&&(K*=2);var R=(q+K+(ya+Ha))/q,ba=(t+K+(ya+Ha))/t,S=q*R,oa=t*ba,wa=g.nodeShapes[z].points;if(n)var ia=cb(S,oa,z,wa).path;if(z==="ellipse")g.drawEllipsePath(ia||a,Ua.x,Ua.y,S,oa);else if("round-diamond round-heptagon round-hexagon round-octagon round-pentagon round-polygon round-triangle round-tag".split(" ").includes(z)){var Ia=0,Ta=0,$a=0;z==="round-diamond"?Ia=(K+Ha+ya)*1.4:z==="round-heptagon"?(Ia=(K+Ha+ya)*1.075,$a=-(K/2+Ha+ya)/35):
z==="round-hexagon"?Ia=(K+Ha+ya)*1.12:z==="round-pentagon"?(Ia=(K+Ha+ya)*1.13,$a=-(K/2+Ha+ya)/15):z==="round-tag"?(Ia=(K+Ha+ya)*1.12,Ta=(K/2+ya+Ha)*.07):z==="round-triangle"&&(Ia=Math.PI/2*(K+Ha+ya),$a=-(K+Ha/2+ya)/Math.PI);Ia!==0&&(R=(q+Ia)/q,S=q*R,["round-hexagon","round-tag"].includes(z)||(ba=(t+Ia)/t,oa=t*ba));Ma=Ma==="auto"?Math.min(S/10,oa/10,8):Ma;Ia=S/2;var lb=oa/2;oa=Ma+(K+ya+Ha)/2;z=Array(wa.length/2);S=Array(wa.length/2);for(var jb=0;jb<wa.length/2;jb++)z[jb]={x:Ua.x+Ta+Ia*wa[jb*2],y:Ua.y+
$a+lb*wa[jb*2+1]};var ob=z.length;lb=z[ob-1];for(Ia=0;Ia<ob;Ia++){jb=z[Ia%ob];var wb=z[(Ia+1)%ob];S[Ia]=Ie(lb,jb,wb,oa);lb=jb}g.drawRoundPolygonPath(ia||a,Ua.x+Ta,Ua.y+$a,q*R,t*ba,wa,S)}else["roundrectangle","round-rectangle"].includes(z)?(Ma=Ma==="auto"?Ac(S,oa):Ma,g.drawRoundRectanglePath(ia||a,Ua.x,Ua.y,S,oa,Ma+(K+ya+Ha)/2)):["cutrectangle","cut-rectangle"].includes(z)?(Ma=Ma==="auto"?8:Ma,g.drawCutRectanglePath(ia||a,Ua.x,Ua.y,S,oa,null,Ma+(K+ya+Ha)/4)):["bottomroundrectangle","bottom-round-rectangle"].includes(z)?
(Ma=Ma==="auto"?Ac(S,oa):Ma,g.drawBottomRoundRectanglePath(ia||a,Ua.x,Ua.y,S,oa,Ma+(K+ya+Ha)/2)):z==="barrel"?g.drawBarrelPath(ia||a,Ua.x,Ua.y,S,oa):(wa=z.startsWith("polygon")||["rhomboid","right-rhomboid","round-tag","tag","vee"].includes(z)?je(ie(wa,(K+ya+Ha)/q)):je(ie(wa,-((K+ya+Ha)/q))),g.drawPolygonPath(ia||a,Ua.x,Ua.y,q,t,wa));n?a.stroke(ia):a.stroke();na==="double"&&(a.lineWidth=K/3,Ua=a.globalCompositeOperation,a.globalCompositeOperation="destination-out",n?a.stroke(ia):a.stroke(),a.globalCompositeOperation=
Ua);a.setLineDash&&a.setLineDash([])}};if(b.pstyle("ghost").value==="yes"){var gc=b.pstyle("ghost-offset-x").pfValue,Uc=b.pstyle("ghost-offset-y").pfValue,Nd=b.pstyle("ghost-opacity").value,Hc=Nd*m;a.translate(gc,Uc);y();Zb();f(Nd*ja);B();sb(Hc,!0);C(Nd*Ea);Ub();bb(M!==0||Q!==0);Ya(M!==0||Q!==0);sb(Hc,!1);vb(Hc);a.translate(-gc,-Uc)}n&&a.translate(-l.x,-l.y);e&&g.drawNodeUnderlay(a,b,l,q,t);n&&a.translate(l.x,l.y);y();Zb();f();B();sb(m,!0);C();Ub();bb(M!==0||Q!==0);Ya(M!==0||Q!==0);sb(m,!1);vb();
n&&a.translate(-l.x,-l.y);g.drawElementText(a,b,null,d);e&&g.drawNodeOverlay(a,b,l,q,t);c&&a.translate(u.x1,u.y1)}}},zk=function(a){if(!["overlay","underlay"].includes(a))throw Error("Invalid state");return function(b,c,d,e,f){if(c.visible()){var g=c.pstyle("".concat(a,"-padding")).pfValue,h=c.pstyle("".concat(a,"-opacity")).value,k=c.pstyle("".concat(a,"-color")).value,l=c.pstyle("".concat(a,"-shape")).value,m=c.pstyle("".concat(a,"-corner-radius")).value;if(h>0){d=d||c.position();if(e==null||f==
null)f=c.padding(),e=c.width()+2*f,f=c.height()+2*f;this.colorFillStyle(b,k[0],k[1],k[2],h);this.nodeShapes[l].draw(b,d.x,d.y,e+g*2,f+g*2,m);b.fill()}}}};Vc.drawNodeOverlay=zk("overlay");Vc.drawNodeUnderlay=zk("underlay");Vc.hasPie=function(a){a=a[0];return a._private.hasPie};Vc.hasStripe=function(a){a=a[0];return a._private.hasStripe};Vc.drawPie=function(a,b,c,d){b=b[0];d=d||b.position();var e=b.cy().style(),f=b.pstyle("pie-size"),g=b.pstyle("pie-hole"),h=b.pstyle("pie-start-angle").pfValue,k=d.x;
d=d.y;var l=b.width(),m=b.height();l=Math.min(l,m)/2;var n;m=0;this.usePaths()&&(d=k=0);f.units==="%"?l*=f.pfValue:f.pfValue!==void 0&&(l=f.pfValue/2);g.units==="%"?n=l*g.pfValue:g.pfValue!==void 0&&(n=g.pfValue/2);if(!(n>=l))for(f=1;f<=e.pieBackgroundN;f++){g=b.pstyle("pie-"+f+"-background-size").value;var p=b.pstyle("pie-"+f+"-background-color").value,q=b.pstyle("pie-"+f+"-background-opacity").value*c,t=g/100;t+m>1&&(t=1-m);var u=1.5*Math.PI+2*Math.PI*m;u+=h;var x=u+2*Math.PI*t;g===0||m>=1||m+t>
1||(n===0?(a.beginPath(),a.moveTo(k,d),a.arc(k,d,l,u,x)):(a.beginPath(),a.arc(k,d,l,u,x),a.arc(k,d,n,x,u,!0)),a.closePath(),this.colorFillStyle(a,p[0],p[1],p[2],q),a.fill(),m+=t)}};Vc.drawStripe=function(a,b,c,d){b=b[0];d=d||b.position();var e=b.cy().style(),f=d.x;d=d.y;var g=b.width(),h=b.height(),k=0,l=this.usePaths();a.save();var m=b.pstyle("stripe-direction").value,n=b.pstyle("stripe-size");switch(m){case "righward":a.rotate(-Math.PI/2)}n.units==="%"?(g*=n.pfValue,h*=n.pfValue):n.pfValue!==void 0&&
(h=g=n.pfValue);l&&(d=f=0);d-=g/2;f-=h/2;for(l=1;l<=e.stripeBackgroundN;l++){n=b.pstyle("stripe-"+l+"-background-size").value;m=b.pstyle("stripe-"+l+"-background-color").value;var p=b.pstyle("stripe-"+l+"-background-opacity").value*c,q=n/100;q+k>1&&(q=1-k);n===0||k>=1||k+q>1||(a.beginPath(),a.rect(f,d+h*k,g,h*q),a.closePath(),this.colorFillStyle(a,m[0],m[1],m[2],p),a.fill(),k+=q)}a.restore()};var Ak={getPixelRatio:function(){var a=this.data.contexts[0];return this.forcedPixelRatio!=null?this.forcedPixelRatio:
(this.cy.window().devicePixelRatio||1)/(a.backingStorePixelRatio||a.webkitBackingStorePixelRatio||a.mozBackingStorePixelRatio||a.msBackingStorePixelRatio||a.oBackingStorePixelRatio||a.backingStorePixelRatio||1)},paintCache:function(a){for(var b=this.paintCaches=this.paintCaches||[],c=!0,d,e=0;e<b.length;e++)if(d=b[e],d.context===a){c=!1;break}c&&(d={context:a},b.push(d));return d},createGradientStyleFor:function(a,b,c,d,e){var f=this.usePaths(),g=c.pstyle(b+"-gradient-stop-colors").value;b=c.pstyle(b+
"-gradient-stop-positions").pfValue;if(d==="radial-gradient")if(c.isEdge()){d=c.sourceEndpoint();var h=c.targetEndpoint();c=c.midpoint();d=Pc(d,c);h=Pc(h,c);h=a.createRadialGradient(c.x,c.y,0,c.x,c.y,Math.max(d,h))}else h=f?{x:0,y:0}:c.position(),d=c.paddedWidth(),c=c.paddedHeight(),h=a.createRadialGradient(h.x,h.y,0,h.x,h.y,Math.max(d,c));else if(c.isEdge())h=c.sourceEndpoint(),c=c.targetEndpoint(),h=a.createLinearGradient(h.x,h.y,c.x,c.y);else{d=f?{x:0,y:0}:c.position();var k=c.paddedWidth();f=
c.paddedHeight();k/=2;f/=2;switch(c.pstyle("background-gradient-direction").value){case "to-bottom":h=a.createLinearGradient(d.x,d.y-f,d.x,d.y+f);break;case "to-top":h=a.createLinearGradient(d.x,d.y+f,d.x,d.y-f);break;case "to-left":h=a.createLinearGradient(d.x+k,d.y,d.x-k,d.y);break;case "to-right":h=a.createLinearGradient(d.x-k,d.y,d.x+k,d.y);break;case "to-bottom-right":case "to-right-bottom":h=a.createLinearGradient(d.x-k,d.y-f,d.x+k,d.y+f);break;case "to-top-right":case "to-right-top":h=a.createLinearGradient(d.x-
k,d.y+f,d.x+k,d.y-f);break;case "to-bottom-left":case "to-left-bottom":h=a.createLinearGradient(d.x+k,d.y-f,d.x-k,d.y+f);break;case "to-top-left":case "to-left-top":h=a.createLinearGradient(d.x+k,d.y+f,d.x-k,d.y-f)}}if(!h)return null;a=b.length===g.length;c=g.length;for(d=0;d<c;d++)h.addColorStop(a?b[d]:d/(c-1),"rgba("+g[d][0]+","+g[d][1]+","+g[d][2]+","+e+")");return h},gradientFillStyle:function(a,b,c,d){b=this.createGradientStyleFor(a,"background",b,c,d);if(!b)return null;a.fillStyle=b},colorFillStyle:function(a,
b,c,d,e){a.fillStyle="rgba("+b+","+c+","+d+","+e+")"},eleFillStyle:function(a,b,c){var d=b.pstyle("background-fill").value;d==="linear-gradient"||d==="radial-gradient"?this.gradientFillStyle(a,b,d,c):(b=b.pstyle("background-color").value,this.colorFillStyle(a,b[0],b[1],b[2],c))},gradientStrokeStyle:function(a,b,c,d){b=this.createGradientStyleFor(a,"line",b,c,d);if(!b)return null;a.strokeStyle=b},colorStrokeStyle:function(a,b,c,d,e){a.strokeStyle="rgba("+b+","+c+","+d+","+e+")"},eleStrokeStyle:function(a,
b,c){var d=b.pstyle("line-fill").value;d==="linear-gradient"||d==="radial-gradient"?this.gradientStrokeStyle(a,b,d,c):(b=b.pstyle("line-color").value,this.colorStrokeStyle(a,b[0],b[1],b[2],c))},matchCanvasSize:function(a){var b=this.data,c=this.findContainerClientCoords(),d=c[2];c=c[3];var e=this.getPixelRatio(),f=this.motionBlurPxRatio;if(a===this.data.bufferCanvases[this.MOTIONBLUR_BUFFER_NODE]||a===this.data.bufferCanvases[this.MOTIONBLUR_BUFFER_DRAG])e=f;a=d*e;f=c*e;if(a!==this.canvasWidth||f!==
this.canvasHeight){this.fontCaches=null;var g=b.canvasContainer;g.style.width=d+"px";g.style.height=c+"px";for(var h=0;h<this.CANVAS_LAYERS;h++)g=b.canvases[h],g.width=a,g.height=f,g.style.width=d+"px",g.style.height=c+"px";for(h=0;h<this.BUFFER_COUNT;h++)g=b.bufferCanvases[h],g.width=a,g.height=f,g.style.width=d+"px",g.style.height=c+"px";this.textureMult=1;e<=1&&(g=b.bufferCanvases[this.TEXTURE_BUFFER],this.textureMult=2,g.width=a*this.textureMult,g.height=f*this.textureMult);this.canvasWidth=a;
this.canvasHeight=f;this.pixelRatio=e}},renderTo:function(a,b,c,d){this.render({forcedContext:a,forcedZoom:b,forcedPan:c,drawAllLayers:!0,forcedPxRatio:d})},clearCanvas:function(){var a=this.data;a.contexts[this.NODE].clearRect(0,0,this.canvasWidth,this.canvasHeight);a.contexts[this.DRAG].clearRect(0,0,this.canvasWidth,this.canvasHeight)},render:function(a){function b(ra,Z,fa,sa,Ea){var ya=ra.globalCompositeOperation;ra.globalCompositeOperation="destination-out";d.colorFillStyle(ra,255,255,255,d.motionBlurTransparency);
ra.fillRect(Z,fa,sa,Ea);ra.globalCompositeOperation=ya}function c(ra,Z){if(d.clearingMotionBlur||ra!==n.bufferContexts[d.MOTIONBLUR_BUFFER_NODE]&&ra!==n.bufferContexts[d.MOTIONBLUR_BUFFER_DRAG]){var fa=ja;var sa=M;var Ea=d.canvasWidth;var ya=d.canvasHeight}else fa={x:Q.x*u,y:Q.y*u},sa=B*u,Ea=d.canvasWidth*u,ya=d.canvasHeight*u;ra.setTransform(1,0,0,1,0,0);Z==="motionBlur"?b(ra,0,0,Ea,ya):f||Z!==void 0&&!Z||ra.clearRect(0,0,Ea,ya);g||(ra.translate(fa.x,fa.y),ra.scale(sa,sa));l&&ra.translate(l.x,l.y);
k&&ra.scale(k,k)}var d=this;a=a||bj;var e=d.cy,f=a.forcedContext,g=a.drawAllLayers,h=a.drawOnlyNodeLayer,k=a.forcedZoom,l=a.forcedPan,m=a.forcedPxRatio===void 0?this.getPixelRatio():a.forcedPxRatio,n=d.data,p=n.canvasNeedsRedraw,q=d.textureOnViewport&&!f&&(d.pinching||d.hoverData.dragging||d.swipePanning||d.data.wheelZooming),t=a.motionBlur!==void 0?a.motionBlur:d.motionBlur,u=d.motionBlurPxRatio,x=e.hasCompoundNodes(),v=d.hoverData.draggingEles,w=d.hoverData.selecting||d.touchData.selecting?!0:!1,
C=t=t&&!f&&d.motionBlurEnabled&&!w;f||(d.prevPxRatio!==m&&(d.invalidateContainerClientCoordsCache(),d.matchCanvasSize(d.container),d.redrawHint("eles",!0),d.redrawHint("drag",!0)),d.prevPxRatio=m);!f&&d.motionBlurTimeout&&clearTimeout(d.motionBlurTimeout);t&&(d.mbFrames==null&&(d.mbFrames=0),d.mbFrames++,d.mbFrames<3&&(C=!1),d.mbFrames>d.minMbLowQualFrames&&(d.motionBlurPxRatio=d.mbPxRBlurry));d.clearingMotionBlur&&(d.motionBlurPxRatio=1);d.textureDrawLastFrame&&!q&&(p[d.NODE]=!0,p[d.SELECT_BOX]=
!0);var y=e.style(),B=e.zoom(),M=k!==void 0?k:B,Q=e.pan(),ja={x:Q.x,y:Q.y};w={zoom:B,pan:{x:Q.x,y:Q.y}};var da=d.prevViewport;da===void 0||w.zoom!==da.zoom||w.pan.x!==da.pan.x||w.pan.y!==da.pan.y||v&&!x||(d.motionBlurPxRatio=1);l&&(ja=l);M*=m;ja.x*=m;ja.y*=m;x=d.getCachedZSortedEles();q||(d.textureDrawLastFrame=!1);if(q){d.textureDrawLastFrame=!0;d.textureCache||(d.textureCache={},d.textureCache.bb=e.mutableElements().boundingBox(),d.textureCache.texture=d.data.bufferCanvases[d.TEXTURE_BUFFER],w=
d.data.bufferContexts[d.TEXTURE_BUFFER],w.setTransform(1,0,0,1,0,0),w.clearRect(0,0,d.canvasWidth*d.textureMult,d.canvasHeight*d.textureMult),d.render({forcedContext:w,drawOnlyNodeLayer:!0,forcedPxRatio:m*d.textureMult}),w=d.textureCache.viewport={zoom:e.zoom(),pan:e.pan(),width:d.canvasWidth,height:d.canvasHeight},w.mpan={x:(0-w.pan.x)/w.zoom,y:(0-w.pan.y)/w.zoom});p[d.DRAG]=!1;p[d.NODE]=!1;v=n.contexts[d.NODE];da=d.textureCache.texture;w=d.textureCache.viewport;v.setTransform(1,0,0,1,0,0);t?b(v,
0,0,w.width,w.height):v.clearRect(0,0,w.width,w.height);var Da=y.core("outside-texture-bg-color").value;y=y.core("outside-texture-bg-opacity").value;d.colorFillStyle(v,Da[0],Da[1],Da[2],y);v.fillRect(0,0,w.width,w.height);B=e.zoom();c(v,!1);v.clearRect(w.mpan.x,w.mpan.y,w.width/w.zoom/m,w.height/w.zoom/m);v.drawImage(da,w.mpan.x,w.mpan.y,w.width/w.zoom/m,w.height/w.zoom/m)}else d.textureOnViewport&&!f&&(d.textureCache=null);da=e.extent();y=d.pinching||d.hoverData.dragging||d.swipePanning||d.data.wheelZooming||
d.hoverData.draggingEles||d.cy.animated();Da=d.hideEdgesOnViewport&&y;y=[];y[d.NODE]=!p[d.NODE]&&t&&!d.clearedForMotionBlur[d.NODE]||d.clearingMotionBlur;y[d.NODE]&&(d.clearedForMotionBlur[d.NODE]=!0);y[d.DRAG]=!p[d.DRAG]&&t&&!d.clearedForMotionBlur[d.DRAG]||d.clearingMotionBlur;y[d.DRAG]&&(d.clearedForMotionBlur[d.DRAG]=!0);if(p[d.NODE]||g||h||y[d.NODE]){var pa=t&&!y[d.NODE]&&u!==1;v=f||(pa?d.data.bufferContexts[d.MOTIONBLUR_BUFFER_NODE]:n.contexts[d.NODE]);c(v,t&&!pa?"motionBlur":void 0);Da?d.drawCachedNodes(v,
x.nondrag,m,da):d.drawLayeredElements(v,x.nondrag,m,da);d.debug&&d.drawDebugPoints(v,x.nondrag);g||t||(p[d.NODE]=!1)}!h&&(p[d.DRAG]||g||y[d.DRAG])&&(pa=t&&!y[d.DRAG]&&u!==1,v=f||(pa?d.data.bufferContexts[d.MOTIONBLUR_BUFFER_DRAG]:n.contexts[d.DRAG]),c(v,t&&!pa?"motionBlur":void 0),Da?d.drawCachedNodes(v,x.drag,m,da):d.drawCachedElements(v,x.drag,m,da),d.debug&&d.drawDebugPoints(v,x.drag),g||t||(p[d.DRAG]=!1));this.drawSelectionRectangle(a,c);if(t&&u!==1){a=n.contexts[d.NODE];h=d.data.bufferCanvases[d.MOTIONBLUR_BUFFER_NODE];
m=n.contexts[d.DRAG];x=d.data.bufferCanvases[d.MOTIONBLUR_BUFFER_DRAG];v=function(ra,Z,fa){ra.setTransform(1,0,0,1,0,0);fa||!C?ra.clearRect(0,0,d.canvasWidth,d.canvasHeight):b(ra,0,0,d.canvasWidth,d.canvasHeight);fa=u;ra.drawImage(Z,0,0,d.canvasWidth*fa,d.canvasHeight*fa,0,0,d.canvasWidth,d.canvasHeight)};if(p[d.NODE]||y[d.NODE])v(a,h,y[d.NODE]),p[d.NODE]=!1;if(p[d.DRAG]||y[d.DRAG])v(m,x,y[d.DRAG]),p[d.DRAG]=!1}d.prevViewport=w;d.clearingMotionBlur&&(d.clearingMotionBlur=!1,d.motionBlurCleared=!0,
d.motionBlur=!0);t&&(d.motionBlurTimeout=setTimeout(function(){d.motionBlurTimeout=null;d.clearedForMotionBlur[d.NODE]=!1;d.clearedForMotionBlur[d.DRAG]=!1;d.motionBlur=!1;d.clearingMotionBlur=!q;d.mbFrames=0;p[d.NODE]=!0;p[d.DRAG]=!0;d.redraw()},100));f||e.emit("render")}},Od;Ak.drawSelectionRectangle=function(a,b){var c=this.data,d=this.cy.style(),e=a.drawOnlyNodeLayer,f=a.drawAllLayers,g=c.canvasNeedsRedraw;a=a.forcedContext;if(this.showFps||!e&&g[this.SELECT_BOX]&&!f)e=a||c.contexts[this.SELECT_BOX],
b(e),this.selection[4]==1&&(this.hoverData.selecting||this.touchData.selecting)&&(b=this.cy.zoom(),b=d.core("selection-box-border-width").value/b,e.lineWidth=b,e.fillStyle="rgba("+d.core("selection-box-color").value[0]+","+d.core("selection-box-color").value[1]+","+d.core("selection-box-color").value[2]+","+d.core("selection-box-opacity").value+")",e.fillRect(this.selection[0],this.selection[1],this.selection[2]-this.selection[0],this.selection[3]-this.selection[1]),b>0&&(e.strokeStyle="rgba("+d.core("selection-box-border-color").value[0]+
","+d.core("selection-box-border-color").value[1]+","+d.core("selection-box-border-color").value[2]+","+d.core("selection-box-opacity").value+")",e.strokeRect(this.selection[0],this.selection[1],this.selection[2]-this.selection[0],this.selection[3]-this.selection[1]))),c.bgActivePosistion&&!this.hoverData.selecting&&(b=this.cy.zoom(),c=c.bgActivePosistion,e.fillStyle="rgba("+d.core("active-bg-color").value[0]+","+d.core("active-bg-color").value[1]+","+d.core("active-bg-color").value[2]+","+d.core("active-bg-opacity").value+
")",e.beginPath(),e.arc(c.x,c.y,d.core("active-bg-size").pfValue/b,0,2*Math.PI),e.fill()),c=this.lastRedrawTime,this.showFps&&c&&(c=Math.round(c),d=Math.round(1E3/c),c="1 frame \x3d "+c+" ms \x3d "+d+" fps",e.setTransform(1,0,0,1,0,0),e.fillStyle="rgba(255, 0, 0, 0.75)",e.strokeStyle="rgba(255, 0, 0, 0.75)",e.font="30px Arial",Od||(Od=e.measureText(c).actualBoundingBoxAscent),e.fillText(c,0,Od),e.strokeRect(0,Od+10,250,20),e.fillRect(0,Od+10,250*Math.min(d/60,1),20)),f||(g[this.SELECT_BOX]=!1)};var xi=
typeof Float32Array!=="undefined"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var a=0,b=arguments.length;b--;)a+=arguments[b]*arguments[b];return Math.sqrt(a)});for(var hn=function(){function a(b,c,d,e){N(this,a);this.debugID=Math.floor(Math.random()*1E4);this.r=b;this.texSize=c;this.texRows=d;this.texHeight=Math.floor(c/d);this.enableWrapping=!0;this.locked=!1;this.texture=null;this.needsBuffer=!0;this.freePointer={x:0,row:0};this.keyToLocation=new Map;this.canvas=e(b,c,c);this.scratch=
e(b,c,this.texHeight,"scratch")}return L(a,[{key:"lock",value:function(){this.locked=!0}},{key:"getKeys",value:function(){return new Set(this.keyToLocation.keys())}},{key:"getScale",value:function(b){var c=b.w;b=b.h;var d=this.texSize,e=this.texHeight/b,f=c*e,g=b*e;f>d&&(e=d/c,f=c*e,g=b*e);return{scale:e,texW:f,texH:g}}},{key:"draw",value:function(b,c,d){var e=this;if(this.locked)throw Error("can't draw, atlas is locked");var f=this.texSize,g=this.texRows,h=this.texHeight,k=this.getScale(c),l=k.scale,
m=k.texW,n=k.texH,p=function(u,x){if(d&&x){x=x.context;var v=u.x;u=h*u.row;x.save();x.translate(v,u);x.scale(l,l);d(x,c);x.restore()}},q=[null,null];k=function(){p(e.freePointer,e.canvas);q[0]={x:e.freePointer.x,y:e.freePointer.row*h,w:m,h:n};q[1]={x:e.freePointer.x+m,y:e.freePointer.row*h,w:0,h:n};e.freePointer.x+=m;e.freePointer.x==f&&(e.freePointer.x=0,e.freePointer.row++)};var t=function(){var u=e.scratch,x=e.canvas;u.clear();p({x:0,row:0},u);var v=f-e.freePointer.x,w=m-v,C=e.freePointer.x,y=
e.freePointer.row*h;x.context.drawImage(u,0,0,v,h,C,y,v,h);q[0]={x:C,y,w:v,h:n};C=(e.freePointer.row+1)*h;x&&x.context.drawImage(u,v,0,w,h,0,C,w,h);q[1]={x:0,y:C,w,h:n};e.freePointer.x=w;e.freePointer.row++};if(this.freePointer.x+m<=f)k();else{if(this.freePointer.row>=g-1)return!1;this.freePointer.x===f?(e.freePointer.x=0,e.freePointer.row++,k()):this.enableWrapping?t():(e.freePointer.x=0,e.freePointer.row++,k())}this.keyToLocation.set(b,q);this.needsBuffer=!0;return q}},{key:"getOffsets",value:function(b){return this.keyToLocation.get(b)}},
{key:"isEmpty",value:function(){return this.freePointer.x===0&&this.freePointer.row===0}},{key:"canFit",value:function(b){if(this.locked)return!1;var c=this.texSize,d=this.texRows;b=this.getScale(b).texW;return this.freePointer.x+b>c?this.freePointer.row<d-1:!0}},{key:"bufferIfNeeded",value:function(b){this.texture||(this.texture=ll(b,this.debugID));this.needsBuffer&&(this.texture.buffer(this.canvas),this.needsBuffer=!1,this.locked&&(this.scratch=this.canvas=null))}},{key:"dispose",value:function(){this.texture&&
(this.texture.deleteTexture(),this.texture=null);this.scratch=this.canvas=null;this.locked=!0}}])}(),jn=function(){function a(b,c,d,e){N(this,a);this.r=b;this.texSize=c;this.texRows=d;this.createTextureCanvas=e;this.atlases=[];this.styleKeyToAtlas=new Map;this.markedKeys=new Set}return L(a,[{key:"getKeys",value:function(){return new Set(this.styleKeyToAtlas.keys())}},{key:"_createAtlas",value:function(){return new hn(this.r,this.texSize,this.texRows,this.createTextureCanvas)}},{key:"_getScratchCanvas",
value:function(){if(!this.scratch){var b=this.texSize,c=this.createTextureCanvas;this.scratch=c(this.r,b,Math.floor(b/this.texRows),"scratch")}return this.scratch}},{key:"draw",value:function(b,c,d){var e=this.styleKeyToAtlas.get(b);e||(e=this.atlases[this.atlases.length-1],e&&e.canFit(c)||(e&&e.lock(),e=this._createAtlas(),this.atlases.push(e)),e.draw(b,c,d),this.styleKeyToAtlas.set(b,e));return e}},{key:"getAtlas",value:function(b){return this.styleKeyToAtlas.get(b)}},{key:"hasAtlas",value:function(b){return this.styleKeyToAtlas.has(b)}},
{key:"markKeyForGC",value:function(b){this.markedKeys.add(b)}},{key:"gc",value:function(){var b=this,c=this.markedKeys;if(c.size===0)console.log("nothing to garbage collect");else{var d=[],e=new Map,f=null,g=I(this.atlases),h;try{var k=function(){var l=h.value,m=l.getKeys(),n=pl(c,m);if(n.size===0)return d.push(l),m.forEach(function(v){return e.set(v,l)}),1;f||(f=b._createAtlas(),d.push(f));m=I(m);var p;try{for(m.s();!(p=m.n()).done;){var q=p.value;if(!n.has(q)){var t=l.getOffsets(q),u=W(t,2),x=u[0];
f.canFit({w:x.w+u[1].w,h:x.h})||(f.lock(),f=b._createAtlas(),d.push(f));l.canvas&&(b._copyTextureToNewAtlas(q,l,f),e.set(q,f))}}}catch(v){m.e(v)}finally{m.f()}l.dispose()};for(g.s();!(h=g.n()).done;)k()}catch(l){g.e(l)}finally{g.f()}this.atlases=d;this.styleKeyToAtlas=e;this.markedKeys=new Set}}},{key:"_copyTextureToNewAtlas",value:function(b,c,d){var e=c.getOffsets(b);e=W(e,2);var f=e[0];e=e[1];if(e.w===0)d.draw(b,f,function(l){l.drawImage(c.canvas,f.x,f.y,f.w,f.h,0,0,f.w,f.h)});else{var g=this._getScratchCanvas();
g.clear();g.context.drawImage(c.canvas,f.x,f.y,f.w,f.h,0,0,f.w,f.h);g.context.drawImage(c.canvas,e.x,e.y,e.w,e.h,f.w,0,e.w,e.h);var h=f.w+e.w,k=f.h;d.draw(b,{w:h,h:k},function(l){l.drawImage(g,0,0,h,k,0,0,h,k)})}}},{key:"getCounts",value:function(){return{keyCount:this.styleKeyToAtlas.size,atlasCount:(new Set(this.styleKeyToAtlas.values())).size}}}])}(),kn=function(){function a(b,c){N(this,a);this.r=b;this.globalOptions=c;this.atlasSize=c.webglTexSize;this.maxAtlasesPerBatch=c.webglTexPerBatch;this.renderTypes=
new Map;this.collections=new Map;this.typeAndIdToKey=new Map}return L(a,[{key:"getAtlasSize",value:function(){return this.atlasSize}},{key:"addAtlasCollection",value:function(b,c){var d=this.globalOptions,e=d.webglTexSize;c=c.texRows;d=this._cacheScratchCanvas(d.createTextureCanvas);e=new jn(this.r,e,c,d);this.collections.set(b,e)}},{key:"addRenderType",value:function(b,c){var d=c.collection;if(!this.collections.has(d))throw Error("invalid atlas collection name '".concat(d,"'"));d=this.collections.get(d);
c=Ra({type:b,atlasCollection:d},c);this.renderTypes.set(b,c)}},{key:"getRenderTypeOpts",value:function(b){return this.renderTypes.get(b)}},{key:"getAtlasCollection",value:function(b){return this.collections.get(b)}},{key:"_cacheScratchCanvas",value:function(b){var c=-1,d=-1,e=null;return function(f,g,h,k){return k?(e&&g==c&&h==d||(c=g,d=h,e=b(f,g,h)),e):b(f,g,h)}}},{key:"_key",value:function(b,c){return"".concat(b,"-").concat(c)}},{key:"invalidate",value:function(b){var c=this,d=arguments.length>
1&&arguments[1]!==void 0?arguments[1]:{},e=d.forceRedraw,f=e===void 0?!1:e;e=d.filterEle;e=e===void 0?function(){return!0}:e;d=d.filterType;var g=d===void 0?function(){return!0}:d,h=!1,k=!1;d=I(b);var l;try{for(d.s();!(l=d.n()).done;){var m=l.value;if(e(m)){var n=I(this.renderTypes.values()),p;try{var q=function(){var t=p.value,u=t.type;if(g(u)){var x=c.collections.get(t.collection),v=t.getKey(m);v=Array.isArray(v)?v:[v];f?(v.forEach(function(w){return x.markKeyForGC(w)}),k=!0):(t=t.getID?t.getID(m):
m.id(),u=c._key(u,t),t=c.typeAndIdToKey.get(u),t===void 0||kl(v,t)||(h=!0,c.typeAndIdToKey["delete"](u),t.forEach(function(w){return x.markKeyForGC(w)})))}};for(n.s();!(p=n.n()).done;)q()}catch(t){n.e(t)}finally{n.f()}}}}catch(t){d.e(t)}finally{d.f()}k&&(this.gc(),h=!1);return h}},{key:"gc",value:function(){var b=I(this.collections.values()),c;try{for(b.s();!(c=b.n()).done;)c.value.gc()}catch(d){b.e(d)}finally{b.f()}}},{key:"getOrCreateAtlas",value:function(b,c,d,e){var f=this.renderTypes.get(c),
g=!1,h=this.collections.get(f.collection).draw(e,d,function(l){f.drawClipped?(l.save(),l.beginPath(),l.rect(0,0,d.w,d.h),l.clip(),f.drawElement(l,b,d,!0,!0),l.restore()):f.drawElement(l,b,d,!0,!0);g=!0});if(g){var k=f.getID?f.getID(b):b.id();c=this._key(c,k);this.typeAndIdToKey.has(c)?this.typeAndIdToKey.get(c).push(e):this.typeAndIdToKey.set(c,[e])}return h}},{key:"getAtlasInfo",value:function(b,c){var d=this,e=this.renderTypes.get(c),f=e.getKey(b);return(Array.isArray(f)?f:[f]).map(function(g){var h=
e.getBoundingBox(b,g),k=d.getOrCreateAtlas(b,c,h,g);g=k.getOffsets(g);g=W(g,2);var l=g[0];return{atlas:k,tex:l,tex1:l,tex2:g[1],bb:h}})}},{key:"getDebugInfo",value:function(){var b=[],c=I(this.collections),d;try{for(c.s();!(d=c.n()).done;){var e=W(d.value,2),f=e[0],g=e[1].getCounts();b.push({type:f,keyCount:g.keyCount,atlasCount:g.atlasCount})}}catch(h){c.e(h)}finally{c.f()}return b}}])}(),ln=function(){function a(b){N(this,a);this.globalOptions=b;this.atlasSize=b.webglTexSize;this.maxAtlasesPerBatch=
b.webglTexPerBatch;this.batchAtlases=[]}return L(a,[{key:"getMaxAtlasesPerBatch",value:function(){return this.maxAtlasesPerBatch}},{key:"getAtlasSize",value:function(){return this.atlasSize}},{key:"getIndexArray",value:function(){return Array.from({length:this.maxAtlasesPerBatch},function(b,c){return c})}},{key:"startBatch",value:function(){this.batchAtlases=[]}},{key:"getAtlasCount",value:function(){return this.batchAtlases.length}},{key:"getAtlases",value:function(){return this.batchAtlases}},{key:"canAddToCurrentBatch",
value:function(b){return this.batchAtlases.length===this.maxAtlasesPerBatch?this.batchAtlases.includes(b):!0}},{key:"getAtlasIndexForBatch",value:function(b){var c=this.batchAtlases.indexOf(b);if(c<0){if(this.batchAtlases.length===this.maxAtlasesPerBatch)throw Error("cannot add more atlases to batch");this.batchAtlases.push(b);c=this.batchAtlases.length-1}return c}}])}(),zd={SCREEN:{name:"screen",screen:!0},PICKING:{name:"picking",picking:!0}},mn=function(){function a(b,c,d){N(this,a);this.r=b;this.gl=
c;this.maxInstances=d.webglBatchSize;this.atlasSize=d.webglTexSize;this.bgColor=d.bgColor;this.debug=d.webglDebug;this.batchDebugInfo=[];d.enableWrapping=!0;d.createTextureCanvas=il;this.atlasManager=new kn(b,d);this.batchManager=new ln(d);this.simpleShapeOptions=new Map;this.program=this._createShaderProgram(zd.SCREEN);this.pickingProgram=this._createShaderProgram(zd.PICKING);this.vao=this._createVAO()}return L(a,[{key:"addAtlasCollection",value:function(b,c){this.atlasManager.addAtlasCollection(b,
c)}},{key:"addTextureAtlasRenderType",value:function(b,c){this.atlasManager.addRenderType(b,c)}},{key:"addSimpleShapeRenderType",value:function(b,c){this.simpleShapeOptions.set(b,c)}},{key:"invalidate",value:function(b){var c=(arguments.length>1&&arguments[1]!==void 0?arguments[1]:{}).type,d=this.atlasManager;return c?d.invalidate(b,{filterType:function(e){return e===c},forceRedraw:!0}):d.invalidate(b)}},{key:"gc",value:function(){this.atlasManager.gc()}},{key:"_createShaderProgram",value:function(b){var c=
this.gl,d="#version 300 es\n      precision highp float;\n\n      uniform mat3 uPanZoomMatrix;\n      uniform int  uAtlasSize;\n      \n      // instanced\n      in vec2 aPosition; // a vertex from the unit square\n      \n      in mat3 aTransform; // used to transform verticies, eg into a bounding box\n      in int aVertType; // the type of thing we are rendering\n\n      // the z-index that is output when using picking mode\n      in vec4 aIndex;\n      \n      // For textures\n      in int aAtlasId; // which shader unit/atlas to use\n      in vec4 aTex; // x/y/w/h of texture in atlas\n\n      // for edges\n      in vec4 aPointAPointB;\n      in vec4 aPointCPointD;\n      in vec2 aLineWidth; // also used for node border width\n\n      // simple shapes\n      in vec4 aCornerRadius; // for round-rectangle [top-right, bottom-right, top-left, bottom-left]\n      in vec4 aColor; // also used for edges\n      in vec4 aBorderColor; // aLineWidth is used for border width\n\n      // output values passed to the fragment shader\n      out vec2 vTexCoord;\n      out vec4 vColor;\n      out vec2 vPosition;\n      // flat values are not interpolated\n      flat out int vAtlasId; \n      flat out int vVertType;\n      flat out vec2 vTopRight;\n      flat out vec2 vBotLeft;\n      flat out vec4 vCornerRadius;\n      flat out vec4 vBorderColor;\n      flat out vec2 vBorderWidth;\n      flat out vec4 vIndex;\n      \n      void main(void) {\n        int vid \x3d gl_VertexID;\n        vec2 position \x3d aPosition; // TODO make this a vec3, simplifies some code below\n\n        if(aVertType \x3d\x3d ".concat(0,
") {\n          float texX \x3d aTex.x; // texture coordinates\n          float texY \x3d aTex.y;\n          float texW \x3d aTex.z;\n          float texH \x3d aTex.w;\n\n          if(vid \x3d\x3d 1 || vid \x3d\x3d 2 || vid \x3d\x3d 4) {\n            texX +\x3d texW;\n          }\n          if(vid \x3d\x3d 2 || vid \x3d\x3d 4 || vid \x3d\x3d 5) {\n            texY +\x3d texH;\n          }\n\n          float d \x3d float(uAtlasSize);\n          vTexCoord \x3d vec2(texX / d, texY / d); // tex coords must be between 0 and 1\n\n          gl_Position \x3d vec4(uPanZoomMatrix * aTransform * vec3(position, 1.0), 1.0);\n        }\n        else if(aVertType \x3d\x3d ").concat(4,
" || aVertType \x3d\x3d ").concat(7," \n             || aVertType \x3d\x3d ").concat(5," || aVertType \x3d\x3d ").concat(6,") { // simple shapes\n\n          // the bounding box is needed by the fragment shader\n          vBotLeft  \x3d (aTransform * vec3(0, 0, 1)).xy; // flat\n          vTopRight \x3d (aTransform * vec3(1, 1, 1)).xy; // flat\n          vPosition \x3d (aTransform * vec3(position, 1)).xy; // will be interpolated\n\n          // calculations are done in the fragment shader, just pass these along\n          vColor \x3d aColor;\n          vCornerRadius \x3d aCornerRadius;\n          vBorderColor \x3d aBorderColor;\n          vBorderWidth \x3d aLineWidth;\n\n          gl_Position \x3d vec4(uPanZoomMatrix * aTransform * vec3(position, 1.0), 1.0);\n        }\n        else if(aVertType \x3d\x3d ").concat(1,
") {\n          vec2 source \x3d aPointAPointB.xy;\n          vec2 target \x3d aPointAPointB.zw;\n\n          // adjust the geometry so that the line is centered on the edge\n          position.y \x3d position.y - 0.5;\n\n          // stretch the unit square into a long skinny rectangle\n          vec2 xBasis \x3d target - source;\n          vec2 yBasis \x3d normalize(vec2(-xBasis.y, xBasis.x));\n          vec2 point \x3d source + xBasis * position.x + yBasis * aLineWidth[0] * position.y;\n\n          gl_Position \x3d vec4(uPanZoomMatrix * vec3(point, 1.0), 1.0);\n          vColor \x3d aColor;\n        } \n        else if(aVertType \x3d\x3d ").concat(2,
") {\n          vec2 pointA \x3d aPointAPointB.xy;\n          vec2 pointB \x3d aPointAPointB.zw;\n          vec2 pointC \x3d aPointCPointD.xy;\n          vec2 pointD \x3d aPointCPointD.zw;\n\n          // adjust the geometry so that the line is centered on the edge\n          position.y \x3d position.y - 0.5;\n\n          vec2 p0, p1, p2, pos;\n          if(position.x \x3d\x3d 0.0) { // The left side of the unit square\n            p0 \x3d pointA;\n            p1 \x3d pointB;\n            p2 \x3d pointC;\n            pos \x3d position;\n          } else { // The right side of the unit square, use same approach but flip the geometry upside down\n            p0 \x3d pointD;\n            p1 \x3d pointC;\n            p2 \x3d pointB;\n            pos \x3d vec2(0.0, -position.y);\n          }\n\n          vec2 p01 \x3d p1 - p0;\n          vec2 p12 \x3d p2 - p1;\n          vec2 p21 \x3d p1 - p2;\n\n          // Find the normal vector.\n          vec2 tangent \x3d normalize(normalize(p12) + normalize(p01));\n          vec2 normal \x3d vec2(-tangent.y, tangent.x);\n\n          // Find the vector perpendicular to p0 -\x3e p1.\n          vec2 p01Norm \x3d normalize(vec2(-p01.y, p01.x));\n\n          // Determine the bend direction.\n          float sigma \x3d sign(dot(p01 + p21, normal));\n          float width \x3d aLineWidth[0];\n\n          if(sign(pos.y) \x3d\x3d -sigma) {\n            // This is an intersecting vertex. Adjust the position so that there's no overlap.\n            vec2 point \x3d 0.5 * width * normal * -sigma / dot(normal, p01Norm);\n            gl_Position \x3d vec4(uPanZoomMatrix * vec3(p1 + point, 1.0), 1.0);\n          } else {\n            // This is a non-intersecting vertex. Treat it like a mitre join.\n            vec2 point \x3d 0.5 * width * normal * sigma * dot(normal, p01Norm);\n            gl_Position \x3d vec4(uPanZoomMatrix * vec3(p1 + point, 1.0), 1.0);\n          }\n\n          vColor \x3d aColor;\n        } \n        else if(aVertType \x3d\x3d ").concat(3,
" \x26\x26 vid \x3c 3) {\n          // massage the first triangle into an edge arrow\n          if(vid \x3d\x3d 0)\n            position \x3d vec2(-0.15, -0.3);\n          if(vid \x3d\x3d 1)\n            position \x3d vec2(  0.0,  0.0);\n          if(vid \x3d\x3d 2)\n            position \x3d vec2( 0.15, -0.3);\n\n          gl_Position \x3d vec4(uPanZoomMatrix * aTransform * vec3(position, 1.0), 1.0);\n          vColor \x3d aColor;\n        }\n        else {\n          gl_Position \x3d vec4(2.0, 0.0, 0.0, 1.0); // discard vertex by putting it outside webgl clip space\n        }\n\n        vAtlasId \x3d aAtlasId;\n        vVertType \x3d aVertType;\n        vIndex \x3d aIndex;\n      }\n    "),
e=this.batchManager.getIndexArray();b="#version 300 es\n      precision highp float;\n\n      // declare texture unit for each texture atlas in the batch\n      ".concat(e.map(function(f){return"uniform sampler2D uTexture".concat(f,";")}).join("\n\t"),"\n\n      uniform vec4 uBGColor;\n      uniform float uZoom;\n\n      in vec2 vTexCoord;\n      in vec4 vColor;\n      in vec2 vPosition; // model coordinates\n\n      flat in int vAtlasId;\n      flat in vec4 vIndex;\n      flat in int vVertType;\n      flat in vec2 vTopRight;\n      flat in vec2 vBotLeft;\n      flat in vec4 vCornerRadius;\n      flat in vec4 vBorderColor;\n      flat in vec2 vBorderWidth;\n\n      out vec4 outColor;\n\n      ").concat("\n  float circleSD(vec2 p, float r) {\n    return distance(vec2(0), p) - r; // signed distance\n  }\n",
"\n      ").concat("\n  float rectangleSD(vec2 p, vec2 b) {\n    vec2 d \x3d abs(p)-b;\n    return distance(vec2(0),max(d,0.0)) + min(max(d.x,d.y),0.0);\n  }\n","\n      ").concat("\n  float roundRectangleSD(vec2 p, vec2 b, vec4 cr) {\n    cr.xy \x3d (p.x \x3e 0.0) ? cr.xy : cr.zw;\n    cr.x  \x3d (p.y \x3e 0.0) ? cr.x  : cr.y;\n    vec2 q \x3d abs(p) - b + cr.x;\n    return min(max(q.x, q.y), 0.0) + distance(vec2(0), max(q, 0.0)) - cr.x;\n  }\n","\n      ").concat("\n  float ellipseSD(vec2 p, vec2 ab) {\n    p \x3d abs( p ); // symmetry\n\n    // find root with Newton solver\n    vec2 q \x3d ab*(p-ab);\n    float w \x3d (q.x\x3cq.y)? 1.570796327 : 0.0;\n    for( int i\x3d0; i\x3c5; i++ ) {\n      vec2 cs \x3d vec2(cos(w),sin(w));\n      vec2 u \x3d ab*vec2( cs.x,cs.y);\n      vec2 v \x3d ab*vec2(-cs.y,cs.x);\n      w \x3d w + dot(p-u,v)/(dot(p-u,u)+dot(v,v));\n    }\n    \n    // compute final point and distance\n    float d \x3d length(p-ab*vec2(cos(w),sin(w)));\n    \n    // return signed distance\n    return (dot(p/ab,p/ab)\x3e1.0) ? d : -d;\n  }\n",
"\n\n      vec4 blend(vec4 top, vec4 bot) { // blend colors with premultiplied alpha\n        return vec4( \n          top.rgb + (bot.rgb * (1.0 - top.a)),\n          top.a   + (bot.a   * (1.0 - top.a)) \n        );\n      }\n\n      vec4 distInterp(vec4 cA, vec4 cB, float d) { // interpolate color using Signed Distance\n        // scale to the zoom level so that borders don't look blurry when zoomed in\n        // note 1.5 is an aribitrary value chosen because it looks good\n        return mix(cA, cB, 1.0 - smoothstep(0.0, 1.5 / uZoom, abs(d))); \n      }\n\n      void main(void) {\n        if(vVertType \x3d\x3d ").concat(0,
") {\n          // look up the texel from the texture unit\n          ").concat(e.map(function(f){return"if(vAtlasId \x3d\x3d ".concat(f,") outColor \x3d texture(uTexture").concat(f,", vTexCoord);")}).join("\n\telse "),"\n        } \n        else if(vVertType \x3d\x3d ").concat(3,") {\n          // mimics how canvas renderer uses context.globalCompositeOperation \x3d 'destination-out';\n          outColor \x3d blend(vColor, uBGColor);\n          outColor.a \x3d 1.0; // make opaque, masks out line under arrow\n        }\n        else if(vVertType \x3d\x3d ").concat(4,
" \x26\x26 vBorderWidth \x3d\x3d vec2(0.0)) { // simple rectangle with no border\n          outColor \x3d vColor; // unit square is already transformed to the rectangle, nothing else needs to be done\n        }\n        else if(vVertType \x3d\x3d ").concat(4," || vVertType \x3d\x3d ").concat(7," \n          || vVertType \x3d\x3d ").concat(5," || vVertType \x3d\x3d ").concat(6,") { // use SDF\n\n          float outerBorder \x3d vBorderWidth[0];\n          float innerBorder \x3d vBorderWidth[1];\n          float borderPadding \x3d outerBorder * 2.0;\n          float w \x3d vTopRight.x - vBotLeft.x - borderPadding;\n          float h \x3d vTopRight.y - vBotLeft.y - borderPadding;\n          vec2 b \x3d vec2(w/2.0, h/2.0); // half width, half height\n          vec2 p \x3d vPosition - vec2(vTopRight.x - b[0] - outerBorder, vTopRight.y - b[1] - outerBorder); // translate to center\n\n          float d; // signed distance\n          if(vVertType \x3d\x3d ").concat(4,
") {\n            d \x3d rectangleSD(p, b);\n          } else if(vVertType \x3d\x3d ").concat(7," \x26\x26 w \x3d\x3d h) {\n            d \x3d circleSD(p, b.x); // faster than ellipse\n          } else if(vVertType \x3d\x3d ").concat(7,") {\n            d \x3d ellipseSD(p, b);\n          } else {\n            d \x3d roundRectangleSD(p, b, vCornerRadius.wzyx);\n          }\n\n          // use the distance to interpolate a color to smooth the edges of the shape, doesn't need multisampling\n          // we must smooth colors inwards, because we can't change pixels outside the shape's bounding box\n          if(d \x3e 0.0) {\n            if(d \x3e outerBorder) {\n              discard;\n            } else {\n              outColor \x3d distInterp(vBorderColor, vec4(0), d - outerBorder);\n            }\n          } else {\n            if(d \x3e innerBorder) {\n              vec4 outerColor \x3d outerBorder \x3d\x3d 0.0 ? vec4(0) : vBorderColor;\n              vec4 innerBorderColor \x3d blend(vBorderColor, vColor);\n              outColor \x3d distInterp(innerBorderColor, outerColor, d);\n            } \n            else {\n              vec4 outerColor;\n              if(innerBorder \x3d\x3d 0.0 \x26\x26 outerBorder \x3d\x3d 0.0) {\n                outerColor \x3d vec4(0);\n              } else if(innerBorder \x3d\x3d 0.0) {\n                outerColor \x3d vBorderColor;\n              } else {\n                outerColor \x3d blend(vBorderColor, vColor);\n              }\n              outColor \x3d distInterp(vColor, outerColor, d - innerBorder);\n            }\n          }\n        }\n        else {\n          outColor \x3d vColor;\n        }\n\n        ").concat(b.picking?
"if(outColor.a \x3d\x3d 0.0) discard;\n             else outColor \x3d vIndex;":"","\n      }\n    ");d=hl(c,d,b);d.aPosition=c.getAttribLocation(d,"aPosition");d.aIndex=c.getAttribLocation(d,"aIndex");d.aVertType=c.getAttribLocation(d,"aVertType");d.aTransform=c.getAttribLocation(d,"aTransform");d.aAtlasId=c.getAttribLocation(d,"aAtlasId");d.aTex=c.getAttribLocation(d,"aTex");d.aPointAPointB=c.getAttribLocation(d,"aPointAPointB");d.aPointCPointD=c.getAttribLocation(d,"aPointCPointD");d.aLineWidth=
c.getAttribLocation(d,"aLineWidth");d.aColor=c.getAttribLocation(d,"aColor");d.aCornerRadius=c.getAttribLocation(d,"aCornerRadius");d.aBorderColor=c.getAttribLocation(d,"aBorderColor");d.uPanZoomMatrix=c.getUniformLocation(d,"uPanZoomMatrix");d.uAtlasSize=c.getUniformLocation(d,"uAtlasSize");d.uBGColor=c.getUniformLocation(d,"uBGColor");d.uZoom=c.getUniformLocation(d,"uZoom");d.uTextures=[];for(b=0;b<this.batchManager.getMaxAtlasesPerBatch();b++)d.uTextures.push(c.getUniformLocation(d,"uTexture".concat(b)));
return d}},{key:"_createVAO",value:function(){var b=[0,0,1,0,1,1,0,0,1,1,0,1];this.vertexCount=b.length/2;var c=this.maxInstances,d=this.gl,e=this.program,f=d.createVertexArray();d.bindVertexArray(f);var g=e.aPosition,h=vi(d,"vec2"),k=W(h,2);h=k[0];k=k[1];b=wi(d,k,b);var l=d.createBuffer();d.bindBuffer(d.ARRAY_BUFFER,l);d.bufferData(d.ARRAY_BUFFER,b,d.STATIC_DRAW);k===d.FLOAT?d.vertexAttribPointer(g,h,k,!1,0,0):k===d.INT&&d.vertexAttribIPointer(g,h,k,0,0);d.enableVertexAttribArray(g);d.bindBuffer(d.ARRAY_BUFFER,
null);this.transformBuffer=nl(d,c,e.aTransform);this.indexBuffer=kc(d,c,"vec4",e.aIndex);this.vertTypeBuffer=kc(d,c,"int",e.aVertType);this.atlasIdBuffer=kc(d,c,"int",e.aAtlasId);this.texBuffer=kc(d,c,"vec4",e.aTex);this.pointAPointBBuffer=kc(d,c,"vec4",e.aPointAPointB);this.pointCPointDBuffer=kc(d,c,"vec4",e.aPointCPointD);this.lineWidthBuffer=kc(d,c,"vec2",e.aLineWidth);this.colorBuffer=kc(d,c,"vec4",e.aColor);this.cornerRadiusBuffer=kc(d,c,"vec4",e.aCornerRadius);this.borderColorBuffer=kc(d,c,
"vec4",e.aBorderColor);d.bindVertexArray(null);return f}},{key:"buffers",get:function(){var b=this;this._buffers||(this._buffers=Object.keys(this).filter(function(c){return c.endsWith("Buffer")}).map(function(c){return b[c]}));return this._buffers}},{key:"startFrame",value:function(b){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:zd.SCREEN;this.panZoomMatrix=b;this.renderTarget=c;this.batchDebugInfo=[];this.simpleCount=this.wrappedCount=0;this.startBatch()}},{key:"startBatch",value:function(){this.instanceCount=
0;this.batchManager.startBatch()}},{key:"endFrame",value:function(){this.endBatch()}},{key:"_isVisible",value:function(b,c){return b.visible()?c&&c.isVisible?c.isVisible(b):!0:!1}},{key:"drawTexture",value:function(b,c,d){var e=this.atlasManager,f=this.batchManager,g=e.getRenderTypeOpts(d);if(this._isVisible(b,g)){if(this.renderTarget.picking&&g.getTexPickingMode){var h=g.getTexPickingMode(b);if(h===1)return;if(h==2){this.drawPickingRectangle(b,c,d);return}}d=e.getAtlasInfo(b,d);d=I(d);var k;try{for(d.s();!(k=
d.n()).done;){var l=k.value,m=l.atlas,n=l.tex1,p=l.tex2;f.canAddToCurrentBatch(m)||this.endBatch();var q=f.getAtlasIndexForBatch(m);e=0;for(h=[[n,!0],[p,!1]];e<h.length;e++){var t=W(h[e],2),u=t[0],x=t[1];if(u.w!=0){var v=this.instanceCount;this.vertTypeBuffer.getView(v)[0]=0;var w=this.indexBuffer.getView(v);cd(c,w);this.atlasIdBuffer.getView(v)[0]=q;var C=this.texBuffer.getView(v);C[0]=u.x;C[1]=u.y;C[2]=u.w;C[3]=u.h;var y=this.transformBuffer.getMatrixView(v);this.setTransformMatrix(b,y,g,l,x);this.instanceCount++;
x||this.wrappedCount++;this.instanceCount>=this.maxInstances&&this.endBatch()}}}}catch(B){d.e(B)}finally{d.f()}}}},{key:"setTransformMatrix",value:function(b,c,d,e){var f=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,g=0;d.shapeProps&&d.shapeProps.padding&&(g=b.pstyle(d.shapeProps.padding).pfValue);if(e){var h=e.bb,k=e.tex1;k=k.w/(k.w+e.tex2.w);f||(k=1-k);g=this._getAdjustedBB(h,g,f,k);this._applyTransformMatrix(c,g,d,b)}else f=d.getBoundingBox(b),g=this._getAdjustedBB(f,g,!0,1),this._applyTransformMatrix(c,
g,d,b)}},{key:"_applyTransformMatrix",value:function(b,c,d,e){yi(b);var f=d.getRotation?d.getRotation(e):0;if(f!==0){var g=d.getRotationPoint(e);Yd(b,b,[g.x,g.y]);zi(b,b,f);e=d.getRotationOffset(e);d=e.x+(c.xOffset||0);e=e.y+(c.yOffset||0)}else d=c.x1,e=c.y1;Yd(b,b,[d,e]);Qe(b,b,[c.w,c.h])}},{key:"_getAdjustedBB",value:function(b,c,d,e){var f=b.x1,g=b.y1,h=b.w,k=b.h;b=b.yOffset;c&&(f-=c,g-=c,h+=2*c,k+=2*c);c=0;var l=h*e;d&&e<1?h=l:!d&&e<1&&(c=h-l,f+=c,h=l);return{x1:f,y1:g,w:h,h:k,xOffset:c,yOffset:b}}},
{key:"drawPickingRectangle",value:function(b,c,d){d=this.atlasManager.getRenderTypeOpts(d);var e=this.instanceCount;this.vertTypeBuffer.getView(e)[0]=4;var f=this.indexBuffer.getView(e);cd(c,f);c=this.colorBuffer.getView(e);Nc([0,0,0],1,c);c=this.transformBuffer.getMatrixView(e);this.setTransformMatrix(b,c,d);this.simpleCount++;this.instanceCount++;this.instanceCount>=this.maxInstances&&this.endBatch()}},{key:"drawNode",value:function(b,c,d){var e=this.simpleShapeOptions.get(d);if(this._isVisible(b,
e)){var f=e.shapeProps,g=this._getVertTypeForShape(b,f.shape);if(g===void 0||e.isSimple&&!e.isSimple(b))this.drawTexture(b,c,d);else{d=this.instanceCount;this.vertTypeBuffer.getView(d)[0]=g;if(g===5||g===6){var h=e.getBoundingBox(b);h=this._getCornerRadius(b,f.radius,h);var k=this.cornerRadiusBuffer.getView(d);k[0]=h;k[1]=h;k[2]=h;k[3]=h;g===6&&(k[0]=0,k[2]=0)}g=this.indexBuffer.getView(d);cd(c,g);c=b.pstyle(f.color).value;g=b.pstyle(f.opacity).value;h=this.colorBuffer.getView(d);Nc(c,g,h);c=this.lineWidthBuffer.getView(d);
c[0]=0;c[1]=0;f.border&&(f=b.pstyle("border-width").value,f>0&&(g=b.pstyle("border-color").value,h=b.pstyle("border-opacity").value,k=this.borderColorBuffer.getView(d),Nc(g,h,k),g=b.pstyle("border-position").value,g==="inside"?(c[0]=0,c[1]=-f):g==="outside"?(c[0]=f,c[1]=0):(f/=2,c[0]=f,c[1]=-f)));d=this.transformBuffer.getMatrixView(d);this.setTransformMatrix(b,d,e);this.simpleCount++;this.instanceCount++;this.instanceCount>=this.maxInstances&&this.endBatch()}}}},{key:"_getVertTypeForShape",value:function(b,
c){switch(b.pstyle(c).value){case "rectangle":return 4;case "ellipse":return 7;case "roundrectangle":case "round-rectangle":return 5;case "bottom-round-rectangle":return 6}}},{key:"_getCornerRadius",value:function(b,c,d){var e=d.w;d=d.h;if(b.pstyle(c).value==="auto")return Ac(e,d);b=b.pstyle(c).pfValue;return Math.min(b,d/2,e/2)}},{key:"drawEdgeArrow",value:function(b,c,d){if(b.visible()){var e=b._private.rscratch;if(d==="source"){var f=e.arrowStartX;var g=e.arrowStartY;e=e.srcArrowAngle}else f=e.arrowEndX,
g=e.arrowEndY,e=e.tgtArrowAngle;if(!(isNaN(f)||f==null||isNaN(g)||g==null||isNaN(e)||e==null)&&b.pstyle(d+"-arrow-shape").value!=="none"){d=b.pstyle(d+"-arrow-color").value;var h=b.pstyle("opacity").value,k=b.pstyle("line-opacity").value;h*=k;k=b.pstyle("width").pfValue;b=b.pstyle("arrow-scale").value;k=this.r.getArrowWidth(k,b);b=this.instanceCount;var l=this.transformBuffer.getMatrixView(b);yi(l);Yd(l,l,[f,g]);Qe(l,l,[k,k]);zi(l,l,e);this.vertTypeBuffer.getView(b)[0]=3;f=this.indexBuffer.getView(b);
cd(c,f);c=this.colorBuffer.getView(b);Nc(d,h,c);this.instanceCount++;this.instanceCount>=this.maxInstances&&this.endBatch()}}}},{key:"drawEdgeLine",value:function(b,c){if(b.visible()){var d=this._getEdgePoints(b);if(d){var e=b.pstyle("opacity").value,f=b.pstyle("line-opacity").value,g=b.pstyle("width").pfValue;b=b.pstyle("line-color").value;e*=f;d.length/2+this.instanceCount>this.maxInstances&&this.endBatch();if(d.length==4){f=this.instanceCount;this.vertTypeBuffer.getView(f)[0]=1;var h=this.indexBuffer.getView(f);
cd(c,h);c=this.colorBuffer.getView(f);Nc(b,e,c);this.lineWidthBuffer.getView(f)[0]=g;g=this.pointAPointBBuffer.getView(f);g[0]=d[0];g[1]=d[1];g[2]=d[2];g[3]=d[3];this.instanceCount++;this.instanceCount>=this.maxInstances&&this.endBatch()}else for(f=0;f<d.length-2;f+=2){h=this.instanceCount;this.vertTypeBuffer.getView(h)[0]=2;var k=this.indexBuffer.getView(h);cd(c,k);k=this.colorBuffer.getView(h);Nc(b,e,k);this.lineWidthBuffer.getView(h)[0]=g;var l=d[f-2],m=d[f-1],n=d[f],p=d[f+1];k=d[f+2];var q=d[f+
3],t=d[f+4],u=d[f+5];f==0&&(l=2*n-k+.001,m=2*p-q+.001);f==d.length-4&&(t=2*k-n+.001,u=2*q-p+.001);var x=this.pointAPointBBuffer.getView(h);x[0]=l;x[1]=m;x[2]=n;x[3]=p;h=this.pointCPointDBuffer.getView(h);h[0]=k;h[1]=q;h[2]=t;h[3]=u;this.instanceCount++;this.instanceCount>=this.maxInstances&&this.endBatch()}}}}},{key:"_getEdgePoints",value:function(b){var c=b._private.rscratch;if(!c.badLine&&c.allpts!=null&&!isNaN(c.allpts[0])){c=c.allpts;if(c.length==4)return c;b=this._getNumSegments(b);return this._getCurveSegmentPoints(c,
b)}}},{key:"_getNumSegments",value:function(b){return Math.min(15,this.maxInstances)}},{key:"_getCurveSegmentPoints",value:function(b,c){if(b.length==4)return b;for(var d=Array((c+1)*2),e=0;e<=c;e++)e==0?(d[0]=b[0],d[1]=b[1]):e==c?(d[e*2]=b[b.length-2],d[e*2+1]=b[b.length-1]):this._setCurvePoint(b,e/c,d,e*2);return d}},{key:"_setCurvePoint",value:function(b,c,d,e){if(b.length<=2)d[e]=b[0],d[e+1]=b[1];else{for(var f=Array(b.length-2),g=0;g<f.length;g+=2){var h=(1-c)*b[g+1]+c*b[g+3];f[g]=(1-c)*b[g]+
c*b[g+2];f[g+1]=h}return this._setCurvePoint(f,c,d,e)}}},{key:"endBatch",value:function(){var b=this.gl,c=this.vao,d=this.vertexCount,e=this.instanceCount;if(e!==0){var f=this.renderTarget.picking?this.pickingProgram:this.program;b.useProgram(f);b.bindVertexArray(c);c=I(this.buffers);var g;try{for(c.s();!(g=c.n()).done;)g.value.bufferSubData(e)}catch(m){c.e(m)}finally{c.f()}g=this.batchManager.getAtlases();for(c=0;c<g.length;c++)g[c].bufferIfNeeded(b);for(c=0;c<g.length;c++)b.activeTexture(b.TEXTURE0+
c),b.bindTexture(b.TEXTURE_2D,g[c].texture),b.uniform1i(f.uTextures[c],c);c=b.uniform1f;var h=f.uZoom;var k=this.r;var l=k.pixelRatio;k=k.cy.zoom()*l;c.call(b,h,k);b.uniformMatrix3fv(f.uPanZoomMatrix,!1,this.panZoomMatrix);b.uniform1i(f.uAtlasSize,this.batchManager.getAtlasSize());c=Nc(this.bgColor,1);b.uniform4fv(f.uBGColor,c);b.drawArraysInstanced(b.TRIANGLES,0,d,e);b.bindVertexArray(null);b.bindTexture(b.TEXTURE_2D,null);this.debug&&this.batchDebugInfo.push({count:e,atlasCount:g.length});this.startBatch()}}},
{key:"getDebugInfo",value:function(){var b=this.atlasManager.getDebugInfo(),c=b.reduce(function(f,g){return f+g.atlasCount},0),d=this.batchDebugInfo,e=d.reduce(function(f,g){return f+g.count},0);return{atlasInfo:b,totalAtlases:c,wrappedCount:this.wrappedCount,simpleCount:this.simpleCount,batchCount:d.length,batchInfo:d,totalInstances:e}}}])}(),uf=function(a,b){return function(c){var d=a(c);c=Bb(c._private.rscratch,"labelWrapCachedLines",b)||[];return c.length>1?c.map(function(e,f){return"".concat(d,
"_").concat(f)}):d}},vf=function(a,b){return function(c,d){var e=a(c);if(typeof d==="string"){var f=d.indexOf("_");if(f>0)return d=Number(d.substring(f+1)),c=Bb(c._private.rscratch,"labelWrapCachedLines",b)||[],c=e.h/c.length,d*=c,{x1:e.x1,w:e.w,y1:e.y1+d,h:c,yOffset:d}}return e}},Bk={drawPolygonPath:function(a,b,c,d,e,f){d/=2;e/=2;a.beginPath&&a.beginPath();a.moveTo(b+d*f[0],c+e*f[1]);for(var g=1;g<f.length/2;g++)a.lineTo(b+d*f[g*2],c+e*f[g*2+1]);a.closePath()},drawRoundPolygonPath:function(a,b,
c,d,e,f,g){g.forEach(function(h){return li(a,h)});a.closePath()},drawRoundRectanglePath:function(a,b,c,d,e,f){var g=d/2,h=e/2;d=f==="auto"?Ac(d,e):Math.min(f,h,g);a.beginPath&&a.beginPath();a.moveTo(b,c-h);a.arcTo(b+g,c-h,b+g,c,d);a.arcTo(b+g,c+h,b,c+h,d);a.arcTo(b-g,c+h,b-g,c,d);a.arcTo(b-g,c-h,b,c-h,d);a.lineTo(b,c-h);a.closePath()},drawBottomRoundRectanglePath:function(a,b,c,d,e,f){var g=d/2,h=e/2;d=f==="auto"?Ac(d,e):f;a.beginPath&&a.beginPath();a.moveTo(b,c-h);a.lineTo(b+g,c-h);a.lineTo(b+g,
c);a.arcTo(b+g,c+h,b,c+h,d);a.arcTo(b-g,c+h,b-g,c,d);a.lineTo(b-g,c-h);a.lineTo(b,c-h);a.closePath()},drawCutRectanglePath:function(a,b,c,d,e,f,g){d/=2;e/=2;g=g==="auto"?8:g;a.beginPath&&a.beginPath();a.moveTo(b-d+g,c-e);a.lineTo(b+d-g,c-e);a.lineTo(b+d,c-e+g);a.lineTo(b+d,c+e-g);a.lineTo(b+d-g,c+e);a.lineTo(b-d+g,c+e);a.lineTo(b-d,c+e-g);a.lineTo(b-d,c-e+g);a.closePath()},drawBarrelPath:function(a,b,c,d,e){var f=d/2,g=e/2,h=b-f;b+=f;f=c-g;c+=g;g=bf(d,e);d=g.widthOffset;e=g.heightOffset;g=g.ctrlPtOffsetPct*
d;a.beginPath&&a.beginPath();a.moveTo(h,f+e);a.lineTo(h,c-e);a.quadraticCurveTo(h+g,c,h+d,c);a.lineTo(b-d,c);a.quadraticCurveTo(b-g,c,b,c-e);a.lineTo(b,f+e);a.quadraticCurveTo(b-g,f,b-d,f);a.lineTo(h+d,f);a.quadraticCurveTo(h+g,f,h,f+e);a.closePath()}},Ck=Math.sin(0),Dk=Math.cos(0),wf={},xf={},Ek=Math.PI/40,ud=0*Math.PI;ud<2*Math.PI;ud+=Ek)wf[ud]=Math.sin(ud),xf[ud]=Math.cos(ud);Bk.drawEllipsePath=function(a,b,c,d,e){a.beginPath&&a.beginPath();if(a.ellipse)a.ellipse(b,c,d/2,e/2,0,0,2*Math.PI);else{d/=
2;for(var f=e/2,g=0*Math.PI;g<2*Math.PI;g+=Ek){e=b-d*wf[g]*Ck+d*xf[g]*Dk;var h=c+f*xf[g]*Ck+f*wf[g]*Dk;g===0?a.moveTo(e,h):a.lineTo(e,h)}}a.closePath()};var ab=Fi.prototype;ab.CANVAS_LAYERS=3;ab.SELECT_BOX=0;ab.DRAG=1;ab.NODE=2;ab.WEBGL=3;ab.CANVAS_TYPES=["2d","2d","2d","webgl2"];ab.BUFFER_COUNT=3;ab.TEXTURE_BUFFER=0;ab.MOTIONBLUR_BUFFER_NODE=1;ab.MOTIONBLUR_BUFFER_DRAG=2;ab.redrawHint=function(a,b){switch(a){case "eles":this.data.canvasNeedsRedraw[ab.NODE]=b;break;case "drag":this.data.canvasNeedsRedraw[ab.DRAG]=
b;break;case "select":this.data.canvasNeedsRedraw[ab.SELECT_BOX]=b;break;case "gc":this.data.gc=!0}};var nn=typeof Path2D!=="undefined";ab.path2dEnabled=function(a){if(a===void 0)return this.pathsEnabled;this.pathsEnabled=a?!0:!1};ab.usePaths=function(){return nn&&this.pathsEnabled};ab.setImgSmoothing=function(a,b){a.imageSmoothingEnabled!=null?a.imageSmoothingEnabled=b:(a.webkitImageSmoothingEnabled=b,a.mozImageSmoothingEnabled=b,a.msImageSmoothingEnabled=b)};ab.getImgSmoothing=function(a){return a.imageSmoothingEnabled!=
null?a.imageSmoothingEnabled:a.webkitImageSmoothingEnabled||a.mozImageSmoothingEnabled||a.msImageSmoothingEnabled};ab.makeOffscreenCanvas=function(a,b){if((typeof OffscreenCanvas==="undefined"?"undefined":U(OffscreenCanvas))!=="undefined")var c=new OffscreenCanvas(a,b);else c=this.cy.window().document.createElement("canvas"),c.width=a,c.height=b;return c};[wk,td,Ic,{safeDrawImage:function(a,b,c,d,e,f,g,h,k,l){if(!(e<=0||f<=0||k<=0||l<=0))try{a.drawImage(b,c,d,e,f,g,h,k,l)}catch(m){mb(m)}},drawInscribedImage:function(a,
b,c,d,e){var f=c.position(),g=f.x;f=f.y;var h=c.cy().style(),k=h.getIndexedStyle.bind(h),l=k(c,"background-fit","value",d);h=k(c,"background-repeat","value",d);var m=c.width(),n=c.height(),p=c.padding()*2;m+=k(c,"background-width-relative-to","value",d)==="inner"?0:p;n+=k(c,"background-height-relative-to","value",d)==="inner"?0:p;p=c._private.rscratch;var q=k(c,"background-clip","value",d)==="node",t=k(c,"background-image-opacity","value",d)*e,u=k(c,"background-image-smoothing","value",d);e=c.pstyle("corner-radius").value;
e!=="auto"&&(e=c.pstyle("corner-radius").pfValue);var x=b.width||b.cachedW,v=b.height||b.cachedH;if(null==x||null==v)document.body.appendChild(b),x=b.cachedW=b.width||b.offsetWidth,v=b.cachedH=b.height||b.offsetHeight,document.body.removeChild(b);var w=x,C=v;k(c,"background-width","value",d)!=="auto"&&(w=k(c,"background-width","units",d)==="%"?k(c,"background-width","pfValue",d)*m:k(c,"background-width","pfValue",d));k(c,"background-height","value",d)!=="auto"&&(C=k(c,"background-height","units",
d)==="%"?k(c,"background-height","pfValue",d)*n:k(c,"background-height","pfValue",d));if(w!==0&&C!==0){l==="contain"?(l=Math.min(m/w,n/C),w*=l,C*=l):l==="cover"&&(l=Math.max(m/w,n/C),w*=l,C*=l);l=g-m/2;var y=k(c,"background-position-x","units",d),B=k(c,"background-position-x","pfValue",d);l=y==="%"?l+(m-w)*B:l+B;y=k(c,"background-offset-x","units",d);B=k(c,"background-offset-x","pfValue",d);l=y==="%"?l+(m-w)*B:l+B;y=f-n/2;B=k(c,"background-position-y","units",d);var M=k(c,"background-position-y",
"pfValue",d);y=B==="%"?y+(n-C)*M:y+M;B=k(c,"background-offset-y","units",d);d=k(c,"background-offset-y","pfValue",d);y=B==="%"?y+(n-C)*d:y+d;p.pathCache&&(l-=g,y-=f,f=g=0);d=a.globalAlpha;a.globalAlpha=t;k=this.getImgSmoothing(a);t=!1;u==="no"&&k?(this.setImgSmoothing(a,!1),t=!0):u!=="yes"||k||(this.setImgSmoothing(a,!0),t=!0);h==="no-repeat"?(q&&(a.save(),p.pathCache?a.clip(p.pathCache):(this.nodeShapes[this.getNodeShape(c)].draw(a,g,f,m,n,e,p),a.clip())),this.safeDrawImage(a,b,0,0,x,v,l,y,w,C),
q&&a.restore()):(b=a.createPattern(b,h),a.fillStyle=b,this.nodeShapes[this.getNodeShape(c)].draw(a,g,f,m,n,e,p),a.translate(l,y),a.fill(),a.translate(-l,-y));a.globalAlpha=d;t&&this.setImgSmoothing(a,k)}}},{eleTextBiggerThanMin:function(a,b){if(!b){b=a.cy().zoom();var c=this.getPixelRatio();b=Math.ceil(Ye(b*c));b=Math.pow(2,b)}b*=a.pstyle("font-size").pfValue;a=a.pstyle("min-zoomed-font-size").pfValue;return b<a?!1:!0},drawElementText:function(a,b,c,d,e){var f=arguments.length>5&&arguments[5]!==void 0?
arguments[5]:!0;if(d==null){if(f&&!this.eleTextBiggerThanMin(b))return}else if(d===!1)return;if(b.isNode()){var g=b.pstyle("label");if(!g||!g.value)return;g=this.getLabelJustification(b);a.textAlign=g}else{g=b.element()._private.rscratch.badLine;var h=b.pstyle("label"),k=b.pstyle("source-label"),l=b.pstyle("target-label");if(g||!(h&&h.value||k&&k.value||l&&l.value))return;a.textAlign="center"}a.textBaseline="bottom";g=!c;if(c){var m=c;a.translate(-m.x1,-m.y1)}e==null?(this.drawText(a,b,null,g,f),
b.isEdge()&&(this.drawText(a,b,"source",g,f),this.drawText(a,b,"target",g,f))):this.drawText(a,b,e,g,f);c&&a.translate(m.x1,m.y1)},getFontCache:function(a){this.fontCaches=this.fontCaches||[];for(var b=0;b<this.fontCaches.length;b++){var c=this.fontCaches[b];if(c.context===a)return c}c={context:a};this.fontCaches.push(c);return c},setupTextStyle:function(a,b){var c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,d=b.pstyle("font-style").strValue,e=b.pstyle("font-size").pfValue+"px",f=b.pstyle("font-family").strValue,
g=b.pstyle("font-weight").strValue;c=c?b.effectiveOpacity()*b.pstyle("text-opacity").value:1;var h=b.pstyle("text-outline-opacity").value*c,k=b.pstyle("color").value,l=b.pstyle("text-outline-color").value;a.font=d+" "+g+" "+e+" "+f;a.lineJoin="round";this.colorFillStyle(a,k[0],k[1],k[2],c);this.colorStrokeStyle(a,l[0],l[1],l[2],h)},getTextAngle:function(a,b){var c=a._private.rscratch,d=a.pstyle((b?b+"-":"")+"text-rotation");d.strValue==="autorotate"?(b=Bb(c,"labelAngle",b),a=a.isEdge()?b:0):a=d.strValue===
"none"?0:d.pfValue;return a},drawText:function(a,b,c){var d=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,e=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,f=b._private.rscratch,g=e?b.effectiveOpacity():1;if(!e||g!==0&&b.pstyle("text-opacity").value!==0){c==="main"&&(c=null);var h=Bb(f,"labelX",c),k=Bb(f,"labelY",c),l=this.getLabelText(b,c);if(l!=null&&l!==""&&!isNaN(h)&&!isNaN(k)){this.setupTextStyle(a,b,e);var m=c?c+"-":"";e=Bb(f,"labelWidth",c);var n=Bb(f,"labelHeight",c),
p=b.pstyle(m+"text-margin-x").pfValue,q=b.pstyle(m+"text-margin-y").pfValue,t=b.isEdge();m=b.pstyle("text-halign").value;var u=b.pstyle("text-valign").value;t&&(u=m="center");h+=p;k+=q;d=d?this.getTextAngle(b,c):0;if(d!==0){var x=h;var v=k;a.translate(x,v);a.rotate(d);k=h=0}switch(u){case "center":k+=n/2;break;case "bottom":k+=n}var w=b.pstyle("text-background-opacity").value,C=b.pstyle("text-border-opacity").value,y=b.pstyle("text-border-width").pfValue,B=b.pstyle("text-background-padding").pfValue;
p=b.pstyle("text-background-shape").strValue.indexOf("round")===0;if(w>0||y>0&&C>0){q=h-B;switch(m){case "left":q-=e;break;case "center":q-=e/2}t=k-n-B;var M=e+2*B;n+=2*B;if(w>0){B=a.fillStyle;var Q=b.pstyle("text-background-color").value;a.fillStyle="rgba("+Q[0]+","+Q[1]+","+Q[2]+","+w*g+")";p?Ne(a,q,t,M,n,2):a.fillRect(q,t,M,n);a.fillStyle=B}if(y>0&&C>0){w=a.strokeStyle;B=a.lineWidth;Q=b.pstyle("text-border-color").value;var ja=b.pstyle("text-border-style").value;a.strokeStyle="rgba("+Q[0]+","+
Q[1]+","+Q[2]+","+C*g+")";a.lineWidth=y;if(a.setLineDash)switch(ja){case "dotted":a.setLineDash([1,1]);break;case "dashed":a.setLineDash([4,2]);break;case "double":a.lineWidth=y/4;a.setLineDash([]);break;case "solid":a.setLineDash([])}p?Ne(a,q,t,M,n,2,"stroke"):a.strokeRect(q,t,M,n);ja==="double"&&(g=y/2,p?Ne(a,q+g,t+g,M-g*2,n-g*2,2,"stroke"):a.strokeRect(q+g,t+g,M-g*2,n-g*2));a.setLineDash&&a.setLineDash([]);a.lineWidth=B;a.strokeStyle=w}}g=2*b.pstyle("text-outline-width").pfValue;g>0&&(a.lineWidth=
g);if(b.pstyle("text-wrap").value==="wrap"){l=Bb(f,"labelWrapCachedLines",c);f=Bb(f,"labelLineHeight",c);p=e/2;q=this.getLabelJustification(b);q!=="auto"&&(m==="left"?q==="left"?h+=-e:q==="center"&&(h+=-p):m==="center"?q==="left"?h+=-p:q==="right"&&(h+=p):m==="right"&&(q==="center"?h+=p:q==="right"&&(h+=e)));switch(u){case "top":k-=(l.length-1)*f;break;case "center":case "bottom":k-=(l.length-1)*f}for(e=0;e<l.length;e++)g>0&&a.strokeText(l[e],h,k),a.fillText(l[e],h,k),k+=f}else g>0&&a.strokeText(l,
h,k),a.fillText(l,h,k);d!==0&&(a.rotate(-d),a.translate(-x,-v))}}}},Vc,Ak,{initWebgl:function(a,b){var c=this,d=c.data.contexts[c.WEBGL];a.bgColor=ql(c);a.webglTexSize=Math.min(a.webglTexSize,d.getParameter(d.MAX_TEXTURE_SIZE));a.webglTexRows=Math.min(a.webglTexRows,54);a.webglTexRowsNodes=Math.min(a.webglTexRowsNodes,54);a.webglBatchSize=Math.min(a.webglBatchSize,16384);a.webglTexPerBatch=Math.min(a.webglTexPerBatch,d.getParameter(d.MAX_TEXTURE_IMAGE_UNITS));c.webglDebug=a.webglDebug;c.webglDebugShowAtlases=
a.webglDebugShowAtlases;c.pickingFrameBuffer=ol(d);c.pickingFrameBuffer.needsDraw=!0;c.drawing=new mn(c,d,a);d=function(l){return function(m){return c.getTextAngle(m,l)}};var e=function(l){return function(m){return(m=m.pstyle(l))&&m.value}},f=function(l){return function(m){return m.pstyle("".concat(l,"-opacity")).value>0}},g=function(l){return l.pstyle("text-events").strValue==="yes"?2:1},h=function(l){var m=l.position(),n=m.x;m=m.y;var p=l.outerWidth();l=l.outerHeight();return{w:p,h:l,x1:n-p/2,y1:m-
l/2}};c.drawing.addAtlasCollection("node",{texRows:a.webglTexRowsNodes});c.drawing.addAtlasCollection("label",{texRows:a.webglTexRows});c.drawing.addTextureAtlasRenderType("node-body",{collection:"node",getKey:b.getStyleKey,getBoundingBox:b.getElementBox,drawElement:b.drawElement});c.drawing.addSimpleShapeRenderType("node-body",{getBoundingBox:h,isSimple:jl,shapeProps:{shape:"shape",color:"background-color",opacity:"background-opacity",radius:"corner-radius",border:!0}});c.drawing.addSimpleShapeRenderType("node-overlay",
{getBoundingBox:h,isVisible:f("overlay"),shapeProps:{shape:"overlay-shape",color:"overlay-color",opacity:"overlay-opacity",padding:"overlay-padding",radius:"overlay-corner-radius"}});c.drawing.addSimpleShapeRenderType("node-underlay",{getBoundingBox:h,isVisible:f("underlay"),shapeProps:{shape:"underlay-shape",color:"underlay-color",opacity:"underlay-opacity",padding:"underlay-padding",radius:"underlay-corner-radius"}});c.drawing.addTextureAtlasRenderType("label",{collection:"label",getTexPickingMode:g,
getKey:uf(b.getLabelKey,null),getBoundingBox:vf(b.getLabelBox,null),drawClipped:!0,drawElement:b.drawLabel,getRotation:d(null),getRotationPoint:b.getLabelRotationPoint,getRotationOffset:b.getLabelRotationOffset,isVisible:e("label")});c.drawing.addTextureAtlasRenderType("edge-source-label",{collection:"label",getTexPickingMode:g,getKey:uf(b.getSourceLabelKey,"source"),getBoundingBox:vf(b.getSourceLabelBox,"source"),drawClipped:!0,drawElement:b.drawSourceLabel,getRotation:d("source"),getRotationPoint:b.getSourceLabelRotationPoint,
getRotationOffset:b.getSourceLabelRotationOffset,isVisible:e("source-label")});c.drawing.addTextureAtlasRenderType("edge-target-label",{collection:"label",getTexPickingMode:g,getKey:uf(b.getTargetLabelKey,"target"),getBoundingBox:vf(b.getTargetLabelBox,"target"),drawClipped:!0,drawElement:b.drawTargetLabel,getRotation:d("target"),getRotationPoint:b.getTargetLabelRotationPoint,getRotationOffset:b.getTargetLabelRotationOffset,isVisible:e("target-label")});var k=Dd(function(){console.log("garbage collect flag set");
c.data.gc=!0},1E4);c.onUpdateEleCalcs(function(l,m){l=!1;m&&m.length>0&&(l|=c.drawing.invalidate(m));l&&k()});rl(c)}},Bk,{createBuffer:function(a,b){var c=document.createElement("canvas");c.width=a;c.height=b;return[c,c.getContext("2d")]},bufferCanvasImage:function(a){var b=this.cy,c=b.mutableElements().boundingBox(),d=this.findContainerClientCoords(),e=a.full?Math.ceil(c.w):d[2];d=a.full?Math.ceil(c.h):d[3];var f=Ba(a.maxWidth)||Ba(a.maxHeight),g=this.getPixelRatio(),h=1;if(a.scale!==void 0)e*=a.scale,
d*=a.scale,h=a.scale;else if(f){var k=Infinity,l=Infinity;Ba(a.maxWidth)&&(k=h*a.maxWidth/e);Ba(a.maxHeight)&&(l=h*a.maxHeight/d);h=Math.min(k,l);e*=h;d*=h}f||(e*=g,d*=g,h*=g);f=document.createElement("canvas");f.width=e;f.height=d;f.style.width=e+"px";f.style.height=d+"px";g=f.getContext("2d");e>0&&d>0&&(g.clearRect(0,0,e,d),g.globalCompositeOperation="source-over",k=this.getCachedZSortedEles(),a.full?(g.translate(-c.x1*h,-c.y1*h),g.scale(h,h),this.drawElements(g,k),g.scale(1/h,1/h),g.translate(c.x1*
h,c.y1*h)):(l=b.pan(),c=l.x*h,l=l.y*h,h*=b.zoom(),g.translate(c,l),g.scale(h,h),this.drawElements(g,k),g.scale(1/h,1/h),g.translate(-c,-l)),a.bg&&(g.globalCompositeOperation="destination-over",g.fillStyle=a.bg,g.rect(0,0,e,d),g.fill()));return f},png:function(a){return Ei(a,this.bufferCanvasImage(a),"image/png")},jpg:function(a){return Ei(a,this.bufferCanvasImage(a),"image/jpeg")}},{nodeShapeImpl:function(a,b,c,d,e,f,g,h){switch(a){case "ellipse":return this.drawEllipsePath(b,c,d,e,f);case "polygon":return this.drawPolygonPath(b,
c,d,e,f,g);case "round-polygon":return this.drawRoundPolygonPath(b,c,d,e,f,g,h);case "roundrectangle":case "round-rectangle":return this.drawRoundRectanglePath(b,c,d,e,f,h);case "cutrectangle":case "cut-rectangle":return this.drawCutRectanglePath(b,c,d,e,f,g,h);case "bottomroundrectangle":case "bottom-round-rectangle":return this.drawBottomRoundRectanglePath(b,c,d,e,f,h);case "barrel":return this.drawBarrelPath(b,c,d,e,f)}}}].forEach(function(a){Ra(ab,a)});var on=[{type:"layout",extensions:Zm},{type:"renderer",
extensions:[{name:"null",impl:ki},{name:"base",impl:sk},{name:"canvas",impl:Fi}]}],Li={},Ni={},yf=function(){if(arguments.length===2)return Ji.apply(null,arguments);if(arguments.length===3)return Ii.apply(null,arguments);if(arguments.length===4)return xl.apply(null,arguments);if(arguments.length===5)return wl.apply(null,arguments);Ab("Invalid extension access syntax")};Bd.prototype.extension=yf;on.forEach(function(a){a.extensions.forEach(function(b){Ii(a.type,b.name,b.impl)})});var Be=function(){if(!(this instanceof
Be))return new Be;this.length=0},Wc=Be.prototype;Wc.instanceString=function(){return"stylesheet"};Wc.selector=function(a){this[this.length++]={selector:a,properties:[]};return this};Wc.css=function(a,b){var c=this.length-1;if(Qa(a))this[c].properties.push({name:a,value:b});else if(hb(a)){b=Object.keys(a);for(var d=0;d<b.length;d++){var e=b[d],f=a[e];f!=null&&(e=Jb.properties[e]||Jb.properties[$d(e)],e!=null&&this[c].properties.push({name:e.name,value:f}))}}return this};Wc.style=Wc.css;Wc.generateStyle=
function(a){a=new Jb(a);return this.appendToStyle(a)};Wc.appendToStyle=function(a){for(var b=0;b<this.length;b++){var c=this[b],d=c.properties;a.selector(c.selector);for(c=0;c<d.length;c++){var e=d[c];a.css(e.name,e.value)}}return a};var Xc=function(a){a===void 0&&(a={});if(hb(a))return new Bd(a);if(Qa(a))return yf.apply(yf,arguments)};Xc.use=function(a){var b=Array.prototype.slice.call(arguments,1);b.unshift(Xc);a.apply(null,b);return this};Xc.warnings=function(a){return $i(a)};Xc.version="3.32.0";
Xc.stylesheet=Xc.Stylesheet=Be;ta.exports=Xc};
shadow$provide[33]=function(P,ta,ka,V){function J(X){var ea=-1,La=X?X.length:0;for(this.clear();++ea<La;){var Sa=X[ea];this.set(Sa[0],Sa[1])}}function N(X){var ea=-1,La=X?X.length:0;for(this.clear();++ea<La;){var Sa=X[ea];this.set(Sa[0],Sa[1])}}function L(X){var ea=-1,La=X?X.length:0;for(this.clear();++ea<La;){var Sa=X[ea];this.set(Sa[0],Sa[1])}}function I(X,ea){for(var La=X.length;La--;){var Sa=X[La][0];if(Sa===ea||Sa!==Sa&&ea!==ea)return La}return-1}function H(X,ea){X=X.__data__;var La=typeof ea;
return(La=="string"||La=="number"||La=="symbol"||La=="boolean"?ea!=="__proto__":ea===null)?X[typeof ea=="string"?"string":"hash"]:X.map}function W(X,ea){X=X==null?void 0:X[ea];if(!F(X)||Pa&&Pa in X)var La=!1;else{ea=F(X)?Ca.call(X):"";if(!(ea=ea=="[object Function]"||ea=="[object GeneratorFunction]")&&(ea=!1,X!=null&&typeof X.toString!="function"))try{ea=!!(X+"")}catch(fb){}ea=ea?Ka:U;var Sa=ea.test;b:{if(X!=null){try{La=Oa.call(X);break b}catch(fb){}try{La=X+"";break b}catch(fb){}}La=""}La=Sa.call(ea,
La)}return La?X:void 0}function D(X,ea){if(typeof X!="function"||ea&&typeof ea!="function")throw new TypeError("Expected a function");var La=function(){var Sa=arguments,fb=ea?ea.apply(this,Sa):Sa[0],E=La.cache;if(E.has(fb))return E.get(fb);Sa=X.apply(this,Sa);La.cache=E.set(fb,Sa);return Sa};La.cache=new (D.Cache||L);return La}function F(X){var ea=typeof X;return!!X&&(ea=="object"||ea=="function")}var U=/^\[object .+?Constructor\]$/;P=typeof self=="object"&&self&&self.Object===Object&&self;V=typeof V==
"object"&&V&&V.Object===Object&&V||P||Function("return this")();P=Array.prototype;ka=Function.prototype;var ha=Object.prototype,za=V["__core-js_shared__"],Pa=function(){var X=/[^.]+$/.exec(za&&za.keys&&za.keys.IE_PROTO||"");return X?"Symbol(src)_1."+X:""}(),Oa=ka.toString,xa=ha.hasOwnProperty,Ca=ha.toString,Ka=RegExp("^"+Oa.call(xa).replace(/[\\^$.*+?()[\]{}|]/g,"\\$\x26").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),kb=P.splice,pb=W(V,"Map"),gb=W(Object,"create");
J.prototype.clear=function(){this.__data__=gb?gb(null):{}};J.prototype["delete"]=function(X){return this.has(X)&&delete this.__data__[X]};J.prototype.get=function(X){var ea=this.__data__;return gb?(X=ea[X],X==="__lodash_hash_undefined__"?void 0:X):xa.call(ea,X)?ea[X]:void 0};J.prototype.has=function(X){var ea=this.__data__;return gb?ea[X]!==void 0:xa.call(ea,X)};J.prototype.set=function(X,ea){this.__data__[X]=gb&&ea===void 0?"__lodash_hash_undefined__":ea;return this};N.prototype.clear=function(){this.__data__=
[]};N.prototype["delete"]=function(X){var ea=this.__data__;X=I(ea,X);if(X<0)return!1;X==ea.length-1?ea.pop():kb.call(ea,X,1);return!0};N.prototype.get=function(X){var ea=this.__data__;X=I(ea,X);return X<0?void 0:ea[X][1]};N.prototype.has=function(X){return I(this.__data__,X)>-1};N.prototype.set=function(X,ea){var La=this.__data__,Sa=I(La,X);Sa<0?La.push([X,ea]):La[Sa][1]=ea;return this};L.prototype.clear=function(){this.__data__={hash:new J,map:new (pb||N),string:new J}};L.prototype["delete"]=function(X){return H(this,
X)["delete"](X)};L.prototype.get=function(X){return H(this,X).get(X)};L.prototype.has=function(X){return H(this,X).has(X)};L.prototype.set=function(X,ea){H(this,X).set(X,ea);return this};D.Cache=L;ta.exports=D};
shadow$provide[34]=function(P,ta,ka,V){function J(xa,Ca,Ka){function kb(Ja){var Va=La,r=Sa;La=Sa=void 0;qa=Ja;return fb=xa.apply(r,Va)}function pb(Ja){var Va=Ja-Y;Ja-=qa;return Y===void 0||Va>=Ca||Va<0||va&&Ja>=ma}function gb(){var Ja=ha.Date.now();if(pb(Ja))return X(Ja);var Va=setTimeout;var r=Ja-qa;Ja=Ca-(Ja-Y);r=va?Oa(Ja,ma-r):Ja;E=Va(gb,r)}function X(Ja){E=void 0;if(Fa&&La)return kb(Ja);La=Sa=void 0;return fb}function ea(){var Ja=ha.Date.now(),Va=pb(Ja);La=arguments;Sa=this;Y=Ja;if(Va){if(E===
void 0)return qa=Ja=Y,E=setTimeout(gb,Ca),Aa?kb(Ja):fb;if(va)return E=setTimeout(gb,Ca),kb(Y)}E===void 0&&(E=setTimeout(gb,Ca));return fb}var La,Sa,fb,E,Y,qa=0,Aa=!1,va=!1,Fa=!0;if(typeof xa!="function")throw new TypeError("Expected a function");Ca=L(Ca)||0;if(N(Ka)){Aa=!!Ka.leading;var ma=(va="maxWait"in Ka)?Pa(L(Ka.maxWait)||0,Ca):ma;Fa="trailing"in Ka?!!Ka.trailing:Fa}ea.cancel=function(){E!==void 0&&clearTimeout(E);qa=0;La=Y=Sa=E=void 0};ea.flush=function(){return E===void 0?fb:X(ha.Date.now())};
return ea}function N(xa){var Ca=typeof xa;return!!xa&&(Ca=="object"||Ca=="function")}function L(xa){if(typeof xa=="number")return xa;var Ca=xa;if(typeof Ca=="symbol"||Ca&&typeof Ca=="object"&&za.call(Ca)=="[object Symbol]")return I;N(xa)&&(xa=typeof xa.valueOf=="function"?xa.valueOf():xa,xa=N(xa)?xa+"":xa);if(typeof xa!="string")return xa===0?xa:+xa;xa=xa.replace(H,"");return(Ca=D.test(xa))||F.test(xa)?U(xa.slice(2),Ca?2:8):W.test(xa)?I:+xa}var I=0/0,H=/^\s+|\s+$/g,W=/^[-+]0x[0-9a-f]+$/i,D=/^0b[01]+$/i,
F=/^0o[0-7]+$/i,U=parseInt;P=typeof self=="object"&&self&&self.Object===Object&&self;var ha=typeof V=="object"&&V&&V.Object===Object&&V||P||Function("return this")(),za=Object.prototype.toString,Pa=Math.max,Oa=Math.min;ta.exports=function(xa,Ca,Ka){var kb=!0,pb=!0;if(typeof xa!="function")throw new TypeError("Expected a function");N(Ka)&&(kb="leading"in Ka?!!Ka.leading:kb,pb="trailing"in Ka?!!Ka.trailing:pb);return J(xa,Ca,{leading:kb,maxWait:Ca,trailing:pb})}};
shadow$provide[35]=function(P,ta,ka){(function(V,J){typeof ka==="object"&&typeof ta==="object"?ta.exports=J(P(33),P(34)):typeof define==="function"&&define.amd?define(["lodash.memoize","lodash.throttle"],J):typeof ka==="object"?ka.cytoscapeEdgehandles=J(P(33),P(34)):V.cytoscapeEdgehandles=J(V._.memoize,V._.throttle)})(this,function(V,J){return function(N){function L(H){if(I[H])return I[H].exports;var W=I[H]={i:H,l:!1,exports:{}};N[H].call(W.exports,W,W.exports,L);W.l=!0;return W.exports}var I={};
L.m=N;L.c=I;L.i=function(H){return H};L.d=function(H,W,D){L.o(H,W)||Object.defineProperty(H,W,{configurable:!1,enumerable:!0,get:D})};L.n=function(H){var W=H&&H.__esModule?function(){return H["default"]}:function(){return H};L.d(W,"a",W);return W};L.o=function(H,W){return Object.prototype.hasOwnProperty.call(H,W)};L.p="";return L(L.s=12)}([function(N,L,I){N.exports=Object.assign!=null?Object.assign.bind(Object):function(H){for(var W=arguments.length,D=Array(W>1?W-1:0),F=1;F<W;F++)D[F-1]=arguments[F];
D.filter(function(U){return U!=null}).forEach(function(U){Object.keys(U).forEach(function(ha){return H[ha]=U[ha]})});return H}},function(N,L,I){var H=I(10),W=I(0);N.exports=function(D){return new H(W({cy:this},D))}},function(N,L,I){N.exports={disableGestures:function(){this.saveGestureState();this.cy.zoomingEnabled(!1).panningEnabled(!1).boxSelectionEnabled(!1);if(this.options.disableBrowserGestures){var H=this.windowListenerOptions;window.addEventListener("touchstart",this.preventDefault,H);window.addEventListener("touchmove",
this.preventDefault,H);window.addEventListener("wheel",this.preventDefault,H)}return this},resetGestures:function(){this.cy.zoomingEnabled(this.lastZoomingEnabled).panningEnabled(this.lastPanningEnabled).boxSelectionEnabled(this.lastBoxSelectionEnabled);if(this.options.disableBrowserGestures){var H=this.windowListenerOptions;window.removeEventListener("touchstart",this.preventDefault,H);window.removeEventListener("touchmove",this.preventDefault,H);window.removeEventListener("wheel",this.preventDefault,
H)}return this},saveGestureState:function(){var H=this.cy;this.lastPanningEnabled=H.panningEnabled();this.lastZoomingEnabled=H.zoomingEnabled();this.lastBoxSelectionEnabled=H.boxSelectionEnabled();return this}}},function(N,L,I){N.exports={addCytoscapeListeners:function(){var H=this,W=this.cy,D=this.options;this.addListener(W,"drag",function(){return H.grabbingNode=!0});this.addListener(W,"free",function(){return H.grabbingNode=!1});this.addListener(W,"tapstart","node",function(F){F=F.target;H.drawMode&&
H.start(F)});this.addListener(W,"tapdrag",function(F){H.update(F.position)});this.addListener(W,"tapdragover","node",function(F){D.snap||H.preview(F.target)});this.addListener(W,"tapdragout","node",function(F){D.snap||H.unpreview(F.target)});this.addListener(W,"tapend",function(){H.stop()});return this}}},function(N,L,I){N.exports={canConnect:function(H,W){return!H.same(W)},edgeParams:function(H,W){return{}},hoverDelay:150,snap:!0,snapThreshold:50,snapFrequency:15,noEdgeEventsInDraw:!0,disableBrowserGestures:!0}},
function(N,L,I){N.exports={toggleDrawMode:function(H){var W=this.cy;(this.drawMode=H!=null?H:!this.drawMode)?(this.prevUngrabifyState=W.autoungrabify(),W.autoungrabify(!0),this.emit("drawon")):(W.autoungrabify(this.prevUngrabifyState),this.emit("drawoff"));return this},enableDrawMode:function(){return this.toggleDrawMode(!0)},disableDrawMode:function(){return this.toggleDrawMode(!1)}}},function(N,L,I){var H=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(D){return typeof D}:
function(D){return D&&typeof Symbol==="function"&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":typeof D},W=I(0);N.exports={makeEdges:function(){var D=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,F=this.cy,U=this.presumptiveTargets,ha=this.previewEles,za=this.active,Pa=this.sourceNode,Oa=this.targetNode,xa=D?"eh-preview":"",Ca=F.collection(),Ka=this.canConnect(Oa);if(za&&Ka)if(Oa&&Oa.size()!==0){if(D)return U=F.add,Ka={group:"edges",data:{source:Pa.id(),target:Oa.id()}},ha=this.edgeParams(Oa),
za={},W(za,ha,Ka),W(za.data,ha.data,Ka.data),Ka=ha.classes,(typeof Ka==="undefined"?"undefined":H(Ka))===H("")?za.classes=ha.classes+" "+xa:(Ka=ha.classes,(typeof Ka==="undefined"?"undefined":H(Ka))===H([])&&Ka.length!=null?za.classes=ha.classes.join(" ")+" "+xa:za.classes=xa),F=U.call(F,za),Ca=Ca.merge(F),D?(this.previewEles=Ca,Ca.style("events","no")):(Ca.style("events",""),this.emit("complete",this.mp(),Pa,Oa,Ca)),this;ha.removeClass("eh-preview").style("events","");this.emit("complete",this.mp(),
Pa,Oa,ha)}else ha.remove(),this.emit("cancel",this.mp(),Pa,U)},makePreview:function(){this.makeEdges(!0);return this},removePreview:function(){this.previewShown()&&this.previewEles.remove();return this},previewShown:function(){return this.previewEles.nonempty()&&this.previewEles.inside()},updateEdge:function(){var D=this,F=this.sourceNode,U=this.ghostNode,ha=this.cy,za=this.mx,Pa=this.my,Oa=void 0,xa=void 0;if(F){if(!U||U.length===0||U.removed())xa=this.ghostEles=ha.collection(),ha.batch(function(){U=
D.ghostNode=ha.add({group:"nodes",classes:"eh-ghost eh-ghost-node",position:{x:0,y:0}});U.style({"background-color":"blue",width:1E-4,height:1E-4,opacity:0,events:"no"});var Ca={};Oa=ha.add(W({},Ca,{group:"edges",data:W({},Ca.data,{source:F.id(),target:U.id()}),classes:"eh-ghost eh-ghost-edge"}));Oa.style({events:"no"})}),xa.merge(U).merge(Oa);U.position({x:za,y:Pa});return this}}}},function(N,L,I){N.exports={disableEdgeEvents:function(){this.options.noEdgeEventsInDraw&&this.cy.edges().style("events",
"no");return this},enableEdgeEvents:function(){this.options.noEdgeEventsInDraw&&this.cy.edges().style("events","");return this}}},function(N,L,I){N.exports={enable:function(){this.enabled=!0;this.emit("enable");return this},disable:function(){this.enabled=!1;this.emit("disable");return this}}},function(N,L,I){var H=I(13),W=Math.sqrt(2);N.exports={start:function(D){var F=this;if(this.canStartOn(D)){this.active=!0;this.sourceNode=D;this.sourceNode.addClass("eh-source");this.disableGestures();this.disableEdgeEvents();
var U=function(ha){return ha.id()};this.canConnect=H(function(ha){return F.options.canConnect(F.sourceNode,ha)},U);this.edgeParams=H(function(ha){return F.options.edgeParams(F.sourceNode,ha)},U);this.emit("start",this.hp(),D)}},update:function(D){if(this.active)return this.mx=D.x,this.my=D.y,this.updateEdge(),this.throttledSnap(),this},preview:function(D){var F=this,U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,ha=this.options,za=this.sourceNode,Pa=this.ghostEles,Oa=this.presumptiveTargets,
xa=this.previewEles,Ca=this.active,Ka=D.same(this.ghostNode),kb=!this.canConnect(D),pb=D.same(this.targetNode);if(!Ca||Ka||kb||pb)return!1;this.targetNode.nonempty()&&this.unpreview(this.targetNode);clearTimeout(this.previewTimeout);Ca=function(){F.targetNode=D;Oa.merge(D);D.addClass("eh-presumptive-target");D.addClass("eh-target");F.emit("hoverover",F.mp(),za,D);D.addClass("eh-preview");Pa.addClass("eh-preview-active");za.addClass("eh-preview-active");D.addClass("eh-preview-active");F.makePreview();
F.emit("previewon",F.mp(),za,D,xa)};U&&ha.hoverDelay>0?this.previewTimeout=setTimeout(Ca,ha.hoverDelay):Ca();return!0},unpreview:function(D){if(this.active){var F=this.sourceNode,U=this.previewEles,ha=this.ghostEles,za=this.cy;clearTimeout(this.previewTimeout);this.previewTimeout=null;D.removeClass("eh-preview eh-target eh-presumptive-target eh-preview-active");ha.removeClass("eh-preview-active");F.removeClass("eh-preview-active");this.targetNode=za.collection();this.removePreview(F,D);this.emit("hoverout",
this.mp(),F,D);this.emit("previewoff",this.mp(),F,D,U);return this}},stop:function(){if(this.active){var D=this.sourceNode,F=this.targetNode,U=this.ghostEles,ha=this.presumptiveTargets;clearTimeout(this.previewTimeout);D.removeClass("eh-source eh-preview-active");F.removeClass("eh-target eh-preview eh-hover eh-preview-active");ha.removeClass("eh-presumptive-target");this.makeEdges();U.remove();this.clearCollections();this.resetGestures();this.enableEdgeEvents();this.active=!1;this.emit("stop",this.mp(),
D);return this}},snap:function(){if(!this.active||!this.options.snap)return!1;var D=this.cy,F=this.targetNode,U=this.options.snapThreshold,ha=this.mp(),za=this.previewEles,Pa=this.ghostNode,Oa=function(X,ea,La,Sa){X=La-X;ea=Sa-ea;return X*X+ea*ea},xa=function(X){var ea=X.position();ea=Oa(ea.x,ea.y,ha.x,ha.y);X=W*Math.max(X.outerWidth(),X.outerHeight())/2+U;return ea<=X*X},Ca=function(X){var ea=X.position(),La=X.outerWidth()/2,Sa=X.outerHeight()/2,fb=ea.x,E=ea.y;ea=ha.x;X=ha.y;var Y=fb-La;La=fb+La;
fb=E-Sa;Sa=E+Sa;E=Y<=ea&&ea<=La;var qa=fb<=X&&X<=Sa;return E&&qa?0:E?(ea=X-fb,X-=Sa,Math.min(ea*ea,X*X)):qa?(X=ea-Y,ea-=La,Math.min(X*X,ea*ea)):ea<Y&&X<fb?Oa(ea,X,Y,fb):ea>La&&X<fb?Oa(ea,X,La,fb):ea<Y&&X>Sa?Oa(ea,X,Y,Sa):Oa(ea,X,La,Sa)},Ka=function(X){var ea=X.outerWidth()/2,La=X.outerHeight()/2;X=X.position();var Sa=X.x+ea,fb=X.y-La;La=X.y+La;return X.x-ea<=ha.x&&ha.x<=Sa&&fb<=ha.y&&ha.y<=La};D=D.nodes(function(X){return!(X.same(za)||X.same(Pa))&&xa(X)}).sort(function(X,ea){return Ca(X)-Ca(ea)});
var kb=!1;F.nonempty()&&!xa(F)&&this.unpreview(F);for(var pb=0;pb<D.length;pb++){var gb=D[pb];if(!gb.isParent()||!Ka(gb))if(!gb.isChild()||Ka(gb.parent()))if(gb.same(F)||this.preview(gb,!1)){kb=!0;break}}return kb},canStartOn:function(D){var F=this.previewEles,U=this.ghostEles,ha=this.active,za=this.grabbingNode;if(ha=this.enabled&&!ha&&!za&&D!=null&&D.nonempty())ha=!(F.anySame(D)||U.anySame(D));return ha},canStartDrawModeOn:function(D){return this.canStartOn(D)&&this.drawMode},canStartNonDrawModeOn:function(D){return this.canStartOn(D)&&
!this.drawMode}}},function(N,L,I){function H(Ka){this.cy=Ka.cy;this.listeners=[];this.enabled=!0;this.grabbingNode=this.active=this.drawMode=!1;this.clearCollections();this.my=this.mx=0;this.options=D({},W,Ka);this.saveGestureState();this.addListeners();this.throttledSnap=F(this.snap.bind(this),1E3/Ka.snapFrequency);this.preventDefault=function(gb){return gb.preventDefault()};this.canConnect=function(){return!1};var kb=!1;try{var pb=Object.defineProperty({},"passive",{get:function(){kb=!0}});window.addEventListener("test",
null,pb)}catch(gb){}this.windowListenerOptions=kb?{capture:!0,passive:!1}:!0}var W=I(4),D=I(0),F=I(14);L=I(2);var U=I(3),ha=I(5),za=I(6),Pa=I(8),Oa=I(9),xa=I(11);I=I(7);var Ca=H.prototype={};Ca.destroy=function(){this.removeListeners()};Ca.setOptions=function(Ka){D(this.options,Ka)};Ca.mp=function(){return{x:this.mx,y:this.my}};Ca.hp=function(){return{x:this.hx,y:this.hy}};Ca.clearCollections=function(){var Ka=this.cy;this.previewEles=Ka.collection();this.ghostEles=Ka.collection();this.ghostNode=
Ka.collection();this.sourceNode=Ka.collection();this.targetNode=Ka.collection();this.presumptiveTargets=Ka.collection()};[L,U,ha,za,Pa,Oa,xa,I].forEach(function(Ka){return D(Ca,Ka)});N.exports=H},function(N,L,I){function H(D,F,U,ha,za){(typeof U==="undefined"?"undefined":W(U))!==W("")&&(za=ha=U,U=null);za==null&&(za=!1);return{target:D,event:F,selector:U,callback:ha,options:za}}var W=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(D){return typeof D}:function(D){return D&&typeof Symbol===
"function"&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":typeof D};N.exports={addListener:function(D,F,U,ha,za){D=H(D,F,U,ha,za);this.listeners.push(D);D.target instanceof Element?D.target.addEventListener(D.event,D.callback,D.options):D.selector?D.target.addListener(D.event,D.selector,D.callback,D.options):D.target.addListener(D.event,D.callback,D.options);return this},addListeners:function(){var D=this;this.addCytoscapeListeners();this.addListener(this.cy,"destroy",function(){return D.destroy()});
return this},removeListener:function(D,F,U,ha,za){D=H(D,F,U,ha,za);for(F=this.listeners.length-1;F>=0;F--)if(U=this.listeners[F],!(D.target!==U.target||D.event!==U.event||D.selector!=null&&D.selector!==U.selector||D.callback!=null&&D.callback!==U.callback)){this.listeners.splice(F,1);D.target instanceof Element?D.target.removeEventListener(D.event,D.callback,D.options):D.selector?D.target.removeListener(D.event,D.selector,D.callback,D.options):D.target.removeListener(D.event,D.callback,D.options);
break}return this},removeListeners:function(){for(var D=this.listeners.length-1;D>=0;D--){var F=this.listeners[D];this.removeListener(F.target,F.event,F.selector,F.callback,F.options)}return this},emit:function(D,F){for(var U=this.cy,ha=arguments.length,za=Array(ha>2?ha-2:0),Pa=2;Pa<ha;Pa++)za[Pa-2]=arguments[Pa];U.emit({type:"eh"+D,position:F},za);return this}}},function(N,L,I){var H=I(1);L=function(W){W&&W("core","edgehandles",H)};typeof cytoscape!=="undefined"&&L(cytoscape);N.exports=L},function(N,
L){N.exports=V},function(N,L){N.exports=J}])})};
'use strict';var Ij=new $APP.V(null,"selected-node","selected-node",-247760356),Jj=new $APP.V(null,"transition-property","transition-property",2036650935),Kj=new $APP.V(null,"exercise","exercise",-801618741),Lj=new $APP.V(null,"text-outline-width","text-outline-width",857697989),Mj=new $APP.V(null,"mode","mode",654403691),Nj=new $APP.V(null,"width","width",-384071477),Oj=new $APP.V(null,"label","label",1718410804),Pj=new $APP.V(null,"validation-result","validation-result",2129171031),Qj=new $APP.V(null,
"cytoscape-instance","cytoscape-instance",-1597222685),Rj=new $APP.V(null,"color","color",1011675173),Sj=new $APP.V(null,"background-color","background-color",570434026),Tj=new $APP.V(null,"height","height",1025178622),Uj=new $APP.V(null,"transition-duration","transition-duration",85784092),Vj=new $APP.V(null,"current-exercise-idx","current-exercise-idx",1600573695),Wj=new $APP.V(null,"text-outline-color","text-outline-color",1053544575);$APP.Sf(32,{});var Xj=$APP.Sf(35,{});cytoscape.use(Xj);a:for(var Yj=[Rj,Lj,Sj,Nj,Oj,Jj,Uj,Tj,Wj],Zj=["#f1f5f9",2,"#475569","mapData(compute, 1, 16, 60, 120)","data(label)","background-color, border-color, width, height","0.2s","mapData(compute, 1, 16, 60, 120)","#475569"],ak=Yj.length,bk=0,ck=$APP.qb($APP.Be);;)if(bk<ak){if(Zj.length<=bk)throw Error(["No value supplied for key: ",$APP.A.g(Yj[bk])].join(""));var dk=bk+1,ek=$APP.tb(ck,Yj[bk],Zj[bk]);bk=dk;ck=ek}else{$APP.sb(ck);break a}
$APP.Sg.g(new $APP.u(null,5,[Mj,Kj,Vj,0,Pj,null,Qj,null,Ij,null],null));var fk=document.getElementById("cljs-playground-app");$APP.v(fk)&&$APP.Uh();
}).call(this);